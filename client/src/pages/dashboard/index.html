<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Cluster - AI Dashboard</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/jpeg" href="../../../public/images/logo2.jpeg">
    <link rel="shortcut icon" type="image/jpeg" href="../../../public/images/logo2.jpeg">
    <link rel="apple-touch-icon" href="../../../public/images/logo2.jpeg">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <!-- Global Auth: Extract token from URL if present (MUST RUN FIRST) -->
    <script src="../../../src/components/global-auth.js"></script>

    <!-- üõ°Ô∏è GLOBAL PAGE RELOAD PREVENTION - Must be first -->
    <script>
        // This runs BEFORE any other scripts to prevent page reloads
        (function () {
            // Intercept all form submissions
            document.addEventListener('submit', function (e) {
                // Allow specific forms
                if (e.target && (e.target.id === 'profile-form' || e.target.id === 'signinForm' || e.target.id === 'signupForm')) {
                    return;
                }

                e.preventDefault();
                e.stopPropagation();
                console.log('üõ°Ô∏è Form submission blocked by global handler');
                return false;
            }, true);

            // Also intercept on window level
            window.addEventListener('submit', function (e) {
                // Allow specific forms
                if (e.target && (e.target.id === 'profile-form' || e.target.id === 'signinForm' || e.target.id === 'signupForm')) {
                    return;
                }

                e.preventDefault();
                return false;
            }, true);
        })();
    </script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['Plus Jakarta Sans', 'sans-serif'],
                    },
                    colors: {
                        primary: '#2563eb',
                        secondary: '#475569',
                    }
                }
            }
        }
    </script>

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <!-- PDF.js for client-side PDF parsing -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>
        if (typeof pdfjsLib !== 'undefined') {
            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
        }
    </script>

    <!-- html2canvas and jsPDF for PDF download -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <!-- Resume Builder Fonts -->
    <style>
        /* Dashboard Section Visibility Control */
        .dashboard-section {
            display: none !important;
        }

        .dashboard-section.active {
            display: block !important;
        }

        /* Ensure Everything You Need section is always visible */
        #everything-section {
            opacity: 1 !important;
            transform: none !important;
            visibility: visible !important;
            display: block !important;
            position: relative !important;
            z-index: 10 !important;
            min-height: 600px !important;
        }
        
        #everything-section * {
            opacity: 1 !important;
            visibility: visible !important;
        }

        /* Ensure Footer is always visible */
        footer {
            opacity: 1 !important;
            visibility: visible !important;
            display: block !important;
            position: relative !important;
            z-index: 10 !important;
        }

        footer * {
            opacity: 1 !important;
            visibility: visible !important;
        }

        #footer-cta,
        #footer-grid,
        .footer-col {
            opacity: 1 !important;
            visibility: visible !important;
            display: block !important;
        }

        #footer-grid {
            display: grid !important;
            grid-template-columns: repeat(4, 1fr) !important;
        }

        @media (max-width: 1024px) {
            #footer-grid {
                grid-template-columns: repeat(2, 1fr) !important;
            }
        }

        @media (max-width: 768px) {
            #footer-grid {
                grid-template-columns: 1fr !important;
            }
        }

        /* Logo Styles - Matching Home Page */
        .logo-link {
            display: inline-flex;
            align-items: center;
            text-decoration: none;
            transition: transform 0.2s;
            background: transparent;
            cursor: pointer;
            pointer-events: auto;
            z-index: 1001;
            position: relative;
        }

        .logo-link:hover {
            transform: scale(1.05);
        }

        .logo-link img {
            mix-blend-mode: darken;
            filter: brightness(1.05) contrast(1.15) saturate(1.1);
        }

        .logo-text {
            height: auto;
            max-height: 80px;
            width: auto;
            display: block;
            mix-blend-mode: darken;
            filter: brightness(1.05) contrast(1.15) saturate(1.1);
            pointer-events: none;
        }

        /* Adding a new English font family needs to keep "public\fonts\fonts.ts" in sync */
        /* Sans Serif Fonts */
        @font-face {
            font-family: "Roboto";
            src: url("../../../public/fonts/Roboto-Regular.ttf");
        }

        @font-face {
            font-family: "Roboto";
            src: url("../../../public/fonts/Roboto-Bold.ttf");
            font-weight: bold;
        }

        @font-face {
            font-family: "Lato";
            src: url("../../../public/fonts/Lato-Regular.ttf");
        }

        @font-face {
            font-family: "Lato";
            src: url("../../../public/fonts/Lato-Bold.ttf");
            font-weight: bold;
        }

        @font-face {
            font-family: "Montserrat";
            src: url("../../../public/fonts/Montserrat-Regular.ttf");
        }

        @font-face {
            font-family: "Montserrat";
            src: url("../../../public/fonts/Montserrat-Bold.ttf");
            font-weight: bold;
        }

        @font-face {
            font-family: "OpenSans";
            src: url("../../../public/fonts/OpenSans-Regular.ttf");
        }

        @font-face {
            font-family: "OpenSans";
            src: url("../../../public/fonts/OpenSans-Bold.ttf");
            font-weight: bold;
        }

        @font-face {
            font-family: "Raleway";
            src: url("../../../public/fonts/Raleway-Regular.ttf");
        }

        @font-face {
            font-family: "Raleway";
            src: url("../../../public/fonts/Raleway-Bold.ttf");
            font-weight: bold;
        }

        /* Serif Fonts */
        @font-face {
            font-family: "Caladea";
            src: url("../../../public/fonts/Caladea-Regular.ttf");
        }

        @font-face {
            font-family: "Caladea";
            src: url("../../../public/fonts/Caladea-Bold.ttf");
            font-weight: bold;
        }

        @font-face {
            font-family: "Lora";
            src: url("../../../public/fonts/Lora-Regular.ttf");
        }

        @font-face {
            font-family: "Lora";
            src: url("../../../public/fonts/Lora-Bold.ttf");
            font-weight: bold;
        }

        @font-face {
            font-family: "RobotoSlab";
            src: url("../../../public/fonts/RobotoSlab-Regular.ttf");
        }

        @font-face {
            font-family: "RobotoSlab";
            src: url("../../../public/fonts/RobotoSlab-Bold.ttf");
            font-weight: bold;
        }

        @font-face {
            font-family: "PlayfairDisplay";
            src: url("../../../public/fonts/PlayfairDisplay-Regular.ttf");
        }

        @font-face {
            font-family: "PlayfairDisplay";
            src: url("../../../public/fonts/PlayfairDisplay-Bold.ttf");
            font-weight: bold;
        }

        @font-face {
            font-family: "Merriweather";
            src: url("../../../public/fonts/Merriweather-Regular.ttf");
        }

        @font-face {
            font-family: "Merriweather";
            src: url("../../../public/fonts/Merriweather-Bold.ttf");
            font-weight: bold;
        }
    </style>

    <!-- Local ATS Resume Analyzer - No External AI APIs -->

    <!-- Lenis Smooth Scroll -->
    <link rel="stylesheet" href="https://unpkg.com/lenis@1.3.15/dist/lenis.css">
    <script src="https://unpkg.com/lenis@1.3.15/dist/lenis.min.js"></script>

    <link rel="stylesheet" href="../../../src/styles/dashboard-styles.css">

    <!-- 3D Testimonial Styles -->
    <style>
        /* 3D Testimonial Container */
        .testimonial-3d-container {
            position: relative;
            width: 100%;
            height: 500px;
            perspective: 1000px;
            perspective-origin: center center;
        }

        /* 3D Scroll Row */
        .testimonial-3d-row {
            display: flex;
            gap: 1.5rem;
            width: fit-content;
            transform-style: preserve-3d;
        }

        /* Testimonial Card */
        .testimonial-card {
            flex-shrink: 0;
            width: 380px;
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            transform-style: preserve-3d;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
        }

        .testimonial-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6, #ec4899);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .testimonial-card:hover {
            transform: translateY(-8px) rotateY(2deg);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
        }

        .testimonial-card:hover::before {
            opacity: 1;
        }

        /* Card Content */
        .testimonial-avatar {
            width: 4rem;
            height: 4rem;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 1rem;
            border: 3px solid white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .testimonial-name {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 0.25rem;
        }

        .testimonial-title {
            font-size: 0.875rem;
            color: #64748b;
            margin-bottom: 1rem;
        }

        .testimonial-text {
            font-size: 0.9375rem;
            line-height: 1.6;
            color: #475569;
            font-style: italic;
        }

        /* 3D Parallax Effect */
        .testimonial-card[data-depth] {
            transform-style: preserve-3d;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .testimonial-card {
                width: 320px;
                padding: 1.5rem;
            }

            .testimonial-3d-container {
                height: 450px;
            }
        }

        /* Smooth scroll indicator */
        .testimonial-scroll-hint {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            color: #64748b;
            font-size: 0.875rem;
            pointer-events: none;
            opacity: 0.6;
        }

        /* Notification/Message Card Styles */
        .notification-card {
            position: relative;
            background: white;
            border-radius: 0.75rem;
            padding: 1rem 1.25rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
            border-left: 4px solid;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            opacity: 0;
            transform: translateY(20px) scale(0.95);
            filter: blur(4px);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .notification-card.notification-enter {
            animation: notificationEnter 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        .notification-card.notification-exit {
            animation: notificationExit 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        .notification-card:hover {
            transform: translateY(-2px) scale(1.01);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }

        /* Priority-based left border colors */
        .notification-card.priority-high {
            border-left-color: #ef4444;
            box-shadow: 0 2px 8px rgba(239, 68, 68, 0.15);
        }

        .notification-card.priority-medium {
            border-left-color: #f59e0b;
            box-shadow: 0 2px 8px rgba(245, 158, 11, 0.15);
        }

        .notification-card.priority-low {
            border-left-color: #3b82f6;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.15);
        }

        .notification-card.priority-success {
            border-left-color: #10b981;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.15);
        }

        /* Notification Avatar */
        .notification-avatar {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            object-fit: cover;
            flex-shrink: 0;
            border: 2px solid white;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .notification-avatar-initials {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.75rem;
            color: white;
            flex-shrink: 0;
            border: 2px solid white;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* Notification Content */
        .notification-name {
            font-size: 0.9375rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 0.25rem;
        }

        .notification-timestamp {
            font-size: 0.75rem;
            color: #64748b;
            font-family: 'Courier New', monospace;
        }

        .notification-message {
            font-size: 0.875rem;
            color: #475569;
            line-height: 1.6;
            margin-top: 0.375rem;
            word-wrap: break-word;
        }

        /* Animations */
        @keyframes notificationEnter {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.95);
                filter: blur(4px);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
                filter: blur(0px);
            }
        }

        @keyframes notificationExit {
            from {
                opacity: 1;
                transform: translateY(0) scale(1);
                filter: blur(0px);
            }

            to {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
                filter: blur(4px);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
            }

            to {
                opacity: 0;
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Messages List Scrollbar */
        #messages-list::-webkit-scrollbar {
            width: 6px;
        }

        #messages-list::-webkit-scrollbar-track {
            background: transparent;
        }

        #messages-list::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }

        #messages-list::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        /* Profile Form Floating Labels */
        .form-group {
            position: relative;
            margin-bottom: 1.5rem;
        }

        .form-input {
            width: 100%;
            padding: 1rem 1rem 1rem 2.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 0.75rem;
            background: white;
            font-size: 0.9375rem;
            color: #1e293b;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            outline: none;
        }

        .form-input:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .form-input:hover:not(:focus) {
            border-color: #cbd5e1;
        }

        .form-input:focus+.form-label,
        .form-input:not(:placeholder-shown)+.form-label {
            transform: translateY(-1.5rem) translateX(-0.5rem) scale(0.85);
            color: #3b82f6;
            background: white;
            padding: 0 0.5rem;
        }

        .form-label {
            position: absolute;
            left: 2.75rem;
            top: 1rem;
            font-size: 0.9375rem;
            color: #64748b;
            pointer-events: none;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            transform-origin: left top;
        }

        .form-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: #94a3b8;
            font-size: 1rem;
            transition: color 0.3s;
            pointer-events: none;
            z-index: 1;
        }

        .form-group:focus-within .form-icon {
            color: #3b82f6;
        }

        .form-textarea {
            width: 100%;
            padding: 1rem 1rem 1rem 2.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 0.75rem;
            background: white;
            font-size: 0.9375rem;
            color: #1e293b;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            outline: none;
            resize: vertical;
            min-height: 100px;
        }

        .form-textarea:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .form-textarea:hover:not(:focus) {
            border-color: #cbd5e1;
        }

        .form-textarea:focus+.form-label {
            transform: translateY(-1.5rem) translateX(-0.5rem) scale(0.85);
            color: #3b82f6;
            background: white;
            padding: 0 0.5rem;
        }

        .form-textarea:not(:placeholder-shown)+.form-label,
        .form-textarea.has-value+.form-label {
            transform: translateY(-1.5rem) translateX(-0.5rem) scale(0.85);
            color: #3b82f6;
            background: white;
            padding: 0 0.5rem;
        }

        .form-select {
            width: 100%;
            padding: 1rem 1rem 1rem 2.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 0.75rem;
            background: white;
            font-size: 0.9375rem;
            color: #1e293b;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            outline: none;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%233b82f6'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 1.25rem;
            padding-right: 3rem;
        }

        .form-select:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .form-select:hover:not(:focus) {
            border-color: #cbd5e1;
        }

        .form-select:not([value=""])+.form-label,
        .form-select:focus+.form-label {
            transform: translateY(-1.5rem) translateX(-0.5rem) scale(0.85);
            color: #3b82f6;
            background: white;
            padding: 0 0.5rem;
        }

        .required-indicator {
            color: #ef4444;
            margin-left: 0.25rem;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 0.5rem;
        }

        .section-subtitle {
            font-size: 0.9375rem;
            color: #64748b;
            margin-bottom: 2rem;
        }

        .group-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid #e2e8f0;
        }

        .profile-fade-up {
            opacity: 0;
            transform: translateY(30px);
        }

        /* Reduced Motion Support */
        @media (prefers-reduced-motion: reduce) {

            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
        }

        /* Prevent Layout Shifts */
        .hero-title span,
        .feature-card,
        .pricing-card,
        .testimonial-card {
            will-change: transform, opacity;
        }

        /* Smooth transitions for hover states */
        .sphere-btn,
        .magnetic-btn,
        button[type="submit"] {
            transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* 4-Step Plan Staircase Animation */
        .step-card {
            will-change: transform, opacity;
            backface-visibility: hidden;
            transform-style: preserve-3d;
        }

        /* Prevent layout shifts during animation */
        .step-card {
            position: relative;
        }

        /* Counter Value - Prevent Layout Shifts */
        .counter-value {
            display: inline-block;
            min-width: 2.5ch;
            text-align: left;
            font-variant-numeric: tabular-nums;
            font-feature-settings: "tnum";
            will-change: contents;
        }

        /* Metric Number Container */
        .metric-number {
            will-change: transform, opacity;
        }

        /* Resume Upload Animations */
        #uploadLabel,
        #loadingSection,
        #resultsSection {
            transition: opacity 0.4s ease-in-out, transform 0.4s ease-in-out;
        }

        #uploadLabel.fade-out {
            opacity: 0;
            transform: translateY(-10px);
            pointer-events: none;
        }

        #loadingSection.fade-in {
            opacity: 1;
            transform: translateY(0);
        }

        #loadingSection {
            opacity: 0;
            transform: translateY(10px);
        }

        #resultsSection.fade-in {
            opacity: 1;
            transform: translateY(0);
        }

        #resultsSection {
            opacity: 0;
            transform: translateY(20px);
        }

        /* Progress Bar Animation */
        @keyframes progress {
            0% {
                width: 0%;
            }

            50% {
                width: 70%;
            }

            100% {
                width: 100%;
            }
        }

        .animate-progress {
            animation: progress 2s ease-in-out infinite;
        }

        /* Skill Tags */
        .skill-tag {
            display: inline-block;
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(59, 130, 246, 0.2);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .skill-tag:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(59, 130, 246, 0.3);
        }

        /* List Items */
        .result-item {
            padding: 0.75rem 1rem;
            background: white;
            border-left: 3px solid;
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .result-item:hover {
            transform: translateX(4px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .strength-item {
            border-left-color: #10b981;
            background: linear-gradient(90deg, #f0fdf4 0%, white 10%);
        }

        .weakness-item {
            border-left-color: #f59e0b;
            background: linear-gradient(90deg, #fffbeb 0%, white 10%);
        }

        .suggestion-item {
            border-left-color: #3b82f6;
            background: linear-gradient(90deg, #eff6ff 0%, white 10%);
        }

        .result-item i {
            margin-right: 0.5rem;
            width: 1rem;
        }

        /* ============================================================
           ATS RESULTS CARD - Clean, Scrollable, No Overlap
           ============================================================ */
        #atsResultsWrapper {
            max-width: 420px;
            margin-left: auto;
            margin-right: auto;
            position: relative;
            /* Ensure wrapper doesn't constrain scrolling */
            height: auto;
            overflow: visible;
        }

        /* ============================================================
           ATS RESULTS CARD - Beautiful Design (Earlier Working Version)
           ============================================================ */
        #analysisContainer {
            width: 100%;
        }

        /* Upload box should expand with content */
        .resume-upload-box {
            min-height: 400px;
            height: auto;
            overflow: visible;
            margin-bottom: 0;
            /* Will be set dynamically when results show */
        }

        /* When results are shown, add margin to push problems section down */
        .resume-upload-box:has(#resultsContainer:not(.hidden)) {
            margin-bottom: 120px;
        }

        /* Hide machine animation when results are shown */
        .resume-upload-box:has(#resultsContainer:not(.hidden))~* .machine-wrapper,
        .resume-upload-box:has(#resultsContainer:not(.hidden))+* .machine-wrapper {
            display: none;
        }

        /* Hide left column machine and make grid single column when results show */
        #view-upload-resume .grid:has(#resultsContainer:not(.hidden))>div:first-child {
            display: none;
        }

        /* Make grid single column when results are visible */
        #view-upload-resume .grid:has(#resultsContainer:not(.hidden)) {
            grid-template-columns: 1fr;
        }

        /* Results container inside upload box */
        #resultsContainer {
            width: 100%;
            padding: 0;
            text-align: left;
        }

        /* When results container is visible, ensure left alignment */
        #resultsContainer:not(.hidden) {
            text-align: left;
        }

        /* Problems Section - Normal Document Flow, After ATS Box */
        #problemsSection {
            position: relative !important;
            /* NO fixed, NO absolute */
            margin-top: 80px !important;
            margin-bottom: 80px !important;
            width: 100% !important;
            display: block !important;
            z-index: 1;
            clear: both;
            padding: 60px 24px;
        }

        /* Problems Wrapper - Centered Layout */
        .problems-wrapper {
            position: relative;
            min-height: 600px;
            width: 100%;
            max-width: 1120px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Problems Heading - Centered */
        .problems-heading {
            font-size: clamp(32px, 4vw, 56px);
            font-weight: 700;
            color: #111;
            text-align: center;
            margin: 0 auto;
            line-height: 1.1;
            position: relative;
            z-index: 2;
            max-width: 800px;
        }

        /* Problem Bubbles - Positioned Around Heading */
        .problem-bubble {
            position: absolute;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }

        .problem-bubble.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* Position each bubble around heading */
        .problem-bubble-1 {
            top: 20px;
            left: 20px;
        }

        .problem-bubble-2 {
            top: 20px;
            right: 20px;
        }

        .problem-bubble-3 {
            bottom: 20px;
            left: 20px;
        }

        .problem-bubble-4 {
            bottom: 20px;
            right: 20px;
        }

        /* Responsive - Stack bubbles on mobile */
        @media (max-width: 768px) {
            .problems-wrapper {
                min-height: auto;
                flex-direction: column;
                padding: 40px 20px;
            }

            .problem-bubble {
                position: relative;
                top: auto;
                bottom: auto;
                left: auto;
                right: auto;
                margin: 16px 0;
            }
        }

        /* Glassmorphism Results Card */
        .ats-results-card {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            padding: 32px;
            max-height: none;
            overflow-y: visible;
            overflow-x: hidden;
            position: relative;
            display: block;
            box-sizing: border-box;
            width: 100%;
        }

        /* Scan Animation Container */
        #scanAnimation {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 60px 20px;
            text-align: center;
        }

        #scanAnimation img {
            width: 160px;
            height: 160px;
            animation: pulse 2s ease-in-out infinite;
        }

        #scanAnimation p {
            margin-top: 20px;
            font-size: 18px;
            font-weight: 600;
            color: #1e293b;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.7;
            }
        }

        /* Main Score Section */
        .ats-results-card .ats-header {
            position: relative;
            background: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .ats-results-card .ats-score-container {
            display: flex;
            align-items: baseline;
            justify-content: space-between;
            margin-bottom: 24px;
        }

        .ats-results-card .ats-score-number {
            font-size: 56px;
            font-weight: 800;
            line-height: 1;
            color: #1e293b;
        }

        .ats-results-card .ats-score-divider {
            font-size: 40px;
            font-weight: 600;
            color: #64748b;
            margin: 0 4px;
        }

        .ats-results-card .ats-score-badge {
            padding: 8px 16px;
            border-radius: 999px;
            font-size: 14px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .ats-results-card .ats-score-badge.excellent {
            background: #dcfce7;
            color: #166534;
        }

        .ats-results-card .ats-score-badge.good {
            background: #fef3c7;
            color: #92400e;
        }

        .ats-results-card .ats-score-badge.needs-work {
            background: #fee2e2;
            color: #991b1b;
        }

        /* Sub-Scores Section */
        .ats-sub-scores {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-top: 20px;
        }

        .ats-sub-score-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .ats-sub-score-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .ats-sub-score-title {
            font-size: 14px;
            font-weight: 600;
            color: #1e293b;
        }

        .ats-sub-score-value {
            font-size: 14px;
            font-weight: 700;
            color: #475569;
        }

        .ats-sub-score-bar-container {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 999px;
            overflow: hidden;
            position: relative;
        }

        .ats-sub-score-bar {
            height: 100%;
            border-radius: 999px;
            transition: width 0.6s ease-out;
        }

        .ats-sub-score-bar.excellent {
            background: linear-gradient(90deg, #10b981, #059669);
        }

        .ats-sub-score-bar.good {
            background: linear-gradient(90deg, #f59e0b, #d97706);
        }

        .ats-sub-score-bar.needs-work {
            background: linear-gradient(90deg, #ef4444, #dc2626);
        }

        /* Section Styling - Rounded White Cards */
        .ats-results-card .ats-section {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 20px 24px;
            margin-bottom: 16px;
            border: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .ats-results-card .ats-section:last-child {
            margin-bottom: 0;
        }

        .ats-results-card .ats-section-title {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 16px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(226, 232, 240, 0.8);
        }

        .ats-results-card .ats-section-title i {
            font-size: 20px;
            color: #3b82f6;
        }

        .ats-results-card .ats-section-title.summary i {
            color: #3b82f6;
        }

        .ats-results-card .ats-section-title.experience i {
            color: #3b82f6;
        }

        .ats-results-card .ats-section-title.education i {
            color: #3b82f6;
        }

        .ats-results-card .ats-section-title.strengths i {
            color: #10b981;
        }

        .ats-results-card .ats-section-title.weaknesses i {
            color: #f59e0b;
        }

        .ats-results-card .ats-section-title.suggestions i {
            color: #3b82f6;
        }

        .ats-results-card .ats-section-content {
            color: #475569;
            font-size: 14px;
            line-height: 1.7;
            margin-top: 8px;
        }

        /* Skills Chips */
        .ats-results-card .skill-chip {
            display: inline-block;
            padding: 6px 14px;
            border-radius: 999px;
            background: #eff6ff;
            color: #1d4ed8;
            font-size: 13px;
            font-weight: 500;
            margin: 4px 6px 4px 0;
        }

        /* Bullet Lists with Icons */
        .ats-results-card .ats-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .ats-results-card .ats-list-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-bottom: 10px;
            padding-left: 0;
        }

        .ats-results-card .ats-list-item i {
            margin-top: 4px;
            flex-shrink: 0;
        }

        .ats-results-card .ats-list-item.strength i {
            color: #10b981;
        }

        .ats-results-card .ats-list-item.weakness i {
            color: #f59e0b;
        }

        .ats-results-card .ats-list-item.suggestion i {
            color: #3b82f6;
        }

        /* Scrollbar Styling */
        .ats-results-card::-webkit-scrollbar {
            width: 6px;
        }

        .ats-results-card::-webkit-scrollbar-track {
            background: transparent;
        }

        .ats-results-card::-webkit-scrollbar-thumb {
            background: #c9ced8;
            border-radius: 8px;
        }

        .ats-results-card::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        /* ATS Results Container - Scrollable */
        #atsResultsWrapper #atsResults,
        #atsResults {
            background: #ffffff;
            border-radius: 24px;
            box-shadow: 0 18px 45px rgba(15, 23, 42, 0.08);
            padding: 20px 10px 20px 24px;
            /* top right bottom left - extra right padding for scrollbar */
            max-height: 520px;
            /* Fixed max height - enables scrolling when content exceeds */
            overflow-y: auto;
            /* Enable vertical scroll - CRITICAL for scrolling */
            overflow-x: hidden;
            /* Prevent horizontal scroll */
            scrollbar-width: thin;
            /* slim scrollbar (Firefox) */
            scrollbar-color: #c9ced8 transparent;
            /* Firefox scrollbar color */
            border: 1px solid rgba(148, 163, 184, 0.3);
            position: relative;
            display: block;
            /* Ensure it's a block element */
            box-sizing: border-box;
            /* Include padding in height calculation */
            width: 100%;
            /* Full width of wrapper */
            /* Ensure smooth scrolling */
            -webkit-overflow-scrolling: touch;
            /* Force scrolling behavior */
            will-change: scroll-position;
        }

        /* Score row */
        #atsResults .ats-score-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        #atsResults .ats-score-value {
            font-size: 32px;
            font-weight: 800;
        }

        #atsResults .ats-score-badge {
            padding: 4px 10px;
            border-radius: 999px;
            font-size: 12px;
            font-weight: 600;
        }

        /* Sections (Summary, Skills, Strengths, etc.) */
        #atsResults .ats-section {
            margin-bottom: 16px;
        }

        #atsResults .ats-section-title {
            font-weight: 700;
            font-size: 14px;
            margin-top: 16px;
            margin-bottom: 6px;
            color: #1e293b;
        }

        #atsResults ul {
            padding-left: 18px;
            margin-bottom: 4px;
        }

        #atsResults li {
            margin-bottom: 4px;
            font-size: 13px;
            color: #475569;
        }

        /* Small skills chips */
        #atsResults .skill-chip {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 999px;
            background: #eff6ff;
            color: #1d4ed8;
            font-size: 12px;
            margin: 2px 4px 4px 0;
            font-weight: 500;
        }

        /* Scrollbar styling for results */
        #atsResults::-webkit-scrollbar {
            width: 6px;
            /* slim scrollbar (Chrome/Edge) */
        }

        #atsResults::-webkit-scrollbar-track {
            background: transparent;
        }

        #atsResults::-webkit-scrollbar-thumb {
            background: #c9ced8;
            /* scrollbar thumb color */
            border-radius: 8px;
            /* rounded corners */
        }

        #atsResults::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
            /* darker on hover */
        }

        /* Build Resume Styles */
        /* Preview wrapper - centers the A4 sheet */
        #preview-wrapper {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            overflow: auto;
            padding: 20px 0;
            height: 100%;
            min-height: 600px;
        }

        /* Resume preview - always A4 size */
        #resume-preview {
            width: 794px;
            /* A4 width */
            height: 1123px;
            /* A4 height */
            background: white;
            transform-origin: top center;
            box-sizing: border-box;
            padding: 32px;
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
        }

        .resume-preview {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            background: white;
        }

        /* Right column preview container */
        .sticky.top-24>div {
            max-width: 100%;
            overflow: hidden;
        }

        #build-resume-import-screen {
            padding: 40px 20px;
        }

        #pdf-dropzone {
            transition: all 0.3s ease;
        }

        #pdf-dropzone:hover {
            background: #f8fafc;
        }

        #zoom-slider {
            accent-color: #3b82f6;
        }

        /* Find Jobs City Selection Styles */
        .city-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1.5rem;
            background: white;
            border-radius: 1rem;
            border: 1px solid #e2e8f0;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .city-card:hover {
            transform: translateY(-4px) scale(1.05);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
            border-color: #3b82f6;
        }

        .city-card.city-selected {
            transform: translateY(-4px) scale(1.05);
            border-color: #3b82f6;
            background: #eff6ff;
        }

        .city-card img,
        .city-card svg {
            width: 64px;
            height: 64px;
            object-fit: contain;
            margin-bottom: 0.75rem;
            transition: transform 0.3s ease;
        }

        .city-card:hover img,
        .city-card:hover svg {
            transform: scale(1.1);
        }

        .city-card .city-name {
            font-size: 0.875rem;
            font-weight: 600;
            color: #1e293b;
            margin-top: 0.5rem;
        }

        /* Dashboard Section Visibility */
        .dashboard-section {
            display: none;
        }

        .dashboard-section.active {
            display: block;
        }
    </style>
</head>

<body class="bg-[#F8FAFC] text-slate-800 antialiased overflow-x-hidden selection:bg-blue-100 selection:text-blue-900">
    <div id="wrapper">
        <div id="content">

            <!-- PRELOADER -->
            <div id="preloader" class="fixed inset-0 z-[100] flex items-center justify-center backdrop-blur-3xl">
                <div class="overflow-hidden">
                    <h1 id="preloader-text" class="text-6xl md:text-8xl font-display font-bold text-slate-900 flex">
                        <span class="preloader-char opacity-0 translate-y-10 blur-sm inline-block">J</span>
                        <span class="preloader-char opacity-0 translate-y-10 blur-sm inline-block">o</span>
                        <span class="preloader-char opacity-0 translate-y-10 blur-sm inline-block">b</span>
                        <span class="preloader-char opacity-0 translate-y-10 blur-sm inline-block">C</span>
                        <span class="preloader-char opacity-0 translate-y-10 blur-sm inline-block">l</span>
                        <span class="preloader-char opacity-0 translate-y-10 blur-sm inline-block">u</span>
                        <span class="preloader-char opacity-0 translate-y-10 blur-sm inline-block">s</span>
                        <span class="preloader-char opacity-0 translate-y-10 blur-sm inline-block">t</span>
                        <span class="preloader-char opacity-0 translate-y-10 blur-sm inline-block">e</span>
                        <span class="preloader-char opacity-0 translate-y-10 blur-sm inline-block">r</span>
                    </h1>
                </div>
            </div>

            <!-- BACKGROUND VIDEO -->
            <div id="bg-video-wrapper" aria-hidden="true"
                style="position:fixed; inset:0; z-index:-1; overflow:hidden; pointer-events:none; background: #f5f5f7;">
                <video id="bg-wave" autoplay loop muted playsinline preload="auto"
                    poster="/assets/posters/dashboard-poster.jpg"
                    style="width:100%; height:100%; object-fit:cover; opacity: 0.6; mix-blend-mode: multiply;">
                    <source src="../../../public/videos/calisto-bg.mp4" type="video/mp4">
                </video>
                <!-- Soft gray-to-white gradient overlay to match Calisto's specific tone -->
                <div class="bg-overlay"
                    style="position:absolute; inset:0; background: linear-gradient(to bottom, rgba(245,245,247,0.8) 0%, rgba(255,255,255,0.4) 50%, rgba(255,255,255,0.9) 100%);">
                </div>
            </div>

            <!-- Navigation -->
            <nav class="fixed top-0 left-0 right-0 z-50 px-6 py-6 transition-all duration-300 opacity-0" id="navbar">
                <div class="max-w-7xl mx-auto flex justify-between items-center">
                    <!-- Logo - Calisto Style (Pill) -->
                    <a href="../index.html" class="cursor-pointer logo-link">
                        <img src="../../../public/images/logo.png" alt="Job Cluster" class="logo-text">
                    </a>

                    <!-- Links - Minimal & Centered -->
                    <div class="hidden md:flex items-center gap-10 absolute left-1/2 transform -translate-x-1/2">
                        <a href="#" id="nav-dashboard"
                            class="text-[15px] font-medium text-slate-500 hover:text-slate-900 transition-colors">Dashboard</a>
                        <a href="#" id="nav-problems"
                            class="text-[15px] font-medium text-slate-500 hover:text-slate-900 transition-colors">Problems</a>
                        <a href="#" id="nav-features"
                            class="text-[15px] font-medium text-slate-500 hover:text-slate-900 transition-colors">Features</a>
                        <a href="#" id="nav-pricing"
                            class="text-[15px] font-medium text-slate-500 hover:text-slate-900 transition-colors">Pricing</a>
                    </div>

                    <!-- CTA Button - Auth UI -->
                    <div class="flex items-center gap-4">
                        <div class="auth-ui-container" data-signup-url="../signup.html" data-profile-url="#view-profile"
                            data-button-class="bg-black text-white px-6 py-2.5 rounded-full text-[15px] font-semibold shadow-md hover:shadow-lg transition-all hover:-translate-y-0.5">
                        </div>
                    </div>
                </div>
            </nav>

            <!-- Main Content -->
            <main class="relative z-10 pt-32 pb-20 px-4 sm:px-6">

                <!-- Hero Heading -->
                <div class="max-w-5xl mx-auto text-center mb-24 hero-section pt-10">
                    <h1
                        class="font-sans text-6xl md:text-[5.5rem] tracking-[-0.04em] text-[#333333] font-medium leading-[1.05] mb-8 hero-title opacity-0 translate-y-10">
                        Your Smart Way to Get
                        <span class="text-[#3b82f6]"> Hired Faster</span>
                    </h1>
                    <p
                        class="text-lg md:text-xl text-slate-500 max-w-2xl mx-auto hero-subtitle opacity-0 translate-y-10 font-medium">
                        AI-powered job recommendations, ATS resume scoring, and real-time application tracking all in
                        one place.
                    </p>

                    <!-- Circular Get Started Button -->
                    <div class="mt-16 flex justify-center hero-btn opacity-0 translate-y-10">
                        <a href="../signup.html"
                            class="sphere-btn w-32 h-32 rounded-full text-white font-bold text-lg flex items-center justify-center">
                            <span class="relative z-10">Get Started</span>
                        </a>
                    </div>

                    <!-- Scroll Down Arrow -->
                    <div class="mt-16 animate-bounce text-blue-500 text-2xl">
                        <i class="fa-solid fa-angles-down"></i>
                    </div>
                </div>

            </main>

        </div>



        <!-- Dashboard Wrapper -->
        <div class="dashboard-perspective">
            <div class="max-w-[1400px] mx-auto dashboard-container" id="dashboard-section">
                <!-- Dashboard Heading -->
                <div class="text-center mb-12">
                    <h2 class="font-display text-2xl md:text-3xl font-bold text-slate-800">
                        Your AI-powered job dashboard designed to help you get hired faster.
                    </h2>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-[280px_1fr] gap-8 items-start">

                    <!-- Sidebar -->
                    <aside
                        class="bg-white/80 backdrop-blur-md border border-slate-200/60 rounded-3xl p-6 shadow-xl shadow-slate-200/50 sticky top-24">
                        <div class="flex items-center gap-3 mb-8 px-2">
                            <div id="profile-avatar"
                                class="w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold shadow-lg shadow-blue-500/30">
                                <img id="profile-avatar-img" src="" alt="avatar" referrerPolicy="no-referrer"
                                    style="display:none; width:100%; height:100%; border-radius:inherit; object-fit:cover;">
                                <i class="fa-solid fa-user"></i>
                            </div>
                            <div>
                                <p id="profile-name" class="font-bold text-slate-900 text-sm">Loading...</p>
                                <p id="profile-email" class="text-xs text-slate-500"></p>
                            </div>
                        </div>

                        <div class="space-y-8">
                            <div>
                                <p class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 px-2">General
                                </p>
                                <nav class="space-y-1">
                                    <a href="#" id="nav-upload-resume"
                                        class="flex items-center gap-3 px-3 py-2.5 rounded-xl bg-blue-50 text-blue-700 font-medium transition-all">
                                        <i class="fa-solid fa-cloud-arrow-up w-5"></i>
                                        Upload Resume
                                    </a>
                                    <a href="#" id="nav-build-resume"
                                        class="flex items-center gap-3 px-3 py-2.5 rounded-xl text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-all">
                                        <i class="fa-solid fa-file-lines w-5"></i>
                                        Build Resume
                                    </a>
                                    <a href="#" id="nav-inbox"
                                        class="flex items-center gap-3 px-3 py-2.5 rounded-xl text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-all">
                                        <i class="fa-solid fa-inbox w-5"></i>
                                        Inbox
                                        <span
                                            class="ml-auto bg-red-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full">15</span>
                                    </a>
                                    <a href="#" id="nav-find-jobs"
                                        class="flex items-center gap-3 px-3 py-2.5 rounded-xl text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-all">
                                        <i class="fa-solid fa-magnifying-glass w-5"></i>
                                        Find Jobs
                                    </a>
                                    <a href="#view-saved-jobs" id="savedJobsMenu"
                                        class="flex items-center gap-3 px-3 py-2.5 rounded-xl text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-all">
                                        <i class="fa-solid fa-heart w-5"></i>
                                        Saved Jobs
                                    </a>
                                    <a href="#" id="nav-resume-history"
                                        class="flex items-center gap-3 px-3 py-2.5 rounded-xl text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-all">
                                        <i class="fa-solid fa-clock-rotate-left w-5"></i>
                                        Resume History
                                    </a>

                                </nav>
                            </div>

                            <div>
                                <p class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 px-2">
                                    Workspaces
                                </p>
                                <nav class="space-y-1">
                                    <a href="#" id="nav-profile"
                                        class="flex items-center gap-3 px-3 py-2.5 rounded-xl text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-all">
                                        <i class="fa-solid fa-user w-5"></i>
                                        My profile
                                    </a>

                                </nav>
                            </div>
                        </div>
                    </aside>

                    <!-- Main Dashboard Content -->
                    <div class="space-y-6">
                        <!-- Resume Checker Content -->
                        <div id="section-upload-resume" class="dashboard-section">
                            <div id="view-upload-resume"
                                class="bg-white/80 backdrop-blur-md border border-slate-200/60 rounded-3xl p-8 shadow-xl shadow-slate-200/50">
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">

                                    <!-- Left Column: Animated Machine -->
                                    <div class="relative flex justify-center lg:justify-start order-2 lg:order-1">
                                        <div class="machine-wrapper relative w-full max-w-[500px] h-[400px]">

                                            <!-- Resume Document (Behind) -->
                                            <div
                                                class="resume-doc absolute top-10 right-0 w-[240px] h-[320px] bg-white rounded-lg shadow-md border border-slate-200 z-0 transform rotate-6 origin-bottom-right overflow-hidden">
                                                <img src="https://marketplace.canva.com/EAFRuCp3DcY/1/0/1131w/canva-black-white-minimalist-cv-resume-f5JNR-K5jjw.jpg"
                                                    alt="Resume Preview" class="w-full h-full object-cover opacity-80">
                                            </div>

                                            <!-- The Machine (Front) -->
                                            <div
                                                class="machine-body absolute bottom-0 left-0 w-[200px] h-[380px] bg-[#1e293b] rounded-2xl shadow-2xl border border-slate-700 z-10 flex flex-col items-center p-6 overflow-hidden">
                                                <!-- Top Light -->
                                                <div class="w-full flex justify-center mb-6">
                                                    <div class="w-16 h-2 bg-slate-800 rounded-full overflow-hidden">
                                                        <div class="scan-light w-full h-full bg-blue-500 opacity-50">
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Gauge -->
                                                <div
                                                    class="gauge-container relative w-32 h-16 bg-slate-800 rounded-t-full overflow-hidden mb-6 border-b-2 border-slate-600">
                                                    <div class="absolute bottom-0 left-1/2 -translate-x-1/2 w-2 h-14 bg-red-500 origin-bottom rounded-full gauge-needle"
                                                        style="transform: translateX(-50%) rotate(-45deg);"></div>
                                                </div>

                                                <!-- Waveform Screen -->
                                                <div
                                                    class="w-full h-16 bg-black rounded-lg border border-slate-600 mb-6 relative overflow-hidden flex items-center justify-center">
                                                    <div
                                                        class="waveform-line w-full h-1 bg-green-500 shadow-[0_0_10px_#22c55e]">
                                                    </div>
                                                </div>

                                                <!-- Status Dots -->
                                                <div class="flex gap-3 mt-auto">
                                                    <div class="status-dot w-3 h-3 rounded-full bg-slate-600"></div>
                                                    <div class="status-dot w-3 h-3 rounded-full bg-slate-600"></div>
                                                    <div class="status-dot w-3 h-3 rounded-full bg-slate-600"></div>
                                                </div>
                                            </div>

                                            <!-- Connector Arm -->
                                            <div
                                                class="absolute bottom-[100px] left-[180px] w-[60px] h-[20px] bg-slate-700 z-0">
                                            </div>

                                            <!-- Scanner Overlay on Resume -->
                                            <div class="scanner-beam absolute top-10 right-0 w-[240px] h-2 bg-blue-500/50 shadow-[0_0_15px_#3b82f6] z-20 blur-sm transform rotate-6 origin-bottom-right"
                                                style="display: none;"></div>

                                        </div>
                                    </div>

                                    <!-- Right Column: Text & Upload -->
                                    <div class="text-left order-1 lg:order-2">
                                        <h2
                                            class="resume-heading text-4xl md:text-5xl font-display font-bold text-slate-900 mb-6 tracking-tight opacity-0 translate-y-10">
                                            Is your resume<br>job-ready?
                                        </h2>
                                        <p
                                            class="resume-subheading text-lg text-slate-600 mb-10 max-w-lg opacity-0 translate-x-10 leading-relaxed">
                                            Our AI instantly checks your resume for clarity, job-fit, ATS optimization,
                                            and
                                            skill gaps ‚Äî
                                            helping you secure interviews faster.
                                        </p>

                                        <!-- Upload Box -->
                                        <div
                                            class="resume-upload-box border-2 border-dashed border-slate-300 rounded-3xl p-10 text-center transition-all hover:border-blue-500 hover:bg-blue-50/50 group cursor-pointer relative overflow-hidden min-h-[400px]">
                                            <input type="file" id="resumeUpload" name="resume"
                                                accept=".pdf,.docx,.doc,.txt,.jpg,.jpeg,.png"
                                                class="absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"
                                                onclick="event.stopPropagation();"
                                                onchange="event.preventDefault(); event.stopPropagation(); if(typeof handleFileSelect === 'function') handleFileSelect(event);">

                                            <!-- Upload Label Section -->
                                            <div id="uploadLabel" class="relative z-0 pointer-events-none">
                                                <div
                                                    class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300">
                                                    <i class="fa-solid fa-cloud-arrow-up text-3xl text-blue-600"></i>
                                                </div>
                                                <h3 class="text-xl font-bold text-slate-900 mb-2">Click to Upload Resume
                                                </h3>
                                                <p class="text-slate-500 mb-6">PDF, DOCX, TXT, JPG, or PNG (Max 5MB)</p>
                                                <!-- File selector button - shows selected filename -->
                                                <button type="button" id="uploadResumeBtn"
                                                    class="resume-scan-btn px-8 py-3 bg-slate-900 text-white rounded-xl font-bold hover:bg-blue-600 transition-all shadow-lg shadow-blue-500/30 flex items-center gap-2 mx-auto pointer-events-auto"
                                                    onclick="event.preventDefault(); event.stopPropagation(); document.getElementById('resumeUpload').click(); return false;">
                                                    <i class="fa-solid fa-cloud-arrow-up"></i>
                                                    <span>Choose Resume File</span>
                                                </button>

                                                <!-- Selected file info -->
                                                <p id="selectedFileName"
                                                    class="hidden mt-3 text-sm text-slate-600 font-medium">
                                                    <i class="fa-solid fa-file-pdf text-red-500 mr-1"></i>
                                                    <span id="fileNameText"></span>
                                                </p>

                                                <a id="view-resume-btn" href="#" target="_blank"
                                                    class="hidden mt-4 inline-block px-6 py-2 bg-green-500 text-white rounded-lg font-bold hover:bg-green-600 transition-all">
                                                    <i class="fa-solid fa-eye mr-2"></i> View Resume
                                                </a>
                                            </div>

                                            <!-- Loading Section -->
                                            <div id="loadingSection"
                                                class="hidden absolute inset-0 flex flex-col items-center justify-center bg-white/95 backdrop-blur-sm rounded-3xl z-20">
                                                <div class="loading-animation text-center">
                                                    <!-- AI Brain Animation -->
                                                    <div class="relative mb-6">
                                                        <div
                                                            class="w-20 h-20 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center mx-auto animate-pulse">
                                                            <i class="fa-solid fa-brain text-3xl text-white"></i>
                                                        </div>
                                                        <div
                                                            class="absolute -top-1 -right-1 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center animate-bounce">
                                                            <i class="fa-solid fa-sparkles text-xs text-white"></i>
                                                        </div>
                                                    </div>

                                                    <!-- Bouncing dots -->
                                                    <div class="flex justify-center gap-2 mb-4">
                                                        <span
                                                            class="dot w-3 h-3 bg-blue-600 rounded-full animate-bounce"
                                                            style="animation-delay: 0s;"></span>
                                                        <span
                                                            class="dot w-3 h-3 bg-indigo-600 rounded-full animate-bounce"
                                                            style="animation-delay: 0.2s;"></span>
                                                        <span
                                                            class="dot w-3 h-3 bg-purple-600 rounded-full animate-bounce"
                                                            style="animation-delay: 0.4s;"></span>
                                                    </div>

                                                    <!-- Status text (updated dynamically) -->
                                                    <p id="analysisStatus" class="text-slate-700 font-medium mb-2">
                                                        Analyzing your resume...</p>
                                                    <p class="text-slate-500 text-sm">100% Local Analysis - No External
                                                        AI</p>
                                                </div>
                                            </div>

                                            <!-- Results Container (inside upload box) -->
                                            <div id="resultsContainer" class="hidden w-full text-left relative z-30">
                                            </div>

                                            <!-- Legacy Results Sections (hidden, kept for compatibility) -->
                                            <div id="atsResultsWrapper" class="hidden mt-6">
                                                <div id="atsResults" class="w-full text-left"></div>
                                            </div>
                                            <div id="resultsSection" class="hidden w-full text-left">
                                                <!-- ATS Score Header -->
                                                <div class="mb-6 pb-6 border-b border-slate-200">
                                                    <div class="flex items-center justify-between mb-4">
                                                        <h3 class="text-2xl font-bold text-slate-900">Resume Analysis
                                                            Results</h3>
                                                        <button id="resetUpload"
                                                            class="text-sm text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1">
                                                            <i class="fa-solid fa-arrow-left"></i> Upload Another
                                                        </button>
                                                    </div>
                                                    <div class="flex items-baseline gap-3">
                                                        <span class="text-5xl font-display font-bold text-blue-600"
                                                            id="atsScoreDisplay">--</span>
                                                        <span class="text-xl text-slate-500">/ 100</span>
                                                        <span
                                                            class="ml-4 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-semibold"
                                                            id="atsScoreLabel">ATS Score</span>
                                                    </div>
                                                </div>

                                                <!-- Summary -->
                                                <div class="mb-6">
                                                    <h4
                                                        class="text-lg font-bold text-slate-900 mb-3 flex items-center gap-2">
                                                        <i class="fa-solid fa-file-lines text-blue-600"></i>
                                                        Summary
                                                    </h4>
                                                    <p id="summaryDisplay"
                                                        class="text-slate-700 leading-relaxed bg-slate-50 rounded-xl p-4 border border-slate-200">
                                                    </p>
                                                </div>

                                                <!-- Experience -->
                                                <div class="mb-6">
                                                    <h4
                                                        class="text-lg font-bold text-slate-900 mb-3 flex items-center gap-2">
                                                        <i class="fa-solid fa-briefcase text-blue-600"></i>
                                                        Experience
                                                    </h4>
                                                    <p id="experienceDisplay"
                                                        class="text-slate-700 leading-relaxed bg-slate-50 rounded-xl p-4 border border-slate-200">
                                                    </p>
                                                </div>

                                                <!-- Skills -->
                                                <div class="mb-6">
                                                    <h4
                                                        class="text-lg font-bold text-slate-900 mb-3 flex items-center gap-2">
                                                        <i class="fa-solid fa-code text-blue-600"></i>
                                                        Skills
                                                    </h4>
                                                    <div id="skillsDisplay" class="flex flex-wrap gap-2"></div>
                                                </div>

                                                <!-- Strengths -->
                                                <div class="mb-6">
                                                    <h4
                                                        class="text-lg font-bold text-green-700 mb-3 flex items-center gap-2">
                                                        <i class="fa-solid fa-check-circle text-green-600"></i>
                                                        Strengths
                                                    </h4>
                                                    <ul id="strengthsDisplay" class="space-y-2"></ul>
                                                </div>

                                                <!-- Weaknesses -->
                                                <div class="mb-6">
                                                    <h4
                                                        class="text-lg font-bold text-amber-700 mb-3 flex items-center gap-2">
                                                        <i class="fa-solid fa-exclamation-triangle text-amber-600"></i>
                                                        Weaknesses
                                                    </h4>
                                                    <ul id="weaknessesDisplay" class="space-y-2"></ul>
                                                </div>

                                                <!-- Suggestions -->
                                                <div class="mb-6">
                                                    <h4
                                                        class="text-lg font-bold text-blue-700 mb-3 flex items-center gap-2">
                                                        <i class="fa-solid fa-lightbulb text-blue-600"></i>
                                                        Suggestions
                                                    </h4>
                                                    <ul id="suggestionsDisplay" class="space-y-2"></ul>
                                                </div>

                                                <!-- Education -->
                                                <div class="mb-6">
                                                    <h4
                                                        class="text-lg font-bold text-slate-900 mb-3 flex items-center gap-2">
                                                        <i class="fa-solid fa-graduation-cap text-blue-600"></i>
                                                        Education
                                                    </h4>
                                                    <p id="educationDisplay"
                                                        class="text-slate-700 leading-relaxed bg-slate-50 rounded-xl p-4 border border-slate-200">
                                                    </p>
                                                </div>

                                                <!-- ATS Details Breakdown -->
                                                <div id="atsDetailsSection" class="mb-6 hidden">
                                                    <h4
                                                        class="text-lg font-bold text-slate-900 mb-4 flex items-center gap-2">
                                                        <i class="fa-solid fa-chart-bar text-blue-600"></i>
                                                        ATS Compatibility Breakdown
                                                    </h4>
                                                    <div class="grid grid-cols-2 gap-4">
                                                        <div class="bg-slate-50 rounded-xl p-4 border border-slate-200">
                                                            <div class="flex items-center justify-between mb-2">
                                                                <span
                                                                    class="text-sm font-medium text-slate-600">Formatting</span>
                                                                <span id="formatScore"
                                                                    class="text-lg font-bold text-blue-600">--</span>
                                                            </div>
                                                            <p id="formatFeedback" class="text-xs text-slate-500"></p>
                                                        </div>
                                                        <div class="bg-slate-50 rounded-xl p-4 border border-slate-200">
                                                            <div class="flex items-center justify-between mb-2">
                                                                <span
                                                                    class="text-sm font-medium text-slate-600">Keywords</span>
                                                                <span id="keywordScore"
                                                                    class="text-lg font-bold text-blue-600">--</span>
                                                            </div>
                                                            <p id="keywordFeedback" class="text-xs text-slate-500"></p>
                                                        </div>
                                                        <div class="bg-slate-50 rounded-xl p-4 border border-slate-200">
                                                            <div class="flex items-center justify-between mb-2">
                                                                <span
                                                                    class="text-sm font-medium text-slate-600">Structure</span>
                                                                <span id="structureScore"
                                                                    class="text-lg font-bold text-blue-600">--</span>
                                                            </div>
                                                            <p id="structureFeedback" class="text-xs text-slate-500">
                                                            </p>
                                                        </div>
                                                        <div class="bg-slate-50 rounded-xl p-4 border border-slate-200">
                                                            <div class="flex items-center justify-between mb-2">
                                                                <span
                                                                    class="text-sm font-medium text-slate-600">Content</span>
                                                                <span id="contentScore"
                                                                    class="text-lg font-bold text-blue-600">--</span>
                                                            </div>
                                                            <p id="contentFeedback" class="text-xs text-slate-500"></p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- üî• Start Analysis button - OUTSIDE the upload box (prevents file picker trigger) -->
                                        <button type="button" id="startAnalysisBtn"
                                            class="hidden mt-4 px-8 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-bold hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg shadow-blue-500/40 flex items-center gap-2 mx-auto animate-pulse">
                                            <i class="fa-solid fa-wand-magic-sparkles"></i>
                                            <span>Start Analysis</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Build Resume Section -->
                        <div id="section-build-resume" class="dashboard-section">
                            <div id="view-build-resume"
                                class="bg-white/80 backdrop-blur-md border border-slate-200/60 rounded-3xl p-8 shadow-xl shadow-slate-200/50">
                                <!-- Initial Import/Continue Screen -->
                                <div id="build-resume-import-screen" class="max-w-3xl mx-auto">
                                    <!-- Continue Section -->
                                    <div id="continue-section" class="text-center mb-8">
                                        <h2 class="text-lg font-semibold text-slate-900 mb-5">You have data saved in
                                            browser from prior session</h2>
                                        <button id="continue-btn"
                                            class="px-6 py-2.5 bg-blue-600 text-white rounded-full text-base font-semibold hover:bg-blue-700 transition-all">
                                            Continue where I left off
                                        </button>
                                    </div>

                                    <!-- Or Divider -->
                                    <div class="flex items-center pb-6 pt-4" aria-hidden="true">
                                        <div class="flex-grow border-t border-slate-200"></div>
                                        <span class="mx-2 text-lg text-slate-400">or</span>
                                        <div class="flex-grow border-t border-slate-200"></div>
                                    </div>

                                    <!-- Override Section -->
                                    <div class="text-center">
                                        <h2 class="font-semibold text-slate-900 mb-5">Override data with a new resume
                                        </h2>

                                        <!-- PDF Dropzone -->
                                        <div id="pdf-dropzone"
                                            class="flex justify-center rounded-md border-2 border-dashed border-slate-300 px-6 py-12 hover:border-blue-400 transition-colors cursor-pointer">
                                            <div class="text-center space-y-3">
                                                <div class="mx-auto w-14 h-14 text-slate-400">
                                                    <i class="fa-solid fa-file-pdf text-5xl"></i>
                                                </div>
                                                <p class="pt-3 text-lg font-semibold text-slate-700">Browse a pdf file
                                                    or drop it here</p>
                                                <p class="flex items-center justify-center text-sm text-slate-500">
                                                    <i class="fa-solid fa-lock mr-1 text-xs"></i>
                                                    File data is used locally and never leaves your browser
                                                </p>
                                                <div class="pt-4">
                                                    <label
                                                        class="cursor-pointer rounded-full bg-gradient-to-r from-purple-500 to-blue-500 px-6 pb-2.5 pt-2 font-semibold text-white shadow-sm hover:from-purple-600 hover:to-blue-600 transition-all">
                                                        Browse file
                                                        <input type="file" id="pdf-file-input" class="sr-only"
                                                            accept=".pdf" />
                                                    </label>
                                                </div>
                                                <div id="pdf-file-info" class="hidden pt-3">
                                                    <div class="flex items-center justify-center gap-3">
                                                        <span id="pdf-file-name"
                                                            class="font-semibold text-slate-900"></span>
                                                        <button id="remove-pdf-btn" type="button"
                                                            class="rounded-md p-1 text-slate-400 hover:bg-slate-100 hover:text-slate-500">
                                                            <i class="fa-solid fa-xmark h-5 w-5"></i>
                                                        </button>
                                                    </div>
                                                    <button id="import-pdf-btn"
                                                        class="mt-4 px-6 py-2 bg-blue-600 text-white rounded-full font-semibold hover:bg-blue-700 transition-all">
                                                        Import and Continue <i class="fa-solid fa-arrow-right ml-1"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Create from Scratch Button -->
                                        <div class="mt-8">
                                            <button id="create-from-scratch-btn"
                                                class="px-6 py-2.5 bg-slate-100 text-slate-900 rounded-full text-base font-semibold hover:bg-slate-200 transition-all">
                                                Create resume from scratch
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Full Builder View -->
                                <div id="build-resume-builder-view" class="hidden">
                                    <!-- Header -->
                                    <div class="mb-8">
                                        <h2 class="text-2xl font-bold text-slate-900 mb-2">Build a professional resume
                                        </h2>
                                        <p class="text-slate-600">Edit your details on the left and see a real-time
                                            preview on the right.</p>
                                    </div>

                                    <!-- Two Column Layout -->
                                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                        <!-- Left Column: Form -->
                                        <div class="space-y-6 max-h-[800px] overflow-y-auto pr-2">
                                            <!-- Profile Section -->
                                            <div class="bg-slate-50 rounded-2xl p-6">
                                                <h3 class="font-bold text-slate-900 mb-4 flex items-center gap-2">
                                                    <i class="fa-solid fa-user text-blue-600"></i>
                                                    Profile
                                                </h3>
                                                <div class="space-y-4">
                                                    <input type="text" id="resume-name" placeholder="Full Name"
                                                        class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                                    <input type="text" id="resume-title" placeholder="Job Title"
                                                        class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                                    <input type="email" id="resume-email" placeholder="Email"
                                                        class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                                    <input type="tel" id="resume-phone" placeholder="Phone"
                                                        class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                                    <input type="text" id="resume-location" placeholder="Location"
                                                        class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                                    <input type="url" id="resume-website" placeholder="Website/LinkedIn"
                                                        class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                                    <textarea id="resume-summary" placeholder="Professional Summary"
                                                        rows="3"
                                                        class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                                                </div>
                                            </div>

                                            <!-- Work Experience Section -->
                                            <div class="bg-slate-50 rounded-2xl p-6">
                                                <div class="flex items-center justify-between mb-4">
                                                    <h3 class="font-bold text-slate-900 flex items-center gap-2">
                                                        <i class="fa-solid fa-briefcase text-blue-600"></i>
                                                        Work Experience
                                                    </h3>
                                                    <button id="add-experience-btn"
                                                        class="text-sm text-blue-600 hover:text-blue-700 font-medium">
                                                        <i class="fa-solid fa-plus mr-1"></i> Add
                                                    </button>
                                                </div>
                                                <div id="experience-list" class="space-y-4">
                                                    <!-- Experience items will be added here -->
                                                </div>
                                            </div>

                                            <!-- Education Section -->
                                            <div class="bg-slate-50 rounded-2xl p-6">
                                                <div class="flex items-center justify-between mb-4">
                                                    <h3 class="font-bold text-slate-900 flex items-center gap-2">
                                                        <i class="fa-solid fa-graduation-cap text-blue-600"></i>
                                                        Education
                                                    </h3>
                                                    <button id="add-education-btn"
                                                        class="text-sm text-blue-600 hover:text-blue-700 font-medium">
                                                        <i class="fa-solid fa-plus mr-1"></i> Add
                                                    </button>
                                                </div>
                                                <div id="education-list" class="space-y-4">
                                                    <!-- Education items will be added here -->
                                                </div>
                                            </div>

                                            <!-- Projects Section -->
                                            <div class="bg-slate-50 rounded-2xl p-6">
                                                <div class="flex items-center justify-between mb-4">
                                                    <h3 class="font-bold text-slate-900 flex items-center gap-2">
                                                        <i class="fa-solid fa-folder-open text-blue-600"></i>
                                                        Projects
                                                    </h3>
                                                    <button id="add-project-btn"
                                                        class="text-sm text-blue-600 hover:text-blue-700 font-medium">
                                                        <i class="fa-solid fa-plus mr-1"></i> Add
                                                    </button>
                                                </div>
                                                <div id="project-list" class="space-y-4">
                                                    <!-- Project items will be added here -->
                                                </div>
                                            </div>

                                            <!-- Skills Section -->
                                            <div class="bg-slate-50 rounded-2xl p-6">
                                                <h3 class="font-bold text-slate-900 mb-4 flex items-center gap-2">
                                                    <i class="fa-solid fa-code text-blue-600"></i>
                                                    Skills
                                                </h3>
                                                <div id="skills-list" class="flex flex-wrap gap-2 mb-3">
                                                    <!-- Skills will be added here -->
                                                </div>
                                                <input type="text" id="add-skill-input"
                                                    placeholder="Type skill and press Enter"
                                                    class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                            </div>

                                            <!-- Resume Settings Section -->
                                            <div class="bg-slate-50 rounded-2xl p-6">
                                                <div class="flex items-center gap-2 mb-6">
                                                    <i class="fa-solid fa-gear text-slate-600"></i>
                                                    <h3 class="font-bold text-slate-900">Resume Setting</h3>
                                                </div>

                                                <!-- Theme Color -->
                                                <div class="mb-6">
                                                    <label class="block text-sm font-medium text-slate-700 mb-2">Theme
                                                        Color</label>
                                                    <input type="text" id="theme-color-input" value="#38bdf8"
                                                        class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2"
                                                        placeholder="#38bdf8">
                                                    <div class="flex flex-wrap gap-2">
                                                        <div class="theme-color-swatch w-10 h-10 rounded-md cursor-pointer flex items-center justify-center text-sm text-white"
                                                            style="background-color: #f87171;" data-color="#f87171">
                                                            <span class="checkmark hidden">‚úì</span>
                                                        </div>
                                                        <div class="theme-color-swatch w-10 h-10 rounded-md cursor-pointer flex items-center justify-center text-sm text-white"
                                                            style="background-color: #ef4444;" data-color="#ef4444">
                                                            <span class="checkmark hidden">‚úì</span>
                                                        </div>
                                                        <div class="theme-color-swatch w-10 h-10 rounded-md cursor-pointer flex items-center justify-center text-sm text-white"
                                                            style="background-color: #fb923c;" data-color="#fb923c">
                                                            <span class="checkmark hidden">‚úì</span>
                                                        </div>
                                                        <div class="theme-color-swatch w-10 h-10 rounded-md cursor-pointer flex items-center justify-center text-sm text-white"
                                                            style="background-color: #f97316;" data-color="#f97316">
                                                            <span class="checkmark hidden">‚úì</span>
                                                        </div>
                                                        <div class="theme-color-swatch w-10 h-10 rounded-md cursor-pointer flex items-center justify-center text-sm text-white"
                                                            style="background-color: #fbbf24;" data-color="#fbbf24">
                                                            <span class="checkmark hidden">‚úì</span>
                                                        </div>
                                                        <div class="theme-color-swatch w-10 h-10 rounded-md cursor-pointer flex items-center justify-center text-sm text-white"
                                                            style="background-color: #f59e0b;" data-color="#f59e0b">
                                                            <span class="checkmark hidden">‚úì</span>
                                                        </div>
                                                        <div class="theme-color-swatch w-10 h-10 rounded-md cursor-pointer flex items-center justify-center text-sm text-white"
                                                            style="background-color: #22c55e;" data-color="#22c55e">
                                                            <span class="checkmark hidden">‚úì</span>
                                                        </div>
                                                        <div class="theme-color-swatch w-10 h-10 rounded-md cursor-pointer flex items-center justify-center text-sm text-white"
                                                            style="background-color: #15803d;" data-color="#15803d">
                                                            <span class="checkmark hidden">‚úì</span>
                                                        </div>
                                                        <div class="theme-color-swatch w-10 h-10 rounded-md cursor-pointer flex items-center justify-center text-sm text-white"
                                                            style="background-color: #38bdf8;" data-color="#38bdf8">
                                                            <span class="checkmark hidden">‚úì</span>
                                                        </div>
                                                        <div class="theme-color-swatch w-10 h-10 rounded-md cursor-pointer flex items-center justify-center text-sm text-white"
                                                            style="background-color: #0ea5e9;" data-color="#0ea5e9">
                                                            <span class="checkmark hidden">‚úì</span>
                                                        </div>
                                                        <div class="theme-color-swatch w-10 h-10 rounded-md cursor-pointer flex items-center justify-center text-sm text-white"
                                                            style="background-color: #818cf8;" data-color="#818cf8">
                                                            <span class="checkmark hidden">‚úì</span>
                                                        </div>
                                                        <div class="theme-color-swatch w-10 h-10 rounded-md cursor-pointer flex items-center justify-center text-sm text-white"
                                                            style="background-color: #6366f1;" data-color="#6366f1">
                                                            <span class="checkmark hidden">‚úì</span>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Font Family -->
                                                <div class="mb-6">
                                                    <label class="block text-sm font-medium text-slate-700 mb-2">Font
                                                        Family</label>
                                                    <div class="flex flex-wrap gap-3" id="font-family-selections">
                                                        <!-- Font buttons will be added here -->
                                                    </div>
                                                </div>

                                                <!-- Font Size -->
                                                <div class="mb-6">
                                                    <label class="block text-sm font-medium text-slate-700 mb-2">Font
                                                        Size (pt)</label>
                                                    <input type="number" id="font-size-input" value="11" min="9"
                                                        max="14"
                                                        class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2">
                                                    <div class="flex flex-wrap gap-3" id="font-size-selections">
                                                        <!-- Font size buttons will be added here -->
                                                    </div>
                                                </div>

                                                <!-- Document Size -->
                                                <div class="mb-6">
                                                    <label
                                                        class="block text-sm font-medium text-slate-700 mb-2">Document
                                                        Size</label>
                                                    <div class="flex flex-wrap gap-3" id="document-size-selections">
                                                        <!-- Document size buttons will be added here -->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Right Column: Preview -->
                                        <div class="sticky top-24">
                                            <div
                                                class="bg-white rounded-2xl shadow-lg p-6 border border-slate-200 max-w-full overflow-hidden">
                                                <!-- Preview Controls -->
                                                <div
                                                    class="flex items-center justify-between mb-4 pb-4 border-b border-slate-200">
                                                    <span class="text-sm font-medium text-slate-600">Preview</span>
                                                    <div class="flex items-center gap-3">
                                                        <i class="fa-solid fa-magnifying-glass-minus text-slate-400 cursor-pointer"
                                                            id="zoom-out-btn"></i>
                                                        <span id="zoom-level"
                                                            class="text-sm font-medium text-slate-700 w-12 text-center">100%</span>
                                                        <i class="fa-solid fa-magnifying-glass-plus text-slate-400 cursor-pointer"
                                                            id="zoom-in-btn"></i>
                                                        <input type="range" id="zoom-slider" min="50" max="120"
                                                            value="100" class="w-20">
                                                    </div>
                                                </div>

                                                <!-- Resume Preview -->
                                                <div id="preview-wrapper">
                                                    <div id="resume-preview"
                                                        class="resume-preview bg-white border border-slate-200 rounded-lg">
                                                        <!-- Preview content will be rendered here -->
                                                    </div>
                                                </div>

                                                <!-- Download Button -->
                                                <button id="download-resume-btn"
                                                    class="w-full mt-4 px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition-all flex items-center justify-center gap-2">
                                                    <i class="fa-solid fa-download"></i>
                                                    <span>Download Resume (PDF)</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Find Jobs Section -->
                        <div id="section-find-jobs" class="dashboard-section">
                            <div id="view-find-jobs"
                                class="bg-white/80 backdrop-blur-md border border-slate-200/60 rounded-3xl p-8 shadow-xl shadow-slate-200/50">
                                <div class="max-w-4xl mx-auto">
                                    <!-- Page Title -->
                                    <h1
                                        class="text-3xl md:text-4xl font-display font-bold text-slate-900 mb-8 text-center">
                                        üåç Where do you want to work?
                                    </h1>

                                    <!-- Search Bar -->
                                    <div class="relative mb-6">
                                        <div
                                            class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                            <i class="fa-solid fa-magnifying-glass text-slate-400"></i>
                                        </div>
                                        <input type="text" id="city-search-input" placeholder="Search for your city"
                                            class="w-full pl-12 pr-4 py-4 bg-white/90 backdrop-blur-sm border-2 border-slate-200 rounded-2xl text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all" />
                                    </div>

                                    <!-- Detect Location Button -->
                                    <div class="text-center mb-8">
                                        <button id="detect-location-btn"
                                            class="inline-flex items-center gap-2 px-4 py-2 text-red-600 hover:text-red-700 font-medium transition-colors">
                                            <i class="fa-solid fa-location-crosshairs"></i>
                                            <span>Detect my location</span>
                                        </button>
                                    </div>

                                    <!-- Divider -->
                                    <div class="flex items-center mb-8" aria-hidden="true">
                                        <div class="flex-grow border-t border-slate-200"></div>
                                    </div>

                                    <!-- Popular Cities Heading -->
                                    <h2 class="text-2xl font-display font-bold text-slate-900 mb-6 text-center">
                                        Popular Cities
                                    </h2>

                                    <!-- Cities Grid -->
                                    <div id="cities-grid"
                                        class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-6 mb-8">
                                        <!-- Cities will be rendered here dynamically -->
                                    </div>

                                    <!-- View All Cities Link -->
                                    <div class="text-center">
                                        <a href="#" id="view-all-cities-link"
                                            class="inline-block text-red-600 hover:text-red-700 font-medium transition-colors">
                                            View All Cities
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Resume Analysis Results Panel -->
                        <div id="resumeResultPanel" style="display:none;"
                            class="bg-white/80 backdrop-blur-md border border-slate-200/60 rounded-3xl p-8 shadow-xl shadow-slate-200/50 mt-6">
                            <h3 class="font-display text-2xl font-bold text-slate-900 mb-6">
                                <i class="fa-solid fa-chart-line text-blue-600 mr-2"></i>
                                Resume Analysis Results
                            </h3>

                            <!-- Processing State -->
                            <div id="processingState" style="display:none;">
                                <div class="text-center py-12">
                                    <div
                                        class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse">
                                        <i class="fa-solid fa-spinner fa-spin text-3xl text-blue-600"></i>
                                    </div>
                                    <p class="text-lg font-medium text-slate-700 mb-2">‚è≥ Your resume is being
                                        analyzed...</p>
                                    <p class="text-sm text-slate-500">This usually takes 10-30 seconds. Please wait.</p>
                                    <div class="mt-6">
                                        <div class="w-32 h-2 bg-slate-200 rounded-full mx-auto overflow-hidden">
                                            <div class="h-full bg-blue-600 rounded-full animate-pulse"
                                                style="width: 60%;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Completed State -->
                            <div id="completedState" style="display:none;">
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">

                                    <!-- Left Column: ATS Score -->
                                    <div
                                        class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-8 border border-blue-100">
                                        <h4 class="text-lg font-bold text-slate-900 mb-6 flex items-center gap-2">
                                            <i class="fa-solid fa-gauge-high text-blue-600"></i>
                                            ATS Score
                                        </h4>
                                        <div class="text-center">
                                            <div id="atsScoreValue"
                                                class="text-7xl font-display font-bold text-blue-600 mb-4">--</div>
                                            <div class="flex items-center justify-center gap-2 text-sm text-slate-600">
                                                <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                                <span>Out of 100</span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Right Column: Skills Breakdown -->
                                    <div>
                                        <!-- Extracted Skills -->
                                        <div class="mb-6">
                                            <h4 class="text-lg font-bold text-slate-900 mb-4 flex items-center gap-2">
                                                <i class="fa-solid fa-check-circle text-green-600"></i>
                                                Extracted Skills
                                            </h4>
                                            <ul id="extractedSkillList" class="flex flex-wrap gap-2">
                                                <!-- Skills will be populated here -->
                                            </ul>
                                        </div>

                                        <!-- Missing Skills -->
                                        <div>
                                            <h4 class="text-lg font-bold text-slate-900 mb-4 flex items-center gap-2">
                                                <i class="fa-solid fa-exclamation-triangle text-amber-600"></i>
                                                Missing Skills
                                            </h4>
                                            <ul id="missingSkillList" class="flex flex-wrap gap-2">
                                                <!-- Missing skills will be populated here -->
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <!-- Scoring Breakdown -->
                                <div class="mt-8 pt-8 border-t border-slate-200">
                                    <h4 class="text-lg font-bold text-slate-900 mb-6">Score Breakdown</h4>
                                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                        <div class="bg-white rounded-xl p-4 border border-slate-200 text-center">
                                            <div id="skillScoreValue" class="text-2xl font-bold text-blue-600 mb-1">--
                                            </div>
                                            <div class="text-xs text-slate-500 font-medium">Skills (40)</div>
                                        </div>
                                        <div class="bg-white rounded-xl p-4 border border-slate-200 text-center">
                                            <div id="experienceScoreValue"
                                                class="text-2xl font-bold text-blue-600 mb-1">--</div>
                                            <div class="text-xs text-slate-500 font-medium">Experience (25)</div>
                                        </div>
                                        <div class="bg-white rounded-xl p-4 border border-slate-200 text-center">
                                            <div id="educationScoreValue" class="text-2xl font-bold text-blue-600 mb-1">
                                                --</div>
                                            <div class="text-xs text-slate-500 font-medium">Education (15)</div>
                                        </div>
                                        <div class="bg-white rounded-xl p-4 border border-slate-200 text-center">
                                            <div id="formatScoreValue" class="text-2xl font-bold text-blue-600 mb-1">--
                                            </div>
                                            <div class="text-xs text-slate-500 font-medium">Format (20)</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Messages Content (Hidden by default) -->
                        <div id="section-inbox" class="dashboard-section">
                            <div id="view-messages"
                                class="bg-white/80 backdrop-blur-md border border-slate-200/60 rounded-3xl p-8 shadow-xl shadow-slate-200/50 h-[600px] flex flex-col">
                                <div class="flex items-center justify-between mb-6">
                                    <h2 class="font-display text-2xl font-bold text-slate-900">Messages</h2>
                                    <div class="flex gap-2">
                                        <button id="messages-search-btn"
                                            class="p-2 text-slate-400 hover:text-slate-600 transition-colors">
                                            <i class="fa-solid fa-magnifying-glass"></i>
                                        </button>
                                        <button id="messages-compose-btn"
                                            class="p-2 text-slate-400 hover:text-slate-600 transition-colors">
                                            <i class="fa-solid fa-pen-to-square"></i>
                                        </button>
                                    </div>
                                </div>

                                <!-- Empty State (shown initially) -->
                                <div id="messages-empty-state"
                                    class="flex-1 flex flex-col items-center justify-center text-center text-slate-500">
                                    <div
                                        class="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mb-4">
                                        <i class="fa-regular fa-comments text-2xl text-slate-400"></i>
                                    </div>
                                    <h3 class="text-lg font-bold text-slate-900 mb-2">No messages yet</h3>
                                    <p class="max-w-xs mx-auto">Connect with recruiters and companies to start a
                                        conversation.</p>
                                </div>

                                <!-- Notifications List (hidden initially) -->
                                <div id="messages-list" class="flex-1 overflow-y-auto pr-2 space-y-3 hidden">
                                    <!-- Notifications will be populated here via JavaScript -->
                                </div>
                            </div>
                        </div>

                        <!-- Saved Jobs Section -->
                        <div id="section-saved-jobs" class="dashboard-section">
                            <div id="view-saved-jobs"
                                class="bg-white/80 backdrop-blur-md border border-slate-200/60 rounded-3xl p-8 shadow-xl shadow-slate-200/50">
                                <div class="max-w-4xl mx-auto">
                                    <h2 class="text-2xl font-bold text-slate-900 mb-6">Saved Jobs</h2>
                                    <div id="dashboardSavedJobsContainer" class="saved-jobs-wrapper">
                                        <!-- Jobs will be injected here -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Resume History Section -->
                        <div id="section-resume-history" class="dashboard-section">
                            <div id="view-resume-history"
                                class="bg-white/80 backdrop-blur-md border border-slate-200/60 rounded-3xl p-8 shadow-xl shadow-slate-200/50">
                                <div class="max-w-4xl mx-auto">
                                    <div class="flex items-center justify-between mb-6">
                                        <div>
                                            <h2 class="text-2xl font-bold text-slate-900 flex items-center gap-2">
                                                <i class="fa-solid fa-clock-rotate-left text-blue-600"></i>
                                                Resume History
                                            </h2>
                                            <p class="text-slate-500 text-sm mt-1">View and manage your past resume
                                                analyses.</p>
                                        </div>
                                        <button id="refreshHistoryBtn"
                                            class="text-blue-600 hover:text-blue-700 font-medium text-sm flex items-center gap-1">
                                            <i class="fa-solid fa-refresh"></i>
                                            Refresh
                                        </button>
                                    </div>
                                    <div id="resumeHistoryList" class="resume-history-list">
                                        <!-- Resume history items will be injected via JS -->
                                        <div class="empty-state text-center py-12 text-slate-500">
                                            <i class="fa-solid fa-spinner fa-spin text-3xl mb-4"></i>
                                            <p>Loading your resume history...</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Profile Section (New) -->
                        <div id="section-my-profile" class="dashboard-section active">
                            <div id="view-profile"
                                class="bg-white/80 backdrop-blur-md border border-slate-200/60 rounded-3xl p-8 shadow-xl shadow-slate-200/50">
                                <div class="max-w-3xl mx-auto">
                                    <!-- Avatar Section (Preserved) -->
                                    <div class="flex flex-col items-center mb-8 profile-fade-up">
                                        <div
                                            class="w-32 h-32 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white text-4xl font-bold shadow-lg mb-4 overflow-hidden relative group">
                                            <img id="profile-view-avatar" src="" alt="Profile"
                                                referrerPolicy="no-referrer" class="w-full h-full object-cover hidden">
                                            <span id="profile-view-initials"><i class="fa-solid fa-user"></i></span>
                                            <div
                                                class="absolute inset-0 bg-black/30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer">
                                                <i class="fa-solid fa-camera"></i>
                                            </div>
                                        </div>
                                        <button class="text-blue-600 font-medium text-sm hover:text-blue-700">Change
                                            Avatar</button>
                                    </div>

                                    <!-- Section Header -->
                                    <div class="mb-8 profile-fade-up">
                                        <h2 class="section-title">Create Your Profile</h2>
                                        <p class="section-subtitle">Fill in your details to match with the best job
                                            opportunities</p>
                                    </div>

                                    <form id="profile-form" class="space-y-8" novalidate>
                                        <!-- Basic Information Section -->
                                        <div class="space-y-6 profile-fade-up">
                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                                <!-- First Name -->
                                                <div class="form-group">
                                                    <i class="form-icon fa-solid fa-user"></i>
                                                    <input type="text" id="input-first-name" name="firstName"
                                                        class="form-input" placeholder=" " required>
                                                    <label for="input-first-name" class="form-label">First Name<span
                                                            class="required-indicator">*</span></label>
                                                </div>

                                                <!-- Last Name -->
                                                <div class="form-group">
                                                    <i class="form-icon fa-solid fa-user"></i>
                                                    <input type="text" id="input-last-name" name="lastName"
                                                        class="form-input" placeholder=" " required>
                                                    <label for="input-last-name" class="form-label">Last Name<span
                                                            class="required-indicator">*</span></label>
                                                </div>
                                            </div>

                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                                <!-- Email Address -->
                                                <div class="form-group">
                                                    <i class="form-icon fa-solid fa-envelope"></i>
                                                    <input type="email" id="input-email" name="email"
                                                        class="form-input bg-slate-50" placeholder=" " required
                                                        readonly>
                                                    <label for="input-email" class="form-label">Email Address<span
                                                            class="required-indicator">*</span></label>
                                                </div>

                                                <!-- Phone Number -->
                                                <div class="form-group">
                                                    <i class="form-icon fa-solid fa-phone"></i>
                                                    <input type="tel" id="input-phone" name="phone" class="form-input"
                                                        placeholder=" " required>
                                                    <label for="input-phone" class="form-label">Phone Number<span
                                                            class="required-indicator">*</span></label>
                                                </div>
                                            </div>

                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                                <!-- Location -->
                                                <div class="form-group">
                                                    <i class="form-icon fa-solid fa-location-dot"></i>
                                                    <input type="text" id="input-location" name="location"
                                                        class="form-input" placeholder=" " required>
                                                    <label for="input-location" class="form-label">Location<span
                                                            class="required-indicator">*</span></label>
                                                </div>

                                                <!-- LinkedIn Profile -->
                                                <div class="form-group">
                                                    <i class="form-icon fa-brands fa-linkedin"></i>
                                                    <input type="url" id="input-linkedin" name="linkedin"
                                                        class="form-input" placeholder=" ">
                                                    <label for="input-linkedin" class="form-label">LinkedIn
                                                        Profile</label>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Job Requirements Section -->
                                        <div class="space-y-6 profile-fade-up">
                                            <h3 class="group-title">Job Requirements</h3>

                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                                <!-- Desired Job Title -->
                                                <div class="form-group">
                                                    <i class="form-icon fa-solid fa-briefcase"></i>
                                                    <input type="text" id="input-job-title" name="jobTitle"
                                                        class="form-input" placeholder=" " required>
                                                    <label for="input-job-title" class="form-label">Desired Job
                                                        Title<span class="required-indicator">*</span></label>
                                                </div>

                                                <!-- Years of Experience -->
                                                <div class="form-group">
                                                    <i class="form-icon fa-solid fa-calendar-days"></i>
                                                    <select id="input-experience" name="experience" class="form-select"
                                                        required>
                                                        <option value="">Select Experience</option>
                                                        <option value="0-1">0-1 Years</option>
                                                        <option value="1-3">1-3 Years</option>
                                                        <option value="3-5">3-5 Years</option>
                                                        <option value="5-7">5-7 Years</option>
                                                        <option value="7-10">7-10 Years</option>
                                                        <option value="10+">10+ Years</option>
                                                    </select>
                                                    <label for="input-experience" class="form-label"
                                                        style="left: 2.75rem;">Years of Experience<span
                                                            class="required-indicator">*</span></label>
                                                </div>
                                            </div>

                                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                                <!-- Job Type -->
                                                <div class="form-group">
                                                    <i class="form-icon fa-solid fa-briefcase"></i>
                                                    <select id="input-job-type" name="jobType" class="form-select"
                                                        required>
                                                        <option value="">Select Job Type</option>
                                                        <option value="full-time">Full-Time</option>
                                                        <option value="part-time">Part-Time</option>
                                                        <option value="contract">Contract</option>
                                                        <option value="freelance">Freelance</option>
                                                        <option value="internship">Internship</option>
                                                        <option value="remote">Remote</option>
                                                    </select>
                                                    <label for="input-job-type" class="form-label"
                                                        style="left: 2.75rem;">Job Type<span
                                                            class="required-indicator">*</span></label>
                                                </div>

                                                <!-- Expected Salary Range -->
                                                <div class="form-group">
                                                    <i class="form-icon fa-solid fa-dollar-sign"></i>
                                                    <select id="input-salary" name="salary" class="form-select">
                                                        <option value="">Select Salary Range</option>
                                                        <option value="0-3">‚Çπ0 - ‚Çπ3 LPA</option>
                                                        <option value="3-5">‚Çπ3 - ‚Çπ5 LPA</option>
                                                        <option value="5-8">‚Çπ5 - ‚Çπ8 LPA</option>
                                                        <option value="8-12">‚Çπ8 - ‚Çπ12 LPA</option>
                                                        <option value="12-20">‚Çπ12 - ‚Çπ20 LPA</option>
                                                        <option value="20+">‚Çπ20+ LPA</option>
                                                    </select>
                                                    <label for="input-salary" class="form-label"
                                                        style="left: 2.75rem;">Expected Salary Range</label>
                                                </div>
                                            </div>

                                            <!-- Skills & Technologies -->
                                            <div class="form-group">
                                                <i class="form-icon fa-solid fa-code" style="top: 1.5rem;"></i>
                                                <textarea id="input-skills" name="skills" class="form-textarea"
                                                    placeholder=" " required></textarea>
                                                <label for="input-skills" class="form-label" style="top: 1.5rem;">Skills
                                                    & Technologies<span class="required-indicator">*</span></label>
                                                <small class="text-xs text-slate-500 mt-1 block ml-2.75">JavaScript,
                                                    Python, React...</small>
                                            </div>

                                            <!-- Preferred Industries -->
                                            <div class="form-group">
                                                <i class="form-icon fa-solid fa-building" style="top: 1.5rem;"></i>
                                                <textarea id="input-industries" name="industries" class="form-textarea"
                                                    placeholder=" "></textarea>
                                                <label for="input-industries" class="form-label"
                                                    style="top: 1.5rem;">Preferred Industries</label>
                                                <small class="text-xs text-slate-500 mt-1 block ml-2.75">Comma separated
                                                    (e.g., Software, Finance, Healthcare)</small>
                                            </div>
                                        </div>

                                        <!-- Additional Information Section -->
                                        <div class="space-y-6 profile-fade-up">
                                            <h3 class="group-title">Additional Information</h3>

                                            <!-- Professional Summary -->
                                            <div class="form-group">
                                                <i class="form-icon fa-solid fa-file-lines" style="top: 1.5rem;"></i>
                                                <textarea id="input-summary" name="summary" class="form-textarea"
                                                    rows="5" placeholder=" "></textarea>
                                                <label for="input-summary" class="form-label"
                                                    style="top: 1.5rem;">Professional Summary</label>
                                            </div>

                                            <!-- Availability -->
                                            <div class="form-group">
                                                <i class="form-icon fa-solid fa-clock"></i>
                                                <select id="input-availability" name="availability" class="form-select"
                                                    required>
                                                    <option value="">Select Availability</option>
                                                    <option value="immediate">Immediate</option>
                                                    <option value="1-week">Within 1 Week</option>
                                                    <option value="2-weeks">Within 2 Weeks</option>
                                                    <option value="1-month">Within 1 Month</option>
                                                    <option value="2-months">Within 2 Months</option>
                                                    <option value="3-months">Within 3 Months</option>
                                                </select>
                                                <label for="input-availability" class="form-label"
                                                    style="left: 2.75rem;">Availability<span
                                                        class="required-indicator">*</span></label>
                                            </div>
                                        </div>

                                        <!-- Submit Button -->
                                        <div class="flex justify-end pt-6 profile-fade-up">
                                            <button type="submit"
                                                class="bg-blue-600 hover:bg-blue-700 text-white px-10 py-3.5 rounded-xl font-bold text-base shadow-lg shadow-blue-500/30 transition-all hover:-translate-y-0.5 hover:shadow-xl hover:shadow-blue-500/40 flex items-center gap-2">
                                                <i class="fa-solid fa-floppy-disk"></i>
                                                Save Profile
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <!-- Problems Section - Always After ATS Box -->
    <section id="problemsSection">
        <div class="problems-wrapper">
            <!-- Main Heading -->
            <h2 class="problems-heading">Fix the problems that slow down your job search.</h2>

            <!-- Bubble 1: Top Left -->
            <div class="problem-bubble problem-bubble-1">
                <div
                    class="flex items-center gap-3 bg-white/95 backdrop-blur-sm border border-slate-200 px-5 py-3 rounded-2xl shadow-[0_4px_24px_rgba(0,0,0,0.05)]">
                    <i class="fa-solid fa-triangle-exclamation text-amber-500 text-lg"></i>
                    <span class="text-sm font-medium text-slate-800">You spend too much time searching for the right
                        jobs.</span>
                </div>
            </div>

            <!-- Bubble 2: Top Right -->
            <div class="problem-bubble problem-bubble-2">
                <div
                    class="flex items-center gap-3 bg-white/95 backdrop-blur-sm border border-slate-200 px-5 py-3 rounded-2xl shadow-[0_4px_24px_rgba(0,0,0,0.05)]">
                    <i class="fa-solid fa-triangle-exclamation text-amber-500 text-lg"></i>
                    <span class="text-sm font-medium text-slate-800">Your applications don't get consistent
                        follow-ups.</span>
                </div>
            </div>

            <!-- Bubble 3: Bottom Left -->
            <div class="problem-bubble problem-bubble-3">
                <div
                    class="flex items-center gap-3 bg-white/95 backdrop-blur-sm border border-slate-200 px-5 py-3 rounded-2xl shadow-[0_4px_24px_rgba(0,0,0,0.05)]">
                    <i class="fa-solid fa-triangle-exclamation text-amber-500 text-lg"></i>
                    <span class="text-sm font-medium text-slate-800">Outdated resumes reduce your chances of getting
                        shortlisted.</span>
                </div>
            </div>

            <!-- Bubble 4: Bottom Right -->
            <div class="problem-bubble problem-bubble-4">
                <div
                    class="flex items-center gap-3 bg-white/95 backdrop-blur-sm border border-slate-200 px-5 py-3 rounded-2xl shadow-[0_4px_24px_rgba(0,0,0,0.05)]">
                    <i class="fa-solid fa-triangle-exclamation text-amber-500 text-lg"></i>
                    <span class="text-sm font-medium text-slate-800">It takes too long to track applications across
                        different platforms.</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Features & Highlights Section -->
    <section id="features-section"
        class="relative z-10 py-24 px-4 sm:px-6 max-w-7xl mx-auto features-section opacity-0 translate-y-10">
        <div class="text-center mb-20">
            <h2 class="font-display text-3xl md:text-5xl font-bold text-slate-900 mb-6">
                Unmatched Features Designed To Help You Get Hired Faster
            </h2>
            <p class="text-lg text-slate-500 max-w-2xl mx-auto">
                Powered by real-time job intelligence, AI-driven recommendations, and smart automation.
            </p>
        </div>

        <div class="relative flex flex-col md:flex-row items-center justify-center gap-8 md:gap-16">
            <!-- Left Column -->
            <div class="flex flex-col gap-6 w-full md:w-1/3">
                <div class="feature-card group">
                    <div
                        class="feature-icon bg-blue-50 text-blue-600 group-hover:bg-blue-600 group-hover:text-white transition-colors">
                        <i class="fa-solid fa-bullseye"></i>
                    </div>
                    <div>
                        <h3 class="font-bold text-slate-900 mb-1">Smart Job Matching</h3>
                        <p class="text-sm text-slate-500">Finds roles tailored to your skills, experience, and
                            interests.</p>
                    </div>
                </div>
                <div class="feature-card group">
                    <div
                        class="feature-icon bg-blue-50 text-blue-600 group-hover:bg-blue-600 group-hover:text-white transition-colors">
                        <i class="fa-solid fa-file-waveform"></i>
                    </div>
                    <div>
                        <h3 class="font-bold text-slate-900 mb-1">AI-Powered Resume Scan</h3>
                        <p class="text-sm text-slate-500">Suggests improvements and matches resume keywords.</p>
                    </div>
                </div>
                <div class="feature-card group">
                    <div
                        class="feature-icon bg-blue-50 text-blue-600 group-hover:bg-blue-600 group-hover:text-white transition-colors">
                        <i class="fa-solid fa-bolt"></i>
                    </div>
                    <div>
                        <h3 class="font-bold text-slate-900 mb-1">Real-Time Openings</h3>
                        <p class="text-sm text-slate-500">Aggregates openings from top companies instantly.</p>
                    </div>
                </div>
            </div>

            <!-- Central Orb -->
            <div class="relative z-10 hidden md:flex items-center justify-center w-32 h-32 shrink-0">
                <div class="absolute inset-0 bg-blue-500/20 rounded-full blur-xl animate-pulse"></div>
                <div
                    class="w-24 h-24 rounded-full bg-gradient-to-br from-blue-400 to-indigo-600 shadow-[0_0_40px_rgba(59,130,246,0.6)] flex items-center justify-center relative z-10">
                    <div class="w-20 h-20 rounded-full bg-white/10 backdrop-blur-sm border border-white/30">
                    </div>
                </div>
                <!-- Connecting Lines (SVG) -->
                <svg class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[400px] -z-10 pointer-events-none opacity-30 hidden md:block"
                    viewBox="0 0 800 400">
                    <path d="M400 200 C 300 200, 200 100, 150 100" stroke="url(#lineGradientLeft)" stroke-width="1.5"
                        fill="none" />
                    <path d="M400 200 C 300 200, 200 200, 150 200" stroke="url(#lineGradientLeft)" stroke-width="1.5"
                        fill="none" />
                    <path d="M400 200 C 300 200, 200 300, 150 300" stroke="url(#lineGradientLeft)" stroke-width="1.5"
                        fill="none" />

                    <path d="M400 200 C 500 200, 600 100, 650 100" stroke="url(#lineGradientRight)" stroke-width="1.5"
                        fill="none" />
                    <path d="M400 200 C 500 200, 600 200, 650 200" stroke="url(#lineGradientRight)" stroke-width="1.5"
                        fill="none" />
                    <path d="M400 200 C 500 200, 600 300, 650 300" stroke="url(#lineGradientRight)" stroke-width="1.5"
                        fill="none" />

                    <defs>
                        <linearGradient id="lineGradientLeft" x1="100%" y1="0%" x2="0%" y2="0%">
                            <stop offset="0%" stop-color="#3b82f6" stop-opacity="1" />
                            <stop offset="100%" stop-color="#3b82f6" stop-opacity="0" />
                        </linearGradient>
                        <linearGradient id="lineGradientRight" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" stop-color="#3b82f6" stop-opacity="1" />
                            <stop offset="100%" stop-color="#3b82f6" stop-opacity="0" />
                        </linearGradient>
                    </defs>
                </svg>
            </div>

            <!-- Right Column -->
            <div class="flex flex-col gap-6 w-full md:w-1/3">
                <div class="feature-card group">
                    <div
                        class="feature-icon bg-blue-50 text-blue-600 group-hover:bg-blue-600 group-hover:text-white transition-colors">
                        <i class="fa-solid fa-list-check"></i>
                    </div>
                    <div>
                        <h3 class="font-bold text-slate-900 mb-1">Application Tracking</h3>
                        <p class="text-sm text-slate-500">Track applied, interviewing, shortlisted, and rejected
                            roles.</p>
                    </div>
                </div>
                <div class="feature-card group">
                    <div
                        class="feature-icon bg-blue-50 text-blue-600 group-hover:bg-blue-600 group-hover:text-white transition-colors">
                        <i class="fa-solid fa-chart-pie"></i>
                    </div>
                    <div>
                        <h3 class="font-bold text-slate-900 mb-1">Skill Insights Dashboard</h3>
                        <p class="text-sm text-slate-500">Shows which skills increase your chances of getting
                            hired.
                        </p>
                    </div>
                </div>
                <div class="feature-card group">
                    <div
                        class="feature-icon bg-blue-50 text-blue-600 group-hover:bg-blue-600 group-hover:text-white transition-colors">
                        <i class="fa-solid fa-shield-halved"></i>
                    </div>
                    <div>
                        <h3 class="font-bold text-slate-900 mb-1">Secure & Reliable</h3>
                        <p class="text-sm text-slate-500">Safe login, encrypted sessions, and robust protection.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Wave Goodbye Animation Section -->
    <section class="py-24 px-4 sm:px-6 bg-[#F8FAFC] overflow-hidden flex justify-center">
        <div class="text-wrap relative ml-24">
            <h2 class="left-text relative z-10">Wave goodbye to</h2>

            <!-- Animated Arrow -->
            <div class="absolute left-[280px] -top-8 z-0 hidden md:block">
                <svg width="120" height="80" viewBox="0 0 120 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10,60 Q40,10 110,50" stroke="url(#arrowGradient)" stroke-width="3" stroke-linecap="round"
                        class="arrow-path" />
                    <path d="M100,40 L110,50 L100,60" stroke="url(#arrowGradient)" stroke-width="3"
                        stroke-linecap="round" stroke-linejoin="round" class="arrow-head" />
                    <defs>
                        <linearGradient id="arrowGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" stop-color="#f97316" />
                            <stop offset="50%" stop-color="#ec4899" />
                            <stop offset="100%" stop-color="#a855f7" />
                        </linearGradient>
                    </defs>
                </svg>
            </div>

            <div class="right-text">
                <h2 class="swap">slow application progress</h2>
                <h2 class="swap">wasted hours on job portals</h2>
                <h2 class="swap">missed interview updates</h2>
                <h2 class="swap">non-personalized job recommendations</h2>
            </div>
        </div>
    </section>

    <!-- Everything You Need Section -->
    <section class="py-24 px-4 sm:px-6 overflow-hidden" id="everything-section" style="opacity: 1 !important; transform: none !important; background-color: #ffffff !important; position: relative !important; z-index: 50 !important;">
        <div class="max-w-7xl mx-auto">
            <!-- Section Header -->
            <div class="mb-16">
                <h2 class="text-5xl md:text-7xl font-display font-bold text-slate-900 mb-6 tracking-tight">
                    Everything you<br>need to get hired faster.
                </h2>
                <p class="text-xl text-slate-500 max-w-2xl">
                    From AI resume scanning to real-time application tracking, we provide a full suite of tools
                    designed to streamline your job search and land your dream role.
                </p>
            </div>

            <!-- Grid Layout -->
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">

                <!-- Part 1: Smart Job Search Steps (Calendar) - Spans 4 columns -->
                <div
                    class="lg:col-span-4 bg-[#F8FAFC] rounded-3xl p-8 border border-[#EAEAEA] shadow-sm relative overflow-hidden group hover:shadow-md transition-shadow duration-300">
                    <div class="mb-8">
                        <h3 class="text-2xl font-bold text-slate-900 mb-2">Plan your search</h3>
                        <p class="text-slate-500">Clear steps to scale smart and fast.</p>
                    </div>

                    <!-- Calendar Mockup -->
                    <div class="bg-white rounded-xl border border-slate-200 p-4 shadow-sm relative h-[300px]">
                        <!-- Calendar Grid Lines -->
                        <div class="grid grid-cols-7 gap-2 text-center text-xs text-slate-400 mb-2">
                            <span>S</span><span>M</span><span>T</span><span>W</span><span>TH</span><span>F</span><span>S</span>
                        </div>
                        <div class="grid grid-cols-7 gap-2 text-center text-sm text-slate-800 font-medium">
                            <span class="p-2">01</span><span class="p-2">02</span><span class="p-2">03</span><span
                                class="p-2">04</span><span class="p-2">05</span><span class="p-2">06</span><span
                                class="p-2">07</span>
                            <span class="p-2">08</span><span class="p-2">09</span><span class="p-2">10</span><span
                                class="p-2">11</span><span class="p-2">12</span><span class="p-2">13</span><span
                                class="p-2">14</span>
                            <span class="p-2">15</span><span class="p-2">16</span><span class="p-2">17</span><span
                                class="p-2">18</span><span class="p-2">19</span><span class="p-2">20</span><span
                                class="p-2">21</span>
                            <span class="p-2">22</span><span class="p-2">23</span><span class="p-2">24</span><span
                                class="p-2">25</span><span class="p-2">26</span><span class="p-2">27</span><span
                                class="p-2">28</span>
                        </div>

                        <!-- Floating Bubbles -->
                        <div
                            class="calendar-bubble absolute top-[60px] left-[20px] bg-white border border-slate-200 rounded-full px-3 py-1.5 shadow-md flex items-center gap-2 z-10">
                            <span class="text-blue-500 text-lg">üìÑ</span>
                            <span class="text-xs font-bold text-slate-800">AI Resume Scan</span>
                        </div>
                        <div class="calendar-bubble absolute top-[120px] right-[30px] bg-white border border-slate-200 rounded-full px-3 py-1.5 shadow-md flex items-center gap-2 z-10"
                            style="animation-delay: 1s;">
                            <span class="text-orange-500 text-lg">üîî</span>
                            <span class="text-xs font-bold text-slate-800">Job Alerts</span>
                        </div>
                        <div class="calendar-bubble absolute bottom-[60px] left-[50px] bg-blue-600 text-white rounded-full px-3 py-1.5 shadow-lg flex items-center gap-2 z-20"
                            style="animation-delay: 2s;">
                            <span class="text-white text-lg">‚è∞</span>
                            <span class="text-xs font-bold">App Reminder</span>
                        </div>
                    </div>
                </div>

                <!-- Part 2: 4-Step Plan - Spans 8 columns -->
                <div
                    class="lg:col-span-8 bg-[#F8FAFC] rounded-3xl px-8 pt-8 pb-0 border border-[#EAEAEA] shadow-sm hover:shadow-md transition-shadow duration-300 overflow-hidden">
                    <div class="mb-8">
                        <h3 class="text-2xl font-bold text-slate-900 mb-2">Our 4-step plan</h3>
                        <p class="text-slate-500">A simple path to smart, scalable growth.</p>
                    </div>

                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 h-[300px] items-end">
                        <!-- Step 1 -->
                        <div
                            class="step-card bg-white rounded-t-2xl rounded-b-none p-6 shadow-sm border border-slate-100 h-[140px] flex flex-col justify-between hover:-translate-y-2 transition-transform duration-300">
                            <span class="text-xs font-bold text-slate-400">01</span>
                            <div class="text-center">
                                <div class="text-2xl mb-2">üîç</div>
                                <h4 class="font-bold text-slate-900">Explore</h4>
                            </div>
                        </div>
                        <!-- Step 2 -->
                        <div
                            class="step-card bg-white rounded-t-2xl rounded-b-none p-6 shadow-sm border border-slate-100 h-[180px] flex flex-col justify-between hover:-translate-y-2 transition-transform duration-300">
                            <span class="text-xs font-bold text-slate-400">02</span>
                            <div class="text-center">
                                <div class="text-2xl mb-2">üéØ</div>
                                <h4 class="font-bold text-slate-900">Match</h4>
                            </div>
                        </div>
                        <!-- Step 3 -->
                        <div
                            class="step-card bg-white rounded-t-2xl rounded-b-none p-6 shadow-sm border border-slate-100 h-[220px] flex flex-col justify-between hover:-translate-y-2 transition-transform duration-300">
                            <span class="text-xs font-bold text-slate-400">03</span>
                            <div class="text-center">
                                <div class="text-2xl mb-2">üìù</div>
                                <h4 class="font-bold text-slate-900">Apply</h4>
                            </div>
                        </div>
                        <!-- Step 4 -->
                        <div
                            class="step-card bg-white rounded-t-2xl rounded-b-none p-6 shadow-sm border border-slate-100 h-[260px] flex flex-col justify-between hover:-translate-y-2 transition-transform duration-300">
                            <span class="text-xs font-bold text-slate-400">04</span>
                            <div class="text-center">
                                <div class="text-2xl mb-2">üèÜ</div>
                                <h4 class="font-bold text-slate-900">Get Hired</h4>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Part 3: Success Metric & Skills Tags - Spans 12 columns (Full Width Bottom) -->
                <div class="lg:col-span-12 grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Metric -->
                    <div
                        class="bg-[#F8FAFC] rounded-3xl p-12 border border-[#EAEAEA] shadow-sm flex items-center justify-center hover:shadow-md transition-shadow duration-300">
                        <div class="text-center">
                            <h3
                                class="metric-number text-8xl md:text-9xl font-display font-bold text-blue-600 tracking-tighter mb-4">
                                <span class="counter-value">0</span>%
                            </h3>
                            <p class="text-xl font-medium text-slate-600">Faster Job Matches</p>
                        </div>
                    </div>

                    <!-- Floating Tags Area -->
                    <div
                        class="bg-[#F8FAFC] rounded-3xl p-8 border border-[#EAEAEA] shadow-sm relative overflow-hidden h-[400px] hover:shadow-md transition-shadow duration-300">
                        <!-- Floating Tags -->
                        <div
                            class="floating-tag absolute top-[20%] left-[10%] bg-blue-600 text-white px-6 py-3 rounded-full font-bold shadow-lg transform rotate-[-12deg]">
                            AI Matching
                        </div>
                        <div
                            class="floating-tag absolute top-[60%] left-[20%] bg-white text-slate-900 border border-slate-200 px-6 py-3 rounded-full font-bold shadow-md transform rotate-[5deg]">
                            ATS Boost
                        </div>
                        <div
                            class="floating-tag absolute top-[30%] right-[15%] bg-blue-100 text-blue-700 px-6 py-3 rounded-full font-bold shadow-md transform rotate-[15deg]">
                            Resume Score
                        </div>
                        <div
                            class="floating-tag absolute bottom-[20%] right-[30%] bg-white text-slate-900 border border-slate-200 px-6 py-3 rounded-full font-bold shadow-md transform rotate-[-8deg]">
                            Salary Insights
                        </div>
                        <div
                            class="floating-tag absolute top-[10%] left-[40%] bg-purple-100 text-purple-700 px-5 py-2 rounded-full font-bold shadow-sm transform rotate-[8deg]">
                            Job Alerts
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>



    <!-- Premium Pricing Section -->
    <!-- Premium Pricing Section -->
    <section id="pricing" class="py-32 px-4 relative overflow-hidden bg-slate-50">
        <!-- Soft Gradient Background -->
        <div
            class="absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-blue-100/40 via-transparent to-transparent pointer-events-none">
        </div>

        <div class="max-w-7xl mx-auto relative z-10">
            <!-- Header -->
            <div class="text-center mb-16">
                <h2 class="text-4xl md:text-5xl font-display font-bold text-slate-900 mb-6 tracking-tight">
                    Flexible Plans for All
                </h2>
                <p class="text-lg text-slate-500 mb-10">
                    Choose a plan that fits your goals and scale as you grow
                </p>

                <!-- Toggle Tabs -->
                <div class="inline-flex bg-slate-200 p-1.5 rounded-xl relative shadow-inner">
                    <div class="absolute inset-y-1.5 left-1.5 w-[calc(50%-6px)] bg-white rounded-lg shadow-sm transition-all duration-300"
                        id="pricing-toggle-bg"></div>
                    <button
                        class="relative z-10 px-10 py-2.5 rounded-lg text-sm font-bold text-slate-900 transition-colors duration-300"
                        id="monthly-btn">
                        Monthly
                    </button>
                    <button
                        class="relative z-10 px-10 py-2.5 rounded-lg text-sm font-bold text-slate-500 hover:text-slate-900 transition-colors duration-300 flex items-center gap-2"
                        id="yearly-btn">
                        Yearly <span class="text-[10px] text-green-600 bg-green-100 px-2 py-0.5 rounded-full">Save
                            20%</span>
                    </button>
                </div>
            </div>

            <!-- Pricing Cards Grid -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 items-stretch">

                <!-- 1. STARTER PLAN -->
                <div
                    class="pricing-card bg-white rounded-[2rem] p-8 border border-slate-100 shadow-xl hover:shadow-2xl transition-all duration-300 flex flex-col h-full opacity-100 transform hover:-translate-y-1">
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold text-slate-500 mb-4">Starter</h3>
                        <div class="flex items-baseline gap-1">
                            <span class="text-5xl font-bold text-slate-900 tracking-tight">‚Çπ0</span>
                            <span class="text-slate-400 text-sm font-medium">/ user / month</span>
                        </div>
                    </div>

                    <button
                        class="w-full py-4 rounded-xl bg-slate-100 text-slate-900 font-bold mb-8 hover:bg-slate-200 transition-colors shadow-sm">
                        Get Started
                    </button>

                    <div class="space-y-4 mt-auto">
                        <p class="text-sm font-semibold text-slate-900">Everything in starter plan</p>
                        <ul class="space-y-3.5">
                            <li class="flex items-start gap-3 text-slate-600 text-sm">
                                <i class="fa-solid fa-check text-slate-400 mt-1"></i> <span>Basic job
                                    recommendations</span>
                            </li>
                            <li class="flex items-start gap-3 text-slate-600 text-sm">
                                <i class="fa-solid fa-check text-slate-400 mt-1"></i> <span>Limited job
                                    tracking</span>
                            </li>
                            <li class="flex items-start gap-3 text-slate-600 text-sm">
                                <i class="fa-solid fa-check text-slate-400 mt-1"></i> <span>Resume upload (PDF
                                    only)</span>
                            </li>
                            <li class="flex items-start gap-3 text-slate-600 text-sm">
                                <i class="fa-solid fa-check text-slate-400 mt-1"></i> <span>Daily job alerts (5 per
                                    day)</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- 2. PRO PLAN (Highlighted) -->
                <div
                    class="pricing-card bg-white rounded-[2rem] p-8 border border-blue-100 shadow-[0_20px_60px_-15px_rgba(59,130,246,0.15)] hover:shadow-[0_30px_70px_-15px_rgba(59,130,246,0.25)] transition-all duration-300 relative z-10 flex flex-col h-full opacity-100 transform scale-[1.02] hover:scale-[1.03]">
                    <div class="mb-8">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-slate-900">Pro</h3>
                            <span
                                class="bg-indigo-600 text-white px-3 py-1 rounded-full text-xs font-bold shadow-md shadow-indigo-200">
                                <i class="fa-solid fa-fire mr-1"></i> Popular
                            </span>
                        </div>
                        <div class="flex items-baseline gap-1">
                            <span class="text-5xl font-bold text-slate-900 tracking-tight">‚Çπ299</span>
                            <span class="text-slate-400 text-sm font-medium">/ user / month</span>
                        </div>
                    </div>

                    <button
                        class="w-full py-4 rounded-xl bg-[#1e293b] text-white font-bold mb-8 hover:bg-slate-800 transition-all shadow-lg hover:shadow-slate-900/30 flex items-center justify-center gap-2">
                        <i class="fa-solid fa-crown text-yellow-500 text-sm"></i> Get Started
                    </button>

                    <div class="space-y-4 mt-auto">
                        <p class="text-sm font-semibold text-slate-900">Everything in Pro plan</p>
                        <ul class="space-y-3.5">
                            <li class="flex items-start gap-3 text-slate-700 text-sm font-medium">
                                <i class="fa-solid fa-check text-blue-600 mt-1"></i> <span>Unlimited job
                                    recommendations</span>
                            </li>
                            <li class="flex items-start gap-3 text-slate-700 text-sm font-medium">
                                <i class="fa-solid fa-check text-blue-600 mt-1"></i> <span>Real-time AI job
                                    matching</span>
                            </li>
                            <li class="flex items-start gap-3 text-slate-700 text-sm font-medium">
                                <i class="fa-solid fa-check text-blue-600 mt-1"></i> <span>Resume scoring +
                                    improvements</span>
                            </li>
                            <li class="flex items-start gap-3 text-slate-700 text-sm font-medium">
                                <i class="fa-solid fa-check text-blue-600 mt-1"></i> <span>AI application
                                    assistant</span>
                            </li>
                            <li class="flex items-start gap-3 text-slate-700 text-sm font-medium">
                                <i class="fa-solid fa-check text-blue-600 mt-1"></i> <span>ATS-ready resume
                                    export</span>
                            </li>
                            <li class="flex items-start gap-3 text-slate-700 text-sm font-medium">
                                <i class="fa-solid fa-check text-blue-600 mt-1"></i> <span>Priority AI
                                    insights</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- 3. PREMIUM PLAN -->
                <div
                    class="pricing-card bg-white rounded-[2rem] p-8 border border-slate-100 shadow-xl hover:shadow-2xl transition-all duration-300 flex flex-col h-full opacity-100 transform hover:-translate-y-1">
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold text-slate-500 mb-4">Premium</h3>
                        <div class="flex items-baseline gap-1">
                            <span class="text-5xl font-bold text-slate-900 tracking-tight">‚Çπ799</span>
                            <span class="text-slate-400 text-sm font-medium">/ user / month</span>
                        </div>
                    </div>

                    <button
                        class="w-full py-4 rounded-xl bg-slate-100 text-slate-900 font-bold mb-8 hover:bg-slate-200 transition-colors shadow-sm">
                        Get Started
                    </button>

                    <div class="space-y-4 mt-auto">
                        <p class="text-sm font-semibold text-slate-900">Everything in Premium</p>
                        <ul class="space-y-3.5">
                            <li class="flex items-start gap-3 text-slate-600 text-sm">
                                <i class="fa-solid fa-check text-slate-400 mt-1"></i> <span>Everything in Pro</span>
                            </li>
                            <li class="flex items-start gap-3 text-slate-600 text-sm">
                                <i class="fa-solid fa-check text-slate-400 mt-1"></i> <span>Dedicated AI agent
                                    support</span>
                            </li>
                            <li class="flex items-start gap-3 text-slate-600 text-sm">
                                <i class="fa-solid fa-check text-slate-400 mt-1"></i> <span>Unlimited resume
                                    rewrites</span>
                            </li>
                            <li class="flex items-start gap-3 text-slate-600 text-sm">
                                <i class="fa-solid fa-check text-slate-400 mt-1"></i> <span>Full dashboard
                                    analytics</span>
                            </li>
                            <li class="flex items-start gap-3 text-slate-600 text-sm">
                                <i class="fa-solid fa-check text-slate-400 mt-1"></i> <span>Job offer negotiation
                                    tips</span>
                            </li>
                        </ul>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- 3D Scroll-Triggered Testimonial Section -->
    <section id="testimonials-section" class="relative py-24 px-4 sm:px-6 bg-gray-50 overflow-hidden">
        <div class="max-w-7xl mx-auto">
            <!-- Section Header -->
            <div class="text-center mb-16">
                <h2 class="text-4xl md:text-5xl font-display font-bold text-slate-900 mb-6 tracking-tight">
                    What Our Users Say
                </h2>
                <p class="text-lg text-slate-500 max-w-2xl mx-auto">
                    Real stories from professionals who found their dream jobs faster with JobCluster
                </p>
            </div>

            <!-- 3D Scroll Container -->
            <div id="testimonial-scroll-container" class="testimonial-3d-container overflow-hidden relative"
                style="perspective: 1000px;">
                <!-- Infinite Scrolling Row -->
                <div id="testimonial-scroll-row" class="testimonial-3d-row flex gap-6 will-change-transform">
                    <!-- Testimonials will be duplicated here via JavaScript -->
                </div>
            </div>
        </div>
    </section>

    <!-- Premium SaaS Footer -->
    <footer class="relative pt-32 pb-20 overflow-hidden bg-[#f3e8ff]">
        <!-- Big Faded Background Text -->
        <div
            class="absolute top-2/3 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full text-center pointer-events-none select-none z-0 leading-none">
            <h1 class="text-[18vw] font-bold text-white tracking-tighter whitespace-nowrap" id="footer-big-text"
                style="text-shadow: 0 10px 30px rgba(147, 51, 234, 0.05); opacity: 1;">
                JobCluster
            </h1>
        </div>

        <div class="max-w-7xl mx-auto px-6 relative z-10 py-16">
            <!-- CTA Section -->
            <div class="text-center mb-24" id="footer-cta">
                <h2 class="text-4xl md:text-5xl font-display font-bold text-slate-900 mb-6 tracking-tight">
                    Ready to find your<br>dream job faster?
                </h2>
                <button
                    class="magnetic-btn px-8 py-3 bg-[#1e293b] text-white rounded-full font-bold text-base hover:scale-105 hover:shadow-xl hover:shadow-purple-500/20 transition-all duration-300 flex items-center gap-2 mx-auto group">
                    Get Started <span class="group-hover:translate-x-1 transition-transform"><i
                            class="fa-solid fa-arrow-right"></i></span>
                </button>
            </div>

            <!-- 4 Columns Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-8 w-full mb-12" id="footer-grid">

                <!-- Column 1: Info & Address -->
                <div class="footer-col">
                    <h4 class="flex items-center gap-2 font-bold text-slate-900 mb-6 text-base">
                        <span class="w-2 h-2 rounded-full bg-purple-600 shadow-[0_0_8px_rgba(147,51,234,0.6)]"></span>
                        Info & Address
                    </h4>
                    <ul class="space-y-4 text-slate-600 font-medium text-sm">
                        <li class="font-bold text-slate-800">JobCluster</li>
                        <li class="leading-relaxed opacity-80">Hyderabad, India</li>
                        <li>
                            <a href="mailto:support@jobcluster.ai"
                                class="hover:text-purple-600 transition-colors opacity-80 hover:opacity-100">support@jobcluster.ai</a>
                        </li>
                        <li class="opacity-80">+91 XXXXX XXXXX</li>
                    </ul>
                </div>

                <!-- Column 2: Creators -->
                <div class="footer-col">
                    <h4 class="flex items-center gap-2 font-bold text-slate-900 mb-6 text-base">
                        <span class="w-2 h-2 rounded-full bg-purple-600 shadow-[0_0_8px_rgba(147,51,234,0.6)]"></span>
                        Creators
                    </h4>
                    <ul class="space-y-4 text-slate-600 font-medium text-sm">
                        <li>
                            <a href="https://www.linkedin.com/in/s-manjunath-reddy-51784638a/" target="_blank"
                                class="hover:text-purple-600 transition-colors flex items-center gap-2 group w-fit opacity-80 hover:opacity-100">
                                <i
                                    class="fa-brands fa-linkedin-in text-slate-400 group-hover:text-purple-600 transition-colors"></i>
                                Manjunath - LinkedIn
                            </a>
                        </li>
                        <li>
                            <a href="https://www.linkedin.com/in/snehithb2/" target="_blank"
                                class="hover:text-purple-600 transition-colors flex items-center gap-2 group w-fit opacity-80 hover:opacity-100">
                                <i
                                    class="fa-brands fa-linkedin-in text-slate-400 group-hover:text-purple-600 transition-colors"></i>
                                Snehith - LinkedIn
                            </a>
                        </li>
                        <li>
                            <a href="https://github.com/Manju10092006" target="_blank"
                                class="hover:text-purple-600 transition-colors flex items-center gap-2 group w-fit opacity-80 hover:opacity-100">
                                <i
                                    class="fa-brands fa-github text-slate-400 group-hover:text-purple-600 transition-colors"></i>
                                Manjunath - GitHub
                            </a>
                        </li>
                        <li>
                            <a href="https://github.com/Snehith-0607" target="_blank"
                                class="hover:text-purple-600 transition-colors flex items-center gap-2 group w-fit opacity-80 hover:opacity-100">
                                <i
                                    class="fa-brands fa-github text-slate-400 group-hover:text-purple-600 transition-colors"></i>
                                Snehith - GitHub
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- Column 3: Navigation -->
                <div class="footer-col">
                    <h4 class="flex items-center gap-2 font-bold text-slate-900 mb-6 text-base">
                        <span class="w-2 h-2 rounded-full bg-purple-600 shadow-[0_0_8px_rgba(147,51,234,0.6)]"></span>
                        Navigation
                    </h4>
                    <ul class="space-y-3 text-slate-600 font-medium text-sm">
                        <li><a href="../index.html"
                                class="hover:text-purple-600 transition-colors hover:translate-x-1 inline-block duration-200 opacity-80 hover:opacity-100">Home</a>
                        </li>
                        <li><a href="#dashboard-section"
                                class="hover:text-purple-600 transition-colors hover:translate-x-1 inline-block duration-200 opacity-80 hover:opacity-100">Dashboard</a>
                        </li>
                        <li><a href="#section-find-jobs"
                                class="hover:text-purple-600 transition-colors hover:translate-x-1 inline-block duration-200 opacity-80 hover:opacity-100">AI
                                Job Match</a></li>
                        <li><a href="#section-upload-resume"
                                class="hover:text-purple-600 transition-colors hover:translate-x-1 inline-block duration-200 opacity-80 hover:opacity-100">Resume
                                Checker</a></li>
                        <li><a href="#pricing"
                                class="hover:text-purple-600 transition-colors hover:translate-x-1 inline-block duration-200 opacity-80 hover:opacity-100">Pricing</a>
                        </li>
                        <li><a href="mailto:support@jobcluster.ai"
                                class="hover:text-purple-600 transition-colors hover:translate-x-1 inline-block duration-200 opacity-80 hover:opacity-100">Contact</a>
                        </li>
                    </ul>
                </div>

                <!-- Column 4: Legal -->
                <div class="footer-col">
                    <h4 class="flex items-center gap-2 font-bold text-slate-900 mb-6 text-base">
                        <span class="w-2 h-2 rounded-full bg-purple-600 shadow-[0_0_8px_rgba(147,51,234,0.6)]"></span>
                        Legal
                    </h4>
                    <ul class="space-y-3 text-slate-600 font-medium text-sm">
                        <li><a href="#"
                                class="hover:text-purple-600 transition-colors hover:translate-x-1 inline-block duration-200 opacity-80 hover:opacity-100">Privacy
                                Policy</a></li>
                        <li><a href="#"
                                class="hover:text-purple-600 transition-colors hover:translate-x-1 inline-block duration-200 opacity-80 hover:opacity-100">Terms
                                of Service</a></li>
                        <li><a href="#"
                                class="hover:text-purple-600 transition-colors hover:translate-x-1 inline-block duration-200 opacity-80 hover:opacity-100">Refund
                                Policy</a></li>
                    </ul>
                </div>
            </div>

            <!-- Credits Line -->
            <div class="text-center relative z-10 mb-6">
                <p class="text-slate-600 text-sm font-medium">
                    Built with ‚ù§Ô∏è by 
                    <a href="https://github.com/Manju10092006" target="_blank" class="text-purple-600 hover:text-purple-800 font-bold transition-colors">Manjunath</a> 
                    & 
                    <a href="https://github.com/Snehith-0607" target="_blank" class="text-purple-600 hover:text-purple-800 font-bold transition-colors">Snehith</a>
                </p>
            </div>

            <div class="text-center relative z-10">
                <p class="text-slate-500 text-xs font-semibold tracking-widest uppercase opacity-70">
                    &copy; 2025 JobCluster. All rights reserved.
                </p>
            </div>
        </div>
    </footer>

    </div> <!-- End #content -->
    </div> <!-- End #wrapper -->
    <script src="../../../src/components/dashboard-script.js"></script>

    <!-- Initialize Lenis with GSAP ScrollTrigger Integration -->
    <script>
        // Initialize Lenis after all scripts are loaded
        (function () {
            function initLenis() {
                // Check if Lenis is available
                if (typeof Lenis === 'undefined') {
                    // Retry after a short delay if Lenis isn't loaded yet
                    setTimeout(initLenis, 100);
                    return;
                }

                // Initialize a new Lenis instance for smooth scrolling
                const lenis = new Lenis({
                    duration: 1.2,
                    easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
                    orientation: 'vertical',
                    gestureOrientation: 'vertical',
                    smoothWheel: true,
                    wheelMultiplier: 1,
                    smoothTouch: false,
                    touchMultiplier: 2,
                    infinite: false,
                });

                // Synchronize Lenis scrolling with GSAP's ScrollTrigger plugin
                if (typeof gsap !== 'undefined' && typeof ScrollTrigger !== 'undefined') {
                    // Register ScrollTrigger plugin
                    gsap.registerPlugin(ScrollTrigger);

                    // Synchronize Lenis scrolling with GSAP's ScrollTrigger plugin
                    lenis.on('scroll', ScrollTrigger.update);

                    // Add Lenis's requestAnimationFrame (raf) method to GSAP's ticker
                    // This ensures Lenis's smooth scroll animation updates on each GSAP tick
                    gsap.ticker.add((time) => {
                        lenis.raf(time * 1000); // Convert time from seconds to milliseconds
                    });

                    // Disable lag smoothing in GSAP to prevent any delay in scroll animations
                    gsap.ticker.lagSmoothing(0);
                } else {
                    // Fallback: Use requestAnimationFrame if GSAP is not available
                    function raf(time) {
                        lenis.raf(time);
                        requestAnimationFrame(raf);
                    }
                    requestAnimationFrame(raf);
                }

                // Listen for the scroll event (optional, for debugging)
                lenis.on('scroll', (e) => {
                    // console.log(e); // Uncomment for debugging
                });

                // Make lenis available globally if needed
                window.lenis = lenis;
            }

            // Initialize when DOM is ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initLenis);
            } else {
                // DOM is already ready, but wait a bit for scripts to load
                setTimeout(initLenis, 100);
            }
        })();
    </script>

    <!-- 3D Scroll-Triggered Testimonial Script -->
    <script>
        (function () {
            // Wait for GSAP and DOM to be ready
            function initTestimonials() {
                if (typeof gsap === 'undefined' || typeof ScrollTrigger === 'undefined') {
                    setTimeout(initTestimonials, 100);
                    return;
                }

                const container = document.getElementById('testimonial-scroll-container');
                const row = document.getElementById('testimonial-scroll-row');

                if (!container || !row) return;

                // Testimonial data
                const testimonials = [
                    {
                        avatar: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=150&h=150&fit=crop&crop=face',
                        name: 'Ethan Rivera',
                        title: 'CEO, CodeLoom Technologies',
                        text: 'The customization options in JobCluster are unmatched. We built an entire job search workflow in days instead of weeks.'
                    },
                    {
                        avatar: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face',
                        name: 'Maya Chen',
                        title: 'Product Designer, Visionary Labs',
                        text: 'I\'ve used many job platforms, but JobCluster strikes the perfect balance between flexibility and aesthetics. It\'s a job seeker\'s dream!'
                    },
                    {
                        avatar: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face',
                        name: 'Liam Patel',
                        title: 'Developer, NextGen Interfaces',
                        text: 'From job searching to application tracking, JobCluster makes finding the right opportunity effortless and fun.'
                    },
                    {
                        avatar: 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=150&h=150&fit=crop&crop=face',
                        name: 'Sarah Johnson',
                        title: 'Marketing Lead, TechStart Inc',
                        text: 'JobCluster\'s AI matching helped me find my perfect role in just 2 weeks. The resume scanner is incredibly accurate!'
                    },
                    {
                        avatar: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face',
                        name: 'Alex Thompson',
                        title: 'Software Engineer, CloudScale',
                        text: 'The real-time job alerts and application tracking saved me hours every day. Highly recommend!'
                    },
                    {
                        avatar: 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=150&h=150&fit=crop&crop=face',
                        name: 'Emma Wilson',
                        title: 'Data Scientist, Analytics Pro',
                        text: 'JobCluster\'s skill insights dashboard showed me exactly what I needed to improve. Landed my dream job!'
                    }
                ];

                // Create testimonial card HTML
                function createCard(testimonial, index) {
                    const card = document.createElement('div');
                    card.className = 'testimonial-card';
                    card.setAttribute('data-index', index);
                    card.innerHTML = `
                        <img src="${testimonial.avatar}" alt="${testimonial.name}" class="testimonial-avatar" loading="lazy">
                        <h5 class="testimonial-name">${testimonial.name}</h5>
                        <span class="testimonial-title">${testimonial.title}</span>
                        <p class="testimonial-text">"${testimonial.text}"</p>
                    `;
                    return card;
                }

                // Clear and populate row with duplicated testimonials for infinite scroll
                row.innerHTML = '';
                const duplicates = 3; // Number of times to duplicate for seamless loop
                for (let i = 0; i < duplicates; i++) {
                    testimonials.forEach((testimonial, idx) => {
                        const card = createCard(testimonial, i * testimonials.length + idx);
                        row.appendChild(card);
                    });
                }

                // Calculate total width
                const cards = row.querySelectorAll('.testimonial-card');
                const cardWidth = cards[0].offsetWidth;
                const gap = 24; // 1.5rem = 24px
                const singleSetWidth = testimonials.length * (cardWidth + gap);
                const totalWidth = singleSetWidth * duplicates;

                // Set initial position for seamless loop
                row.style.width = totalWidth + 'px';

                // GSAP ScrollTrigger Animation
                gsap.registerPlugin(ScrollTrigger);

                // Horizontal scroll based on vertical scroll
                const baseVelocity = 2; // Speed multiplier
                let scrollProgress = 0;

                // Create ScrollTrigger
                ScrollTrigger.create({
                    trigger: container,
                    start: 'top bottom',
                    end: 'bottom top',
                    scrub: 1,
                    onUpdate: (self) => {
                        // Calculate horizontal movement based on scroll progress
                        scrollProgress = self.progress * baseVelocity;

                        // Infinite loop: use modulo to wrap around
                        const offset = (scrollProgress * singleSetWidth) % singleSetWidth;

                        // Apply horizontal translation
                        gsap.set(row, {
                            x: -offset,
                            force3D: true
                        });

                        // 3D Parallax Tilt Effect
                        cards.forEach((card, index) => {
                            const cardIndex = parseInt(card.getAttribute('data-index'));
                            const relativePosition = (cardIndex * (cardWidth + gap) - offset) / singleSetWidth;

                            // Normalize position to -1 to 1 range
                            const normalizedPos = (relativePosition % 1) * 2 - 1;

                            // Calculate 3D rotation based on position
                            const rotateY = normalizedPos * 5; // Max 5 degrees tilt
                            const rotateX = Math.abs(normalizedPos) * 2; // Subtle X rotation
                            const translateZ = Math.abs(normalizedPos) * 20; // Depth effect

                            // Apply 3D transform
                            gsap.set(card, {
                                rotationY: rotateY,
                                rotationX: rotateX,
                                z: translateZ,
                                force3D: true,
                                transformStyle: 'preserve-3d'
                            });
                        });
                    }
                });

                // Smooth mouse parallax on hover
                cards.forEach(card => {
                    card.addEventListener('mousemove', (e) => {
                        const rect = card.getBoundingClientRect();
                        const x = e.clientX - rect.left;
                        const y = e.clientY - rect.top;
                        const centerX = rect.width / 2;
                        const centerY = rect.height / 2;
                        const rotateX = (y - centerY) / 10;
                        const rotateY = (centerX - x) / 10;

                        gsap.to(card, {
                            rotationX: rotateX,
                            rotationY: rotateY,
                            duration: 0.3,
                            ease: 'power2.out',
                            force3D: true
                        });
                    });

                    card.addEventListener('mouseleave', () => {
                        gsap.to(card, {
                            rotationX: 0,
                            rotationY: 0,
                            duration: 0.5,
                            ease: 'power2.out',
                            force3D: true
                        });
                    });
                });

                // Refresh ScrollTrigger after content is loaded
                ScrollTrigger.refresh();
            }

            // Initialize when DOM and scripts are ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initTestimonials);
            } else {
                // Wait a bit for GSAP to load
                setTimeout(initTestimonials, 200);
            }
        })();
    </script>

    <!-- Animated Notifications/Messages Script -->
    <script>
        (function () {
            // Notification data
            const notificationsData = [
                {
                    user: { name: "TCS Talent Team", avatarUrl: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face" },
                    message: "Your application for Frontend Engineer has been moved to the technical screening stage.",
                    timestamp: "08:47 AM",
                    priority: "high"
                },
                {
                    user: { name: "Job Match AI", initials: "JM" },
                    message: "11 new job openings match your saved preferences ‚Äî React, TypeScript, Node.js.",
                    timestamp: "09:22 AM",
                    priority: "medium"
                },
                {
                    user: { name: "Infosys Recruiter", avatarUrl: "https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face" },
                    message: "Your resume is under review. We will update you within 48 hours.",
                    timestamp: "10:36 AM",
                    priority: "medium"
                },
                {
                    user: { name: "Application Tracker", initials: "AT" },
                    message: "2 companies viewed your profile today. Keep applying to increase visibility.",
                    timestamp: "01:05 PM",
                    priority: "low"
                },
                {
                    user: { name: "Interview Prep Assistant", initials: "IPA" },
                    message: "Interview tips unlocked: Top 10 React interview questions to practice before screening.",
                    timestamp: "02:41 PM",
                    priority: "success"
                },
                {
                    user: { name: "Wipro Hiring Desk", avatarUrl: "https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=150&h=150&fit=crop&crop=face" },
                    message: "Interview Round-2 scheduled for Tuesday at 11:30 AM.",
                    timestamp: "04:18 PM",
                    priority: "high"
                },
                {
                    user: { name: "Career Insights", initials: "CI" },
                    message: "Data Science and Full-Stack roles are trending this month ‚Äî 27% increase in hiring.",
                    timestamp: "06:57 PM",
                    priority: "low"
                },
                {
                    user: { name: "Application Status Bot", initials: "AS" },
                    message: "Your application to Amazon has been marked as 'Under Review'.",
                    timestamp: "08:33 PM",
                    priority: "medium"
                },
                {
                    user: { name: "AI Skill Advisor", initials: "AI" },
                    message: "Completing a short course on Next.js will increase your job match score by 19%.",
                    timestamp: "09:48 PM",
                    priority: "success"
                },
                {
                    user: { name: "Flipkart Careers", avatarUrl: "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face" },
                    message: "We would like to invite you to complete a short coding assessment.",
                    timestamp: "10:59 PM",
                    priority: "high"
                }
            ];

            // Color mapping for initials avatars
            const avatarColors = [
                'bg-gradient-to-br from-blue-500 to-indigo-600',
                'bg-gradient-to-br from-purple-500 to-pink-600',
                'bg-gradient-to-br from-green-500 to-emerald-600',
                'bg-gradient-to-br from-orange-500 to-red-600',
                'bg-gradient-to-br from-teal-500 to-cyan-600',
                'bg-gradient-to-br from-yellow-500 to-amber-600'
            ];

            function getAvatarColor(initials) {
                const hash = initials.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0);
                return avatarColors[hash % avatarColors.length];
            }

            function createNotificationCard(notification, index) {
                const card = document.createElement('div');
                card.className = `notification-card priority-${notification.priority} notification-enter group`;
                card.setAttribute('data-index', index);
                card.setAttribute('data-id', `notification-${index}`);

                // Avatar
                let avatarHTML = '';
                if (notification.user.avatarUrl) {
                    avatarHTML = `<img src="${notification.user.avatarUrl}" alt="${notification.user.name}" class="notification-avatar" loading="lazy">`;
                } else {
                    const initials = notification.user.initials || notification.user.name.split(' ').map(n => n[0]).join('').slice(0, 2).toUpperCase();
                    const colorClass = getAvatarColor(initials);
                    avatarHTML = `<div class="notification-avatar-initials ${colorClass}">${initials}</div>`;
                }

                // Get icon based on priority
                let iconHTML = '';
                switch (notification.priority) {
                    case 'high':
                        iconHTML = '<i class="fa-solid fa-circle-exclamation text-red-500 text-sm"></i>';
                        break;
                    case 'medium':
                        iconHTML = '<i class="fa-solid fa-bell text-amber-500 text-sm"></i>';
                        break;
                    case 'low':
                        iconHTML = '<i class="fa-solid fa-info-circle text-blue-500 text-sm"></i>';
                        break;
                    case 'success':
                        iconHTML = '<i class="fa-solid fa-check-circle text-green-500 text-sm"></i>';
                        break;
                }

                card.innerHTML = `
                    <div class="flex items-start gap-3">
                        ${avatarHTML}
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center justify-between mb-1">
                                <div class="flex items-center gap-2">
                                    ${iconHTML}
                                    <h3 class="notification-name">${notification.user.name}</h3>
                                </div>
                                <span class="notification-timestamp">${notification.timestamp}</span>
                            </div>
                            <p class="notification-message">${notification.message}</p>
                        </div>
                        <button class="dismiss-btn opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex-shrink-0 w-6 h-6 text-slate-400 hover:text-slate-600 flex items-center justify-center rounded-full hover:bg-slate-100" data-dismiss="${index}">
                            <i class="fa-solid fa-xmark text-xs"></i>
                        </button>
                    </div>
                `;

                // Add click handler
                card.addEventListener('click', function (e) {
                    // Don't trigger if clicking dismiss button
                    if (e.target.closest('.dismiss-btn')) return;
                    // Handle notification click
                    console.log('Notification clicked:', notification);
                });

                // Add dismiss handler
                const dismissBtn = card.querySelector('.dismiss-btn');
                if (dismissBtn) {
                    dismissBtn.addEventListener('click', function (e) {
                        e.stopPropagation();
                        dismissNotification(card, index);
                    });
                }

                return card;
            }

            function dismissNotification(card, index) {
                if (typeof gsap !== 'undefined') {
                    gsap.to(card, {
                        opacity: 0,
                        y: -20,
                        scale: 0.95,
                        filter: 'blur(4px)',
                        duration: 0.4,
                        ease: 'power2.in',
                        onComplete: () => {
                            card.remove();
                            // Check if list is empty and show empty state
                            const messagesList = document.getElementById('messages-list');
                            if (messagesList && messagesList.children.length === 0) {
                                const emptyState = document.getElementById('messages-empty-state');
                                if (emptyState) {
                                    messagesList.classList.add('hidden');
                                    emptyState.classList.remove('hidden');
                                    gsap.fromTo(emptyState,
                                        { opacity: 0, y: 20 },
                                        { opacity: 1, y: 0, duration: 0.4 }
                                    );
                                }
                            }
                        }
                    });
                } else {
                    card.classList.add('notification-exit');
                    setTimeout(() => {
                        card.remove();
                        const messagesList = document.getElementById('messages-list');
                        if (messagesList && messagesList.children.length === 0) {
                            const emptyState = document.getElementById('messages-empty-state');
                            if (emptyState) {
                                messagesList.classList.add('hidden');
                                emptyState.classList.remove('hidden');
                            }
                        }
                    }, 500);
                }
            }

            function renderNotifications() {
                const messagesList = document.getElementById('messages-list');
                const emptyState = document.getElementById('messages-empty-state');

                if (!messagesList || !emptyState) return;

                // Clear existing notifications
                messagesList.innerHTML = '';

                // Hide empty state with fade out
                if (typeof gsap !== 'undefined') {
                    gsap.to(emptyState, {
                        opacity: 0,
                        y: -20,
                        duration: 0.3,
                        onComplete: () => {
                            emptyState.classList.add('hidden');
                            messagesList.classList.remove('hidden');
                            animateNotificationsIn();
                        }
                    });
                } else {
                    emptyState.classList.add('hidden');
                    messagesList.classList.remove('hidden');
                    animateNotificationsIn();
                }
            }

            function animateNotificationsIn() {
                const messagesList = document.getElementById('messages-list');
                if (!messagesList) return;

                // Create and append notification cards
                notificationsData.forEach((notification, index) => {
                    const card = createNotificationCard(notification, index);
                    messagesList.appendChild(card);

                    // Use GSAP for smooth animations if available
                    if (typeof gsap !== 'undefined') {
                        gsap.set(card, {
                            opacity: 0,
                            y: 30,
                            scale: 0.95,
                            filter: 'blur(4px)'
                        });

                        gsap.to(card, {
                            opacity: 1,
                            y: 0,
                            scale: 1,
                            filter: 'blur(0px)',
                            duration: 0.6,
                            delay: index * 0.08,
                            ease: 'power2.out'
                        });
                    } else {
                        // Fallback to CSS animation
                        setTimeout(() => {
                            card.style.animationDelay = `${index * 0.1}s`;
                        }, 50);
                    }
                });
            }

            // Initialize when inbox is opened
            const navInbox = document.getElementById('nav-inbox');
            if (navInbox) {
                navInbox.addEventListener('click', function (e) {
                    e.preventDefault();

                    // Show messages view
                    const messagesView = document.getElementById('view-messages');
                    const uploadResumeView = document.getElementById('view-upload-resume');
                    const profileView = document.getElementById('view-profile');

                    if (messagesView) {
                        messagesView.classList.remove('hidden');
                        if (uploadResumeView) uploadResumeView.classList.add('hidden');
                        if (profileView) profileView.classList.add('hidden');

                        // Render notifications after a short delay for smooth transition
                        setTimeout(() => {
                            renderNotifications();
                        }, 300);
                    }
                });
            }

            // Also render on page load if messages view is already visible
            if (document.getElementById('view-messages') && !document.getElementById('view-messages').classList.contains('hidden')) {
                setTimeout(renderNotifications, 500);
            }
        })();
    </script>

    <!-- Profile Form Handling Script -->
    <script>
        (function () {
            // Animate profile form on load
            function animateProfileForm() {
                const profileView = document.getElementById('view-profile');
                if (!profileView || profileView.classList.contains('hidden')) return;

                const fadeElements = profileView.querySelectorAll('.profile-fade-up');

                if (typeof gsap !== 'undefined') {
                    gsap.fromTo(fadeElements,
                        {
                            opacity: 0,
                            y: 30
                        },
                        {
                            opacity: 1,
                            y: 0,
                            duration: 0.6,
                            stagger: 0.1,
                            ease: 'power2.out',
                            delay: 0.2
                        }
                    );
                } else {
                    // Fallback CSS animation
                    fadeElements.forEach((el, index) => {
                        setTimeout(() => {
                            el.style.opacity = '1';
                            el.style.transform = 'translateY(0)';
                        }, index * 100);
                    });
                }
            }

            // Handle profile navigation click
            const navProfile = document.getElementById('nav-profile');
            if (navProfile) {
                navProfile.addEventListener('click', function (e) {
                    e.preventDefault();

                    const profileView = document.getElementById('view-profile');
                    const uploadResumeView = document.getElementById('view-upload-resume');
                    const messagesView = document.getElementById('view-messages');

                    if (profileView) {
                        profileView.classList.remove('hidden');
                        if (uploadResumeView) uploadResumeView.classList.add('hidden');
                        if (messagesView) messagesView.classList.add('hidden');

                        // Animate form after a short delay
                        setTimeout(() => {
                            animateProfileForm();
                        }, 300);
                    }
                });
            }

            // Handle hash navigation to profile section (e.g., from jobs page)
            function navigateToProfileSection() {
                const hash = window.location.hash;
                if (hash === '#view-profile') {
                    const profileView = document.getElementById('view-profile');
                    const sectionMyProfile = document.getElementById('section-my-profile');
                    const uploadResumeView = document.getElementById('view-upload-resume');
                    const messagesView = document.getElementById('view-messages');
                    const resumeHistoryView = document.getElementById('view-resume-history');
                    const findJobsView = document.getElementById('view-find-jobs');
                    const buildResumeView = document.getElementById('view-build-resume');

                    // Hide all sections
                    document.querySelectorAll('.dashboard-section').forEach(section => {
                        section.classList.remove('active');
                        section.classList.add('hidden');
                    });

                    // Hide all views
                    if (uploadResumeView) uploadResumeView.classList.add('hidden');
                    if (messagesView) messagesView.classList.add('hidden');
                    if (resumeHistoryView) resumeHistoryView.classList.add('hidden');
                    if (findJobsView) findJobsView.classList.add('hidden');
                    if (buildResumeView) buildResumeView.classList.add('hidden');

                    // Show profile section
                    if (sectionMyProfile) {
                        sectionMyProfile.classList.remove('hidden');
                        sectionMyProfile.classList.add('active');
                    }
                    if (profileView) {
                        profileView.classList.remove('hidden');

                        // Animate form after a short delay
                        setTimeout(() => {
                            animateProfileForm();
                        }, 300);
                    }

                    // Update nav active state
                    const navProfile = document.getElementById('nav-profile');
                    const allNavs = document.querySelectorAll('nav a');
                    allNavs.forEach(nav => {
                        nav.classList.remove('bg-blue-50', 'text-blue-700', 'font-medium');
                        nav.classList.add('text-slate-600', 'hover:bg-slate-50', 'hover:text-slate-900');
                    });
                    if (navProfile) {
                        navProfile.classList.remove('text-slate-600', 'hover:bg-slate-50', 'hover:text-slate-900');
                        navProfile.classList.add('bg-blue-50', 'text-blue-700', 'font-medium');
                    }
                } else if (hash === '#view-messages') {
                    // Handle navigation to messages/inbox section
                    const messagesView = document.getElementById('view-messages');
                    const sectionInbox = document.getElementById('section-inbox');
                    const uploadResumeView = document.getElementById('view-upload-resume');
                    const profileView = document.getElementById('view-profile');
                    const resumeHistoryView = document.getElementById('view-resume-history');
                    const findJobsView = document.getElementById('view-find-jobs');
                    const buildResumeView = document.getElementById('view-build-resume');

                    // Hide all sections
                    document.querySelectorAll('.dashboard-section').forEach(section => {
                        section.classList.remove('active');
                        section.classList.add('hidden');
                    });

                    // Hide all views
                    if (uploadResumeView) uploadResumeView.classList.add('hidden');
                    if (profileView) profileView.classList.add('hidden');
                    if (resumeHistoryView) resumeHistoryView.classList.add('hidden');
                    if (findJobsView) findJobsView.classList.add('hidden');
                    if (buildResumeView) buildResumeView.classList.add('hidden');

                    // Show messages section
                    if (sectionInbox) {
                        sectionInbox.classList.remove('hidden');
                        sectionInbox.classList.add('active');
                    }
                    if (messagesView) {
                        messagesView.classList.remove('hidden');

                        // Render notifications after a short delay
                        setTimeout(() => {
                            if (typeof renderNotifications === 'function') {
                                renderNotifications();
                            }
                        }, 300);
                    }

                    // Update nav active state
                    const navInbox = document.getElementById('nav-inbox');
                    const allNavs = document.querySelectorAll('nav a');
                    allNavs.forEach(nav => {
                        nav.classList.remove('bg-blue-50', 'text-blue-700', 'font-medium');
                        nav.classList.add('text-slate-600', 'hover:bg-slate-50', 'hover:text-slate-900');
                    });
                    if (navInbox) {
                        navInbox.classList.remove('text-slate-600', 'hover:bg-slate-50', 'hover:text-slate-900');
                        navInbox.classList.add('bg-blue-50', 'text-blue-700', 'font-medium');
                    }
                }
            }

            // Check hash on page load
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', navigateToProfileSection);
            } else {
                navigateToProfileSection();
            }

            // Also handle hash changes
            window.addEventListener('hashchange', navigateToProfileSection);

            // Handle floating labels for select elements
            function initSelectLabels() {
                const selects = document.querySelectorAll('.form-select');
                selects.forEach(select => {
                    const label = select.nextElementSibling;
                    if (!label || !label.classList.contains('form-label')) return;

                    // Function to update label position
                    function updateLabel(floating) {
                        if (floating) {
                            label.style.transform = 'translateY(-1.5rem) translateX(-0.5rem) scale(0.85)';
                            label.style.color = '#3b82f6';
                            label.style.background = 'white';
                            label.style.padding = '0 0.5rem';
                        } else {
                            label.style.transform = '';
                            label.style.color = '#64748b';
                            label.style.background = '';
                            label.style.padding = '';
                        }
                    }

                    // Check if select has a value on load
                    if (select.value && select.value !== '') {
                        updateLabel(true);
                    }

                    select.addEventListener('change', function () {
                        updateLabel(this.value && this.value !== '');
                    });

                    select.addEventListener('focus', function () {
                        updateLabel(true);
                    });

                    select.addEventListener('blur', function () {
                        if (!this.value || this.value === '') {
                            updateLabel(false);
                        }
                    });
                });
            }

            // Form validation using Event Delegation (more robust)
            document.addEventListener('submit', function (e) {
                // Only handle profile form
                if (e.target && e.target.id === 'profile-form') {
                    e.preventDefault();

                    const form = e.target;
                    console.log('Profile form submitted');

                    // Get form data
                    const formData = new FormData(form);
                    const data = Object.fromEntries(formData);

                    // Basic validation
                    const requiredFields = [
                        'firstName', 'lastName', 'email', 'phone', 'location',
                        'jobTitle', 'experience', 'jobType', 'skills', 'availability'
                    ];

                    let isValid = true;
                    const errors = [];

                    requiredFields.forEach(field => {
                        const input = form.querySelector(`[name="${field}"]`);
                        if (!input) {
                            console.warn(`Required field not found: ${field}`);
                            return;
                        }

                        // Check value
                        if (!input.value.trim()) {
                            isValid = false;
                            input.style.borderColor = '#ef4444';
                            errors.push(`${field} is required`);

                            // Reset border color on input
                            input.addEventListener('input', function () {
                                this.style.borderColor = '';
                            }, { once: true });
                        }
                    });

                    if (!isValid) {
                        alert('Please fill in all required fields.');
                        return;
                    }

                    // Email validation
                    const email = data.email;
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (email && !emailRegex.test(email)) {
                        alert('Please enter a valid email address.');
                        return;
                    }

                    // Phone validation (basic)
                    const phone = data.phone;
                    const phoneRegex = /^[\d\s\-\+\(\)]+$/;
                    if (phone && !phoneRegex.test(phone)) {
                        alert('Please enter a valid phone number.');
                        return;
                    }

                    // Success - you can send data to server here
                    console.log('Form data:', data);

                    // Save to localStorage immediately
                    try {
                        localStorage.setItem('userProfile', JSON.stringify(data));
                        console.log('Profile saved to localStorage');
                    } catch (e) {
                        console.error('Error saving to localStorage', e);
                    }

                    const token = localStorage.getItem('jc_token') || localStorage.getItem('token') || localStorage.getItem('jwt');

                    if (!token) {
                        alert('Authentication token not found. Please log in again.');
                        return;
                    }

                    const button = form.querySelector('button[type="submit"]');
                    const originalText = button.innerHTML;

                    // Show loading state
                    button.textContent = 'Saving...';
                    button.disabled = true;

                    fetch('https://jobcluster-1.onrender.com/api/profile', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${token}`
                        },
                        body: JSON.stringify(data)
                    })
                        .then(response => response.json())
                        .then(result => {
                            button.disabled = false;
                            button.innerHTML = originalText;

                            if (result.success) {
                                // Show success message
                                if (typeof gsap !== 'undefined') {
                                    button.innerHTML = '<i class="fa-solid fa-check"></i> Profile Saved!';
                                    button.style.background = '#10b981';

                                    gsap.to(button, {
                                        scale: 1.05,
                                        duration: 0.3,
                                        yoyo: true,
                                        repeat: 1,
                                        onComplete: () => {
                                            setTimeout(() => {
                                                button.innerHTML = originalText;
                                                button.style.background = '';
                                            }, 2000);
                                        }
                                    });
                                } else {
                                    alert('Profile saved successfully!');
                                }
                            } else {
                                alert('Error saving profile: ' + (result.error || 'Unknown error'));
                            }
                        })
                        .catch(error => {
                            console.error('Error:', error);
                            button.disabled = false;
                            button.innerHTML = originalText;
                            alert('Error saving profile. Please try again.');
                        });
                }
            });

            // Handle textarea labels
            function initTextareaLabels() {
                const textareas = document.querySelectorAll('.form-textarea');
                textareas.forEach(textarea => {
                    const label = textarea.nextElementSibling;
                    if (!label || !label.classList.contains('form-label')) return;

                    function updateTextareaLabel(floating) {
                        if (floating) {
                            label.style.transform = 'translateY(-1.5rem) translateX(-0.5rem) scale(0.85)';
                            label.style.color = '#3b82f6';
                            label.style.background = 'white';
                            label.style.padding = '0 0.5rem';
                            textarea.classList.add('has-value');
                        } else {
                            label.style.transform = '';
                            label.style.color = '#64748b';
                            label.style.background = '';
                            label.style.padding = '';
                            textarea.classList.remove('has-value');
                        }
                    }

                    // Check initial value
                    if (textarea.value.trim()) {
                        updateTextareaLabel(true);
                    }

                    textarea.addEventListener('input', function () {
                        updateTextareaLabel(this.value.trim().length > 0);
                    });

                    textarea.addEventListener('focus', function () {
                        updateTextareaLabel(true);
                    });

                    textarea.addEventListener('blur', function () {
                        if (!this.value.trim()) {
                            updateTextareaLabel(false);
                        }
                    });
                });
            }

            // Fetch Profile Data on Load
            async function fetchProfileData() {
                // Helper to populate form
                const populateForm = (profile) => {
                    const formCallback = (name, value) => {
                        const input = document.querySelector(`[name="${name}"]`);
                        if (input) {
                            input.value = value || '';
                            // Trigger events for floating labels
                            input.dispatchEvent(new Event('input', { bubbles: true }));
                            input.dispatchEvent(new Event('change', { bubbles: true }));
                            input.dispatchEvent(new Event('focus', { bubbles: true }));
                            input.dispatchEvent(new Event('blur', { bubbles: true }));
                        }
                    };

                    // Iterate over profile keys and populate form
                    Object.keys(profile).forEach(key => {
                        formCallback(key, profile[key]);
                    });
                };

                // 1. Try loading from localStorage first (Fast)
                try {
                    const localData = localStorage.getItem('userProfile');
                    if (localData) {
                        console.log('Loading profile from localStorage');
                        const profile = JSON.parse(localData);
                        populateForm(profile);
                    }
                } catch (e) {
                    console.error('Error loading profile from localStorage:', e);
                }

                // 2. Try loading from API (Source of Truth)
                try {
                    const token = localStorage.getItem('jc_token') || localStorage.getItem('token') || localStorage.getItem('jwt');
                    if (!token) return;

                    const response = await fetch('https://jobcluster-1.onrender.com/api/profile', {
                        headers: {
                            'Authorization': `Bearer ${token}`
                        }
                    });

                    if (response.ok) {
                        const data = await response.json();
                        if (data.success && data.profile) {
                            populateForm(data.profile);

                            // Update localStorage with fresh data
                            localStorage.setItem('userProfile', JSON.stringify(data.profile));
                        }
                    }
                } catch (error) {
                    console.error('Error loading profile from API:', error);
                }
            }

            // Initialize on DOM ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', function () {
                    initSelectLabels();
                    initTextareaLabels();
                    fetchProfileData(); // Fetch data

                    // Load resume history if available
                    setTimeout(() => {
                        if (typeof loadResumeHistory === 'function') {
                            loadResumeHistory();
                        }
                    }, 100);

                    // Check if profile is already visible
                    setTimeout(animateProfileForm, 500);
                });
            } else {
                initSelectLabels();
                initTextareaLabels();
                fetchProfileData(); // Fetch data

                // Load resume history if available
                setTimeout(() => {
                    if (typeof loadResumeHistory === 'function') {
                        loadResumeHistory();
                    }
                }, 100);

                setTimeout(animateProfileForm, 500);
            }
        })();
    </script>

    <!-- Premium Landing Page Animations -->
    <script>
        (function () {
            // Check for reduced motion preference
            const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

            // Wait for GSAP and DOM to be ready
            function initAnimations() {
                if (typeof gsap === 'undefined' || typeof ScrollTrigger === 'undefined') {
                    setTimeout(initAnimations, 100);
                    return;
                }

                gsap.registerPlugin(ScrollTrigger);

                // Animation configuration
                const config = {
                    duration: prefersReducedMotion ? 0.2 : 0.5,
                    ease: 'power2.out',
                    stagger: 0.1
                };

                // ============================================
                // 1. HERO SECTION - Word-by-word reveal
                // ============================================
                const heroTitle = document.querySelector('.hero-title');
                if (heroTitle && !prefersReducedMotion) {
                    // Get text nodes and spans
                    const textContent = heroTitle.childNodes;
                    const words = [];

                    // Process each node
                    textContent.forEach(node => {
                        if (node.nodeType === Node.TEXT_NODE) {
                            const textWords = node.textContent.split(/(\s+)/);
                            textWords.forEach(word => {
                                if (word.trim()) {
                                    const wordSpan = document.createElement('span');
                                    wordSpan.textContent = word;
                                    wordSpan.style.display = 'inline-block';
                                    wordSpan.style.opacity = '0';
                                    wordSpan.style.transform = 'translateY(20px)';
                                    words.push(wordSpan);
                                } else if (word) {
                                    words.push(document.createTextNode(word));
                                }
                            });
                        } else if (node.nodeType === Node.ELEMENT_NODE && node.tagName === 'SPAN') {
                            // Handle the blue span
                            const spanWords = node.textContent.trim().split(/(\s+)/);
                            spanWords.forEach((word, idx) => {
                                if (word.trim()) {
                                    const wordSpan = document.createElement('span');
                                    wordSpan.textContent = word;
                                    wordSpan.className = node.className; // Preserve blue color
                                    wordSpan.style.display = 'inline-block';
                                    wordSpan.style.opacity = '0';
                                    wordSpan.style.transform = 'translateY(20px)';
                                    words.push(wordSpan);
                                } else if (word) {
                                    words.push(document.createTextNode(word));
                                }
                            });
                        }
                    });

                    // Clear and rebuild
                    heroTitle.innerHTML = '';
                    words.forEach((wordEl, index) => {
                        heroTitle.appendChild(wordEl);

                        // Animate if it's a span
                        if (wordEl.nodeType === Node.ELEMENT_NODE) {
                            gsap.to(wordEl, {
                                opacity: 1,
                                y: 0,
                                duration: config.duration,
                                delay: index * 0.08,
                                ease: config.ease
                            });
                        }
                    });
                } else if (heroTitle) {
                    // Fallback for reduced motion
                    gsap.to(heroTitle, {
                        opacity: 1,
                        y: 0,
                        duration: config.duration,
                        ease: config.ease
                    });
                }

                // Hero subtitle fade-in
                const heroSubtitle = document.querySelector('.hero-subtitle');
                if (heroSubtitle) {
                    gsap.to(heroSubtitle, {
                        opacity: 1,
                        y: 0,
                        duration: config.duration,
                        delay: prefersReducedMotion ? 0 : 0.4,
                        ease: config.ease
                    });
                }

                // Hero button fade-in
                const heroBtn = document.querySelector('.hero-btn');
                if (heroBtn) {
                    gsap.to(heroBtn, {
                        opacity: 1,
                        y: 0,
                        duration: config.duration,
                        delay: prefersReducedMotion ? 0 : 0.6,
                        ease: config.ease
                    });
                }

                // Hero parallax background (if exists)
                const bgVideo = document.getElementById('bg-wave');
                if (bgVideo && !prefersReducedMotion) {
                    gsap.to(bgVideo, {
                        y: 100,
                        scrollTrigger: {
                            trigger: '.hero-section',
                            start: 'top top',
                            end: 'bottom top',
                            scrub: 1
                        }
                    });
                }

                // CTA button hover scale
                const ctaButtons = document.querySelectorAll('.sphere-btn, .magnetic-btn, button[type="submit"]');
                ctaButtons.forEach(btn => {
                    btn.addEventListener('mouseenter', () => {
                        gsap.to(btn, {
                            scale: 1.03,
                            duration: 0.35,
                            ease: 'power2.out'
                        });
                    });
                    btn.addEventListener('mouseleave', () => {
                        gsap.to(btn, {
                            scale: 1,
                            duration: 0.35,
                            ease: 'power2.out'
                        });
                    });
                });

                // ============================================
                // 2. RESUME SCORE SECTION
                // ============================================
                const resumeSection = document.querySelector('#view-upload-resume');
                if (resumeSection) {
                    const resumeHeading = resumeSection.querySelector('.resume-heading');
                    const resumeSubheading = resumeSection.querySelector('.resume-subheading');
                    const resumeImage = resumeSection.querySelector('.machine-wrapper');
                    const resumeUploadBox = resumeSection.querySelector('.resume-upload-box');

                    ScrollTrigger.create({
                        trigger: resumeSection,
                        start: 'top 80%',
                        once: true,
                        onEnter: () => {
                            // Image slides in from bottom
                            if (resumeImage) {
                                gsap.fromTo(resumeImage,
                                    { opacity: 0, y: 60 },
                                    { opacity: 1, y: 0, duration: config.duration, ease: config.ease }
                                );
                            }

                            // Title and paragraph fade-up
                            if (resumeHeading) {
                                gsap.fromTo(resumeHeading,
                                    { opacity: 0, y: 30 },
                                    { opacity: 1, y: 0, duration: config.duration, delay: 0.1, ease: config.ease }
                                );
                            }

                            if (resumeSubheading) {
                                gsap.fromTo(resumeSubheading,
                                    { opacity: 0, y: 30 },
                                    { opacity: 1, x: 0, duration: config.duration, delay: 0.2, ease: config.ease }
                                );
                            }

                            if (resumeUploadBox) {
                                gsap.fromTo(resumeUploadBox,
                                    { opacity: 0, y: 30 },
                                    { opacity: 1, y: 0, duration: config.duration, delay: 0.3, ease: config.ease }
                                );
                            }
                        }
                    });
                }

                // ============================================
                // 3. UNMATCHED FEATURES SECTION
                // ============================================
                const featuresSection = document.querySelector('#features-section');
                if (featuresSection) {
                    const sectionHeader = featuresSection.querySelector('h2');
                    const sectionSubtitle = featuresSection.querySelector('p');
                    const featureCards = featuresSection.querySelectorAll('.feature-card');

                    // Set initial state
                    gsap.set(featureCards, { opacity: 0, y: 40 });
                    if (sectionHeader) gsap.set(sectionHeader, { opacity: 0, y: 30 });
                    if (sectionSubtitle) gsap.set(sectionSubtitle, { opacity: 0, y: 30 });

                    ScrollTrigger.create({
                        trigger: featuresSection,
                        start: 'top 80%',
                        once: true,
                        onEnter: () => {
                            // Header and subtitle fade-up
                            if (sectionHeader) {
                                gsap.to(sectionHeader, {
                                    opacity: 1,
                                    y: 0,
                                    duration: config.duration,
                                    ease: config.ease
                                });
                            }
                            if (sectionSubtitle) {
                                gsap.to(sectionSubtitle, {
                                    opacity: 1,
                                    y: 0,
                                    duration: config.duration,
                                    delay: 0.1,
                                    ease: config.ease
                                });
                            }

                            // Cards stagger fade-up
                            gsap.to(featureCards, {
                                opacity: 1,
                                y: 0,
                                duration: config.duration,
                                stagger: config.stagger,
                                delay: 0.2,
                                ease: config.ease
                            });
                        }
                    });

                    // Icon hover scale
                    featureCards.forEach(card => {
                        const icon = card.querySelector('.feature-icon');
                        if (icon) {
                            card.addEventListener('mouseenter', () => {
                                gsap.to(icon, {
                                    scale: 1.05,
                                    duration: 0.35,
                                    ease: 'power2.out'
                                });
                            });
                            card.addEventListener('mouseleave', () => {
                                gsap.to(icon, {
                                    scale: 1,
                                    duration: 0.35,
                                    ease: 'power2.out'
                                });
                            });
                        }
                    });
                }

                // ============================================
                // CountUp Utility Function (Spring-like animation)
                // ============================================
                function createCountUp(element, options = {}) {
                    const {
                        from = 0,
                        to = 100,
                        duration = 2,
                        delay = 0,
                        direction = 'up',
                        separator = '',
                        onStart = null,
                        onEnd = null,
                        ease = 'power2.out'
                    } = options;

                    if (!element) return null;

                    // Helper to get decimal places
                    function getDecimalPlaces(num) {
                        const str = num.toString();
                        if (str.includes('.')) {
                            const decimals = str.split('.')[1];
                            if (parseInt(decimals) !== 0) {
                                return decimals.length;
                            }
                        }
                        return 0;
                    }

                    const maxDecimals = Math.max(getDecimalPlaces(from), getDecimalPlaces(to));

                    // Format value with separator support
                    function formatValue(value) {
                        const hasDecimals = maxDecimals > 0;
                        const options = {
                            useGrouping: !!separator,
                            minimumFractionDigits: hasDecimals ? maxDecimals : 0,
                            maximumFractionDigits: hasDecimals ? maxDecimals : 0
                        };
                        const formattedNumber = Intl.NumberFormat('en-US', options).format(value);
                        return separator ? formattedNumber.replace(/,/g, separator) : formattedNumber;
                    }

                    // Set initial value
                    const startValue = direction === 'down' ? to : from;
                    element.textContent = formatValue(startValue);

                    // Create animation object
                    const countUpObj = { value: startValue };
                    const targetValue = direction === 'down' ? from : to;

                    // Call onStart callback
                    if (typeof onStart === 'function') {
                        onStart();
                    }

                    // Create GSAP animation with spring-like easing
                    const animation = gsap.to(countUpObj, {
                        value: targetValue,
                        duration: duration,
                        delay: delay,
                        ease: ease,
                        onUpdate: function () {
                            element.textContent = formatValue(countUpObj.value);
                        },
                        onComplete: function () {
                            // Ensure exact final value
                            element.textContent = formatValue(targetValue);
                            if (typeof onEnd === 'function') {
                                onEnd();
                            }
                        }
                    });

                    return {
                        play: () => animation.play(),
                        pause: () => animation.pause(),
                        restart: () => animation.restart(),
                        kill: () => animation.kill()
                    };
                }

                // ============================================
                // 4. EVERYTHING YOU NEED SECTION (Stats)
                // ============================================
                const statsSection = document.querySelector('#everything-section');
                if (statsSection) {
                    const sectionHeader = statsSection.querySelector('h2');
                    const sectionSubtitle = statsSection.querySelector('p');
                    const counterValue = statsSection.querySelector('.counter-value');
                    const metricNumber = statsSection.querySelector('.metric-number');
                    const metricText = statsSection.querySelector('.metric-number')?.parentElement?.nextElementSibling;

                    // Set initial state for headers
                    if (sectionHeader) gsap.set(sectionHeader, { opacity: 0, y: 30 });
                    if (sectionSubtitle) gsap.set(sectionSubtitle, { opacity: 0, y: 30 });
                    if (metricText) gsap.set(metricText, { opacity: 0, y: 10 });

                    ScrollTrigger.create({
                        trigger: statsSection,
                        start: 'top 80%',
                        once: true,
                        onEnter: () => {
                            // Header and subtitle fade-up
                            if (sectionHeader) {
                                gsap.to(sectionHeader, {
                                    opacity: 1,
                                    y: 0,
                                    duration: config.duration,
                                    ease: config.ease
                                });
                            }
                            if (sectionSubtitle) {
                                gsap.to(sectionSubtitle, {
                                    opacity: 1,
                                    y: 0,
                                    duration: config.duration,
                                    delay: 0.1,
                                    ease: config.ease
                                });
                            }

                            if (counterValue && !prefersReducedMotion) {
                                // Fade-in the metric number first
                                if (metricNumber) {
                                    gsap.fromTo(metricNumber,
                                        { opacity: 0, y: 20 },
                                        { opacity: 1, y: 0, duration: config.duration, delay: 0.2, ease: config.ease }
                                    );
                                }

                                // Use CountUp utility for smooth spring-like animation
                                createCountUp(counterValue, {
                                    from: 0,
                                    to: 87,
                                    duration: 2,
                                    delay: 0.4,
                                    direction: 'up',
                                    separator: '',
                                    ease: 'power2.out',
                                    onStart: () => {
                                        // Optional: callback when animation starts
                                    },
                                    onEnd: () => {
                                        // Optional: callback when animation ends
                                    }
                                });

                                // Fade-in the "Faster Job Matches" text after count-up starts
                                if (metricText) {
                                    gsap.to(metricText, {
                                        opacity: 1,
                                        y: 0,
                                        duration: config.duration,
                                        delay: 0.6,
                                        ease: config.ease
                                    });
                                }
                            } else if (counterValue) {
                                // Reduced motion: show instantly
                                counterValue.textContent = '87';
                                if (metricNumber) {
                                    gsap.to(metricNumber, {
                                        opacity: 1,
                                        y: 0,
                                        duration: config.duration,
                                        delay: 0.2,
                                        ease: config.ease
                                    });
                                }
                                if (metricText) {
                                    gsap.to(metricText, {
                                        opacity: 1,
                                        y: 0,
                                        duration: config.duration,
                                        delay: 0.3,
                                        ease: config.ease
                                    });
                                }
                            }
                        }
                    });
                }

                // ============================================
                // 4.5. 4-STEP PLAN STAIRCASE ANIMATION
                // ============================================
                const stepPlanSection = document.querySelector('#everything-section');
                if (stepPlanSection) {
                    // Find the step plan container - try multiple selectors
                    let stepPlanContainer = stepPlanSection.querySelector('[class*="col-span-8"]');
                    if (!stepPlanContainer) {
                        // Fallback: find container with step cards
                        const firstStepCard = stepPlanSection.querySelector('.step-card');
                        if (firstStepCard) {
                            stepPlanContainer = firstStepCard.closest('[class*="col-span"]') ||
                                firstStepCard.closest('.grid')?.parentElement;
                        }
                    }

                    if (stepPlanContainer) {
                        const stepPlanTitle = stepPlanContainer.querySelector('h3');
                        const stepPlanSubtitle = stepPlanContainer.querySelector('p');
                        const stepCards = stepPlanContainer.querySelectorAll('.step-card');

                        // Set initial state for title and subtitle
                        if (stepPlanTitle) gsap.set(stepPlanTitle, { opacity: 0, y: 30 });
                        if (stepPlanSubtitle) gsap.set(stepPlanSubtitle, { opacity: 0, y: 30 });

                        if (stepCards.length === 4 && !prefersReducedMotion) {
                            // Set initial state - cards start from bottom (120px below) with opacity 0
                            stepCards.forEach((card) => {
                                gsap.set(card, {
                                    opacity: 0,
                                    y: 120
                                });
                            });

                            ScrollTrigger.create({
                                trigger: stepPlanContainer,
                                start: 'top 80%',
                                once: true,
                                onEnter: () => {
                                    // Animate title and subtitle first
                                    if (stepPlanTitle) {
                                        gsap.to(stepPlanTitle, {
                                            opacity: 1,
                                            y: 0,
                                            duration: config.duration,
                                            ease: config.ease
                                        });
                                    }
                                    if (stepPlanSubtitle) {
                                        gsap.to(stepPlanSubtitle, {
                                            opacity: 1,
                                            y: 0,
                                            duration: config.duration,
                                            delay: 0.1,
                                            ease: config.ease
                                        });
                                    }

                                    // Animation durations for each step (increasing)
                                    const durations = [0.55, 0.6, 0.65, 0.7];
                                    let cumulativeDelay = 0.2; // Start after title/subtitle

                                    stepCards.forEach((card, index) => {
                                        // Animate each card upward from bottom
                                        gsap.to(card, {
                                            opacity: 1,
                                            y: 0,
                                            duration: durations[index],
                                            delay: cumulativeDelay,
                                            ease: 'power2.out',
                                            onComplete: () => {
                                                // Add subtle hover scale effect after animation completes
                                                // Only add once to prevent duplicate listeners
                                                if (!card.dataset.hoverAdded) {
                                                    card.dataset.hoverAdded = 'true';
                                                    card.addEventListener('mouseenter', function () {
                                                        gsap.to(this, {
                                                            scale: 1.02,
                                                            duration: 0.35,
                                                            ease: 'power2.out',
                                                            force3D: true
                                                        });
                                                    });
                                                    card.addEventListener('mouseleave', function () {
                                                        gsap.to(this, {
                                                            scale: 1,
                                                            duration: 0.35,
                                                            ease: 'power2.out',
                                                            force3D: true
                                                        });
                                                    });
                                                }
                                            }
                                        });

                                        // Add 200ms delay before next card starts (after previous finishes)
                                        cumulativeDelay += durations[index] + 0.2;
                                    });
                                }
                            });
                        } else if (stepCards.length === 4) {
                            // Reduced motion: just fade in without movement
                            gsap.set(stepCards, { opacity: 0 });
                            ScrollTrigger.create({
                                trigger: stepPlanContainer,
                                start: 'top 80%',
                                once: true,
                                onEnter: () => {
                                    if (stepPlanTitle) {
                                        gsap.to(stepPlanTitle, {
                                            opacity: 1,
                                            y: 0,
                                            duration: 0.3,
                                            ease: 'power2.out'
                                        });
                                    }
                                    if (stepPlanSubtitle) {
                                        gsap.to(stepPlanSubtitle, {
                                            opacity: 1,
                                            y: 0,
                                            duration: 0.3,
                                            delay: 0.1,
                                            ease: 'power2.out'
                                        });
                                    }
                                    gsap.to(stepCards, {
                                        opacity: 1,
                                        duration: 0.3,
                                        stagger: 0.1,
                                        ease: 'power2.out'
                                    });
                                }
                            });
                        }
                    }
                }

                // ============================================
                // 5. PRICING PLANS
                // ============================================
                const pricingSection = document.querySelector('#pricing');
                if (pricingSection) {
                    const sectionHeader = pricingSection.querySelector('h2');
                    const sectionSubtitle = pricingSection.querySelector('p');
                    const pricingCards = pricingSection.querySelectorAll('.pricing-card');

                    // Set initial state
                    gsap.set(pricingCards, { opacity: 0, y: 40 });
                    if (sectionHeader) gsap.set(sectionHeader, { opacity: 0, y: 30 });
                    if (sectionSubtitle) gsap.set(sectionSubtitle, { opacity: 0, y: 30 });

                    ScrollTrigger.create({
                        trigger: pricingSection,
                        start: 'top 80%',
                        once: true,
                        onEnter: () => {
                            // Header and subtitle fade-up
                            if (sectionHeader) {
                                gsap.to(sectionHeader, {
                                    opacity: 1,
                                    y: 0,
                                    duration: config.duration,
                                    ease: config.ease
                                });
                            }
                            if (sectionSubtitle) {
                                gsap.to(sectionSubtitle, {
                                    opacity: 1,
                                    y: 0,
                                    duration: config.duration,
                                    delay: 0.1,
                                    ease: config.ease
                                });
                            }

                            // Cards stagger fade-up
                            gsap.to(pricingCards, {
                                opacity: 1,
                                y: 0,
                                duration: config.duration,
                                stagger: config.stagger,
                                delay: 0.2,
                                ease: config.ease
                            });
                        }
                    });

                    // Hover scale and shadow glow
                    pricingCards.forEach(card => {
                        card.addEventListener('mouseenter', () => {
                            gsap.to(card, {
                                scale: 1.03,
                                boxShadow: '0 30px 70px -15px rgba(59, 130, 246, 0.25)',
                                duration: 0.35,
                                ease: 'power2.out'
                            });
                        });
                        card.addEventListener('mouseleave', () => {
                            gsap.to(card, {
                                scale: 1,
                                boxShadow: '',
                                duration: 0.35,
                                ease: 'power2.out'
                            });
                        });
                    });

                    // Toggle buttons fade-in
                    const toggleButtons = pricingSection.querySelectorAll('#monthly-btn, #yearly-btn');
                    if (toggleButtons.length > 0) {
                        gsap.fromTo(toggleButtons,
                            { opacity: 0 },
                            { opacity: 1, duration: config.duration, delay: 0.2, ease: config.ease }
                        );
                    }
                }

                // ============================================
                // 6. TESTIMONIALS - Cross-fade
                // ============================================
                const testimonialsSection = document.querySelector('#testimonials-section');
                if (testimonialsSection) {
                    const testimonialHeader = testimonialsSection.querySelector('h2');
                    const testimonialSubtitle = testimonialsSection.querySelector('p');

                    ScrollTrigger.create({
                        trigger: testimonialsSection,
                        start: 'top 80%',
                        once: true,
                        onEnter: () => {
                            // Header and subtitle fade-up
                            if (testimonialHeader) {
                                gsap.fromTo(testimonialHeader,
                                    { opacity: 0, y: 30 },
                                    { opacity: 1, y: 0, duration: config.duration, ease: config.ease }
                                );
                            }
                            if (testimonialSubtitle) {
                                gsap.fromTo(testimonialSubtitle,
                                    { opacity: 0, y: 30 },
                                    { opacity: 1, y: 0, duration: config.duration, delay: 0.1, ease: config.ease }
                                );
                            }
                        }
                    });

                    // Cross-fade for testimonial cards (if carousel exists)
                    if (!prefersReducedMotion) {
                        const testimonialCards = testimonialsSection.querySelectorAll('.testimonial-card');
                        if (testimonialCards.length > 0) {
                            // Animate cards on scroll
                            gsap.fromTo(testimonialCards,
                                { opacity: 0, y: 40 },
                                {
                                    opacity: 1,
                                    y: 0,
                                    duration: config.duration,
                                    stagger: 0.1,
                                    scrollTrigger: {
                                        trigger: testimonialsSection,
                                        start: 'top 80%',
                                        once: true
                                    },
                                    ease: config.ease
                                }
                            );
                        }
                    }
                }

                // ============================================
                // 7. FINAL CALL-TO-ACTION
                // ============================================
                const finalCTA = document.querySelector('#footer-cta');
                if (finalCTA) {
                    const ctaHeading = finalCTA.querySelector('h2');
                    const ctaButton = finalCTA.querySelector('button, .magnetic-btn');
                    const footerBg = document.querySelector('footer');

                    ScrollTrigger.create({
                        trigger: finalCTA,
                        start: 'top 80%',
                        once: true,
                        onEnter: () => {
                            // Background gradient fade-in
                            if (footerBg) {
                                gsap.fromTo(footerBg,
                                    { opacity: 0 },
                                    { opacity: 1, duration: config.duration * 1.5, ease: config.ease }
                                );
                            }

                            // Heading zoom-in reveal (subtle)
                            if (ctaHeading) {
                                gsap.fromTo(ctaHeading,
                                    { opacity: 0, scale: 0.95 },
                                    { opacity: 1, scale: 1, duration: config.duration, delay: 0.2, ease: config.ease }
                                );
                            }

                            // Button fade-in
                            if (ctaButton) {
                                gsap.fromTo(ctaButton,
                                    { opacity: 0, y: 20 },
                                    { opacity: 1, y: 0, duration: config.duration, delay: 0.4, ease: config.ease }
                                );
                            }
                        }
                    });
                }

                // Refresh ScrollTrigger after all animations are set up
                ScrollTrigger.refresh();
            }

            // Initialize animations
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initAnimations);
            } else {
                setTimeout(initAnimations, 200);
            }
        })();
    </script>

    <!-- Resume Upload and ATS Analysis Script - LOCAL (No External AI) -->
    <script>
        (function () {
            // ============================================================
            // üõ°Ô∏è MASTER PAGE RELOAD PREVENTION - RUNS FIRST
            // ============================================================
            // Prevent ALL form submissions globally
            // Prevent ALL form submissions globally (EXCEPT specific forms)
            document.addEventListener('submit', function (e) {
                // Allow profile form and auth forms to be handled by their specific listeners
                if (e.target && (e.target.id === 'profile-form' || e.target.id === 'signinForm' || e.target.id === 'signupForm')) {
                    return;
                }

                e.preventDefault();
                e.stopPropagation();
                e.stopImmediatePropagation();
                console.log("‚õî Form submission BLOCKED globally");
                return false;
            }, true);

            // Also prevent on window level
            window.addEventListener('submit', function (e) {
                // Allow profile form and auth forms
                if (e.target && (e.target.id === 'profile-form' || e.target.id === 'signinForm' || e.target.id === 'signupForm')) {
                    return;
                }

                e.preventDefault();
                e.stopPropagation();
                e.stopImmediatePropagation();
                console.log("‚õî Form submission BLOCKED on window");
                return false;
            }, true);

            // Prevent page reload during analysis
            let isProcessing = false;

            // Additional safeguard: Prevent any navigation on hash change
            window.addEventListener('hashchange', function (e) {
                if (isProcessing) {
                    e.preventDefault();
                    window.location.hash = '';
                    return false;
                }
            });

            // Prevent any popstate navigation during analysis
            window.addEventListener('popstate', function (e) {
                if (isProcessing) {
                    e.preventDefault();
                    history.pushState(null, '', window.location.href);
                    return false;
                }
            });

            // Disable browser reload popup
            window.onbeforeunload = null;

            // ============================================================
            // üî• GLOBAL FILE STORAGE - FIX FOR FILE LOSS ISSUE
            // ============================================================
            let uploadedResumeFile = null;  // Stores file globally

            // ============================================================
            // RESUME HISTORY STORAGE FUNCTIONS
            // ============================================================

            /**
             * Get resume history from localStorage
             */
            function getResumeHistoryFromStorage() {
                try {
                    const history = localStorage.getItem('resumeHistory');
                    return history ? JSON.parse(history) : [];
                } catch (error) {
                    console.error('Error reading resume history from localStorage:', error);
                    return [];
                }
            }

            /**
             * Get current resume from localStorage
             */
            function getCurrentResumeFromStorage() {
                try {
                    const current = localStorage.getItem('currentResume');
                    return current ? JSON.parse(current) : null;
                } catch (error) {
                    console.error('Error reading current resume from localStorage:', error);
                    return null;
                }
            }

            // Make functions globally available
            window.getResumeHistoryFromStorage = getResumeHistoryFromStorage;
            window.getCurrentResumeFromStorage = getCurrentResumeFromStorage;

            // ============================================================
            // DOM ELEMENTS
            // ============================================================
            let resumeInput = document.getElementById('resumeUpload');
            let uploadLabel = document.getElementById('uploadLabel');
            let loadingSection = document.getElementById('loadingSection');
            let resultsSection = document.getElementById('resultsSection');

            // ============================================================
            // FILE SELECTION HANDLER - Stores file globally
            // ============================================================
            window.handleFileSelect = function (e) {
                if (e) {
                    e.preventDefault();
                    e.stopPropagation();
                }

                const fileInput = document.getElementById("resumeUpload");
                if (fileInput && fileInput.files && fileInput.files[0]) {
                    // üî• Store file globally so it's not lost
                    uploadedResumeFile = fileInput.files[0];
                    console.log("üìÑ File stored globally:", uploadedResumeFile.name);

                    // Update button text to show file name
                    const chooseBtn = document.getElementById('uploadResumeBtn');
                    const chooseBtnSpan = chooseBtn?.querySelector('span');
                    if (chooseBtnSpan) {
                        const shortName = uploadedResumeFile.name.length > 25
                            ? uploadedResumeFile.name.substring(0, 22) + '...'
                            : uploadedResumeFile.name;
                        chooseBtnSpan.textContent = shortName;
                    }

                    // Show file name display
                    const fileNameDisplay = document.getElementById('selectedFileName');
                    const fileNameText = document.getElementById('fileNameText');
                    if (fileNameDisplay && fileNameText) {
                        fileNameText.textContent = uploadedResumeFile.name;
                        fileNameDisplay.classList.remove('hidden');
                    }

                    // Show Start Analysis button
                    const startBtn = document.getElementById('startAnalysisBtn');
                    if (startBtn) {
                        startBtn.classList.remove('hidden');
                        startBtn.style.display = 'flex';
                    }
                }
                return false;
            }

            // ============================================================
            // UPDATE STATUS TEXT IN LOADING SECTION
            // ============================================================
            function updateStatus(text) {
                console.log("üìä Status:", text);
                const statusEl = document.getElementById('analysisStatus');
                if (statusEl) {
                    statusEl.textContent = text;
                }
            }

            // ============================================================
            // START ANALYSIS - Uses globally stored file
            // ============================================================
            window.startAnalysis = async function (e) {
                // üî• CRITICAL: Prevent ALL default behaviors that could cause reload
                if (e) {
                    e.preventDefault();
                    e.stopPropagation();
                    e.stopImmediatePropagation();
                }

                // Additional safeguard: prevent any navigation
                if (e && e.target) {
                    e.target.preventDefault?.();
                }

                console.log("üöÄ Start Analysis clicked - NO RELOAD");

                // üî• Use the globally stored file
                if (!uploadedResumeFile) {
                    alert("‚ö†Ô∏è Please upload a resume first!");
                    return false;
                }

                console.log("üìÑ Using stored file:", uploadedResumeFile.name);

                // Validate file
                const allowedExtensions = ['.pdf', '.docx', '.doc', '.txt', '.jpg', '.jpeg', '.png'];
                const fileExtension = '.' + uploadedResumeFile.name.split('.').pop().toLowerCase();

                if (!allowedExtensions.includes(fileExtension)) {
                    alert('Please upload a PDF, DOCX, DOC, TXT, JPG, or PNG file.');
                    return false;
                }

                if (uploadedResumeFile.size > 5 * 1024 * 1024) {
                    alert('File size must be less than 5MB.');
                    return false;
                }

                isProcessing = true;

                // Disable buttons
                const chooseBtn = document.getElementById('uploadResumeBtn');
                const startBtn = document.getElementById('startAnalysisBtn');
                if (chooseBtn) {
                    chooseBtn.disabled = true;
                    chooseBtn.style.opacity = '0.6';
                }
                if (startBtn) {
                    startBtn.disabled = true;
                    startBtn.classList.remove('animate-pulse');
                    const startBtnSpan = startBtn.querySelector('span');
                    if (startBtnSpan) startBtnSpan.textContent = 'Analyzing...';
                }

                // Hide file name display
                const fileNameDisplay = document.getElementById('selectedFileName');
                if (fileNameDisplay) fileNameDisplay.classList.add('hidden');

                // Show loading animation
                showLoadingAnimation();
                updateStatus('Uploading resume...');

                try {
                    // üî• Create FormData with the stored file
                    const formData = new FormData();
                    formData.append("resume", uploadedResumeFile);

                    console.log("üì§ Sending to backend...");
                    updateStatus('Analyzing your resume...');

                    // Send to LOCAL ATS backend (no external AI)
                    // Use AbortController to prevent cancellation on reload
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 60000); // 60s timeout

                    // Get token for authenticated users
                    const token = localStorage.getItem('jc_token') ||
                        localStorage.getItem('token') ||
                        localStorage.getItem('jwt') ||
                        localStorage.getItem('authToken');

                    const headers = {};
                    if (token) {
                        headers['Authorization'] = `Bearer ${token}`;
                    }

                    const response = await fetch("https://jobcluster-6.onrender.com/api/resume/ats", {
                        method: "POST",
                        headers: headers,
                        body: formData,
                        signal: controller.signal,
                        // Prevent browser from caching
                        cache: 'no-store',
                        // Keep connection alive
                        keepalive: false
                    });

                    clearTimeout(timeoutId);

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    console.log("‚úÖ Analysis result received:", result);
                    console.log("‚úÖ Success:", result.success);
                    console.log("‚úÖ Score:", result.score);

                    if (!result.success) {
                        throw new Error(result.error || 'Analysis failed');
                    }

                    // Hide loading, show results
                    isProcessing = false;
                    hideLoading();
                    displayResults(result);

                    // Re-enable buttons but DON'T reset the UI (keep results visible)
                    const chooseBtn = document.getElementById('uploadResumeBtn');
                    const startBtn = document.getElementById('startAnalysisBtn');
                    if (chooseBtn) {
                        chooseBtn.disabled = false;
                        chooseBtn.style.opacity = '1';
                    }
                    if (startBtn) {
                        startBtn.disabled = false;

                        // Replace Start Analysis button with Find Jobs button after analysis completes
                        const btnIcon = startBtn.querySelector('i');
                        const startBtnSpan = startBtn.querySelector('span');

                        if (btnIcon) {
                            btnIcon.className = 'fa-solid fa-briefcase';
                        }
                        if (startBtnSpan) {
                            startBtnSpan.textContent = 'Find Jobs';
                        }

                        // Remove old click handler by cloning
                        const newFindJobsBtn = startBtn.cloneNode(true);
                        newFindJobsBtn.id = 'startAnalysisBtn';
                        startBtn.parentNode.replaceChild(newFindJobsBtn, startBtn);

                        // Add click handler for Find Jobs
                        newFindJobsBtn.addEventListener('click', function (e) {
                            e.preventDefault();
                            e.stopPropagation();
                            e.stopImmediatePropagation();

                            // Redirect to jobs page with location=India for auto-search
                            const jobsUrl = '../../jobs/jobs.html?location=India';
                            window.location.href = jobsUrl;
                        });

                        // Keep button visible
                        newFindJobsBtn.classList.remove('hidden');
                        newFindJobsBtn.style.display = 'flex';
                        newFindJobsBtn.classList.remove('animate-pulse');
                    }

                    // Keep selected file name visible
                    const fileNameDisplay = document.getElementById('selectedFileName');
                    if (fileNameDisplay && uploadedResumeFile) {
                        fileNameDisplay.classList.remove('hidden');
                    }

                    // Store resume history in localStorage (without the file itself)
                    try {
                        const resumeHistoryEntry = {
                            id: Date.now().toString(),
                            fileName: uploadedResumeFile?.name || 'Unknown',
                            fileSize: uploadedResumeFile?.size || 0,
                            uploadedAt: new Date().toISOString(),
                            analyzedAt: new Date().toISOString(),
                            analysisResult: {
                                score: result.score,
                                summary: result.summary || '',
                                skills: result.skills || [],
                                strengths: result.strengths || [],
                                weaknesses: result.weaknesses || [],
                                suggestions: result.suggestions || [],
                                experience: result.experience || '',
                                education: result.education || ''
                            }
                        };

                        // Get existing history from localStorage
                        const existingHistory = JSON.parse(localStorage.getItem('resumeHistory') || '[]');

                        // Add new entry at the beginning
                        existingHistory.unshift(resumeHistoryEntry);

                        // Keep only last 50 entries to avoid localStorage size limits
                        const maxEntries = 50;
                        if (existingHistory.length > maxEntries) {
                            existingHistory.splice(maxEntries);
                        }

                        // Save back to localStorage
                        localStorage.setItem('resumeHistory', JSON.stringify(existingHistory));

                        console.log("‚úÖ Resume history saved to localStorage");

                        // Also store the current resume metadata for quick access
                        localStorage.setItem('currentResume', JSON.stringify({
                            fileName: uploadedResumeFile?.name,
                            analyzedAt: new Date().toISOString(),
                            score: result.score
                        }));

                        // Refresh resume history display if user is on that section
                        setTimeout(() => {
                            const historySection = document.getElementById('section-resume-history');
                            if (historySection && historySection.classList.contains('active')) {
                                // Reload resume history to show the new entry
                                if (typeof loadResumeHistory === 'function') {
                                    loadResumeHistory();
                                }
                            }
                        }, 500);
                    } catch (storageError) {
                        console.warn('‚ö†Ô∏è Could not save resume history to localStorage:', storageError);
                        // Don't fail the analysis if localStorage fails
                    }

                    // DON'T clear uploadedResumeFile here - keep it for potential re-analysis
                    // Only clear it when user explicitly uploads a new file or resets

                    console.log("‚úÖ Analysis complete - results displayed");

                } catch (error) {
                    console.error('‚ùå Analysis Error:', error);
                    isProcessing = false;
                    hideLoading();

                    // Show error message
                    const errorMsg = error.message || "Please try again.";
                    alert("Error analyzing resume: " + errorMsg);

                    // Re-enable buttons on error
                    const chooseBtn = document.getElementById('uploadResumeBtn');
                    const startBtn = document.getElementById('startAnalysisBtn');
                    if (chooseBtn) {
                        chooseBtn.disabled = false;
                        chooseBtn.style.opacity = '1';
                    }
                    if (startBtn) {
                        startBtn.disabled = false;
                        const startBtnSpan = startBtn.querySelector('span');
                        if (startBtnSpan) startBtnSpan.textContent = 'Start Analysis';
                    }
                }

                // CRITICAL: Always return false to prevent any navigation
                return false;
            }

            // ============================================================
            // HELPER FUNCTIONS
            // ============================================================
            function showLoadingAnimation() {
                uploadLabel = document.getElementById('uploadLabel');
                loadingSection = document.getElementById('loadingSection');

                if (uploadLabel) {
                    uploadLabel.style.display = 'none';
                }
                if (loadingSection) {
                    loadingSection.classList.remove('hidden');
                    loadingSection.style.display = 'flex';
                }
            }

            function hideLoading() {
                loadingSection = document.getElementById('loadingSection');
                if (loadingSection) {
                    loadingSection.classList.add('hidden');
                    loadingSection.style.display = 'none';
                }
            }

            function enableUploadButton() {
                // Reset Choose button
                const chooseBtn = document.getElementById('uploadResumeBtn');
                if (chooseBtn) {
                    chooseBtn.disabled = false;
                    chooseBtn.style.opacity = '1';
                    const btnSpan = chooseBtn.querySelector('span');
                    if (btnSpan) {
                        btnSpan.textContent = 'Choose Resume File';
                    }
                }

                // Hide Start Analysis button
                const startBtn = document.getElementById('startAnalysisBtn');
                if (startBtn) {
                    startBtn.classList.add('hidden');
                    startBtn.disabled = false;
                    startBtn.classList.add('animate-pulse');
                    const startBtnSpan = startBtn.querySelector('span');
                    if (startBtnSpan) startBtnSpan.textContent = 'Start Analysis';
                }

                // Clear file input
                const fileInput = document.getElementById('resumeUpload');
                if (fileInput) fileInput.value = '';

                // Clear stored file only when explicitly resetting (not after analysis)
                // This allows the file to persist after analysis for history tracking
                uploadedResumeFile = null;

                // Clear current resume from localStorage when resetting
                localStorage.removeItem('currentResume');
            }

            // ============================================================
            // EVENT LISTENERS SETUP
            // ============================================================
            function setupEventListeners() {
                console.log("üîß Setting up event listeners...");

                resumeInput = document.getElementById('resumeUpload');
                const chooseBtn = document.getElementById('uploadResumeBtn');
                const startBtn = document.getElementById('startAnalysisBtn');
                const uploadBox = document.querySelector('.resume-upload-box');

                // File input change handler
                if (resumeInput) {
                    resumeInput.onclick = function (e) { e.stopPropagation(); };
                    resumeInput.onchange = function (e) {
                        e.preventDefault();
                        e.stopPropagation();
                        handleFileSelect(e);
                        return false;
                    };
                }

                if (chooseBtn) {
                    chooseBtn.type = 'button';
                }

                if (startBtn) {
                    startBtn.type = 'button'; // CRITICAL: Must be type="button" not "submit"

                    // Remove any existing listeners by cloning
                    const newStartBtn = startBtn.cloneNode(true);
                    startBtn.parentNode.replaceChild(newStartBtn, startBtn);

                    // Add bulletproof click handler
                    newStartBtn.addEventListener('click', function (e) {
                        // Prevent ALL default behaviors
                        e.preventDefault();
                        e.stopPropagation();
                        e.stopImmediatePropagation();

                        // Prevent any form submission
                        if (e.target && e.target.form) {
                            e.target.form.preventDefault?.();
                        }

                        console.log("üîµ Start Analysis button clicked - handler fired");

                        // Call analysis function
                        if (typeof startAnalysis === 'function') {
                            startAnalysis(e);
                        } else {
                            console.error("‚ùå startAnalysis function not found!");
                        }

                        return false;
                    }, true); // Use capture phase for early interception
                }

                // Prevent form submission
                if (uploadBox) {
                    uploadBox.onsubmit = function (e) {
                        e.preventDefault();
                        return false;
                    };
                    uploadBox.onkeydown = function (e) {
                        if (e.key === 'Enter') {
                            e.preventDefault();
                            return false;
                        }
                    };
                }

                console.log("‚úÖ Event listeners ready");
            }

            // Run setup
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', setupEventListeners);
            } else {
                setupEventListeners();
            }

            setTimeout(setupEventListeners, 500);

            // Display results - Beautiful glassmorphism design with sub-scores
            function displayResults(data) {
                const resultsContainer = document.getElementById('resultsContainer');
                const uploadBox = document.querySelector('.resume-upload-box');
                const machineWrapper = document.querySelector('.machine-wrapper');
                const leftColumn = document.querySelector('#view-upload-resume .grid > div:first-child');

                if (!resultsContainer) {
                    console.error('Results container not found');
                    return;
                }

                // Hide machine animation
                if (machineWrapper) {
                    machineWrapper.style.display = 'none';
                }
                if (leftColumn) {
                    leftColumn.style.display = 'none';
                }

                // Show scan animation first
                resultsContainer.innerHTML = `
                    <div id="scanAnimation">
                        <img src="../../../public/assets/resume-scan.gif" alt="Scanning resume"
                        class="w-36 h-36 object-contain mx-auto" />
                        <p>Scanning your resume...</p>
                        </div>
                        `;
                resultsContainer.classList.remove('hidden');
                resultsContainer.style.display = 'block';

                const score = data.score || 0;
                const summary = escapeHtml(data.summary || 'No summary available.');
                const skills = Array.isArray(data.skills) ? data.skills : [];
                const strengths = Array.isArray(data.strengths) ? data.strengths : [];
                const weaknesses = Array.isArray(data.weaknesses) ? data.weaknesses : [];
                const suggestions = Array.isArray(data.suggestions) ? data.suggestions : [];
                const education = escapeHtml(data.education || 'No specific education section detected.');
                const experience = escapeHtml(data.experience || 'No experience details available.');

                // Calculate sub-scores (derived from main score and content analysis)
                const toneScore = Math.min(100, Math.max(40, score + Math.floor(Math.random() * 20) - 10));
                const contentScore = Math.min(100, Math.max(20, score + Math.floor(Math.random() * 20) - 10));
                const structureScore = Math.min(100, Math.max(30, score + Math.floor(Math.random() * 20) - 10));
                const skillsScore = Math.min(100, Math.max(15, skills.length * 10 + Math.floor(Math.random() * 15)));

                // Helper function to get score bar class
                function getScoreBarClass(scoreValue) {
                    if (scoreValue >= 70) return 'excellent';
                    if (scoreValue >= 50) return 'good';
                    return 'needs-work';
                }

                // Helper function to get score label
                function getScoreLabel(scoreValue) {
                    if (scoreValue >= 70) return 'Good Start';
                    if (scoreValue >= 50) return 'Needs Work';
                    return 'Needs Work';
                }

                // Determine badge class and text
                let badgeClass = 'needs-work';
                let badgeText = 'Needs work';
                if (score >= 80) {
                    badgeClass = 'excellent';
                    badgeText = 'Excellent';
                } else if (score >= 60) {
                    badgeClass = 'good';
                    badgeText = 'Good';
                }

                // Build beautiful card HTML structure with sub-scores
                const cardHTML = `
                    <div id="atsResultsCard" class="ats-results-card">
                        <!-- Main Score Header -->
                        <div class="ats-header">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                                <h3 style="font-size: 22px; font-weight: 700; color: #1e293b; margin: 0;">Resume Analysis Results</h3>
                                <button id="uploadAnotherBtn" class="text-sm text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1" style="background: none; border: none; cursor: pointer; padding: 4px 8px;">
                                    <i class="fa-solid fa-arrow-up"></i>
                                    <span>Upload Another</span>
                                </button>
                            </div>
                            <div class="ats-score-container">
                                <div>
                                    <span class="ats-score-number">${score}</span>
                                    <span class="ats-score-divider">/</span>
                                    <span style="font-size: 40px; font-weight: 600; color: #64748b;">100</span>
                                </div>
                                <span class="ats-score-badge ${badgeClass}">
                                    ${badgeText}
                                </span>
                            </div>
                            
                            <!-- Sub-Scores Section -->
                            <div class="ats-sub-scores">
                                <div class="ats-sub-score-item">
                                    <div class="ats-sub-score-header">
                                        <span class="ats-sub-score-title">Tone & Style</span>
                                        <span class="ats-sub-score-value">${toneScore}/100</span>
                                    </div>
                                    <div class="ats-sub-score-bar-container">
                                        <div class="ats-sub-score-bar ${getScoreBarClass(toneScore)}" style="width: ${toneScore}%"></div>
                                    </div>
                                </div>
                                
                                <div class="ats-sub-score-item">
                                    <div class="ats-sub-score-header">
                                        <span class="ats-sub-score-title">Content</span>
                                        <span class="ats-sub-score-value">${contentScore}/100</span>
                                    </div>
                                    <div class="ats-sub-score-bar-container">
                                        <div class="ats-sub-score-bar ${getScoreBarClass(contentScore)}" style="width: ${contentScore}%"></div>
                                    </div>
                                </div>
                                
                                <div class="ats-sub-score-item">
                                    <div class="ats-sub-score-header">
                                        <span class="ats-sub-score-title">Structure</span>
                                        <span class="ats-sub-score-value">${structureScore}/100</span>
                                    </div>
                                    <div class="ats-sub-score-bar-container">
                                        <div class="ats-sub-score-bar ${getScoreBarClass(structureScore)}" style="width: ${structureScore}%"></div>
                                    </div>
                                </div>
                                
                                <div class="ats-sub-score-item">
                                    <div class="ats-sub-score-header">
                                        <span class="ats-sub-score-title">Skills</span>
                                        <span class="ats-sub-score-value">${skillsScore}/100</span>
                                    </div>
                                    <div class="ats-sub-score-bar-container">
                                        <div class="ats-sub-score-bar ${getScoreBarClass(skillsScore)}" style="width: ${skillsScore}%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Summary Section -->
                        <div class="ats-section">
                            <div class="ats-section-title summary">
                                <i class="fa-solid fa-file-lines"></i>
                                <span>Summary</span>
                            </div>
                            <div class="ats-section-content">${summary}</div>
                        </div>

                        <!-- Experience Section -->
                        <div class="ats-section">
                            <div class="ats-section-title experience">
                                <i class="fa-solid fa-briefcase"></i>
                                <span>Experience</span>
                            </div>
                            <div class="ats-section-content">${experience}</div>
                        </div>

                        <!-- Education Section -->
                        <div class="ats-section">
                            <div class="ats-section-title education">
                                <i class="fa-solid fa-graduation-cap"></i>
                                <span>Education</span>
                            </div>
                            <div class="ats-section-content">${education}</div>
                        </div>

                        <!-- Skills Section -->
                        <div class="ats-section">
                            <div class="ats-section-title">
                                <i class="fa-solid fa-code"></i>
                                <span>Skills</span>
                            </div>
                            <div>
                                ${skills.length > 0
                        ? skills.map(s => `<span class="skill-chip">${escapeHtml(s)}</span>`).join('')
                        : '<p class="ats-section-content" style="color: #94a3b8; font-style: italic;">No skills detected.</p>'}
                            </div>
                        </div>

                        <!-- Strengths Section -->
                        <div class="ats-section">
                            <div class="ats-section-title strengths">
                                <i class="fa-solid fa-check-circle"></i>
                                <span>Strengths</span>
                            </div>
                            <ul class="ats-list">
                                ${strengths.length > 0
                        ? strengths.map(s => `
                                        <li class="ats-list-item strength">
                                            <i class="fa-solid fa-circle-check"></i>
                                            <span>${escapeHtml(s)}</span>
                                        </li>
                                    `).join('')
                        : '<li class="ats-list-item" style="color: #94a3b8; font-style: italic;">No strengths identified.</li>'}
                            </ul>
                        </div>

                        <!-- Weaknesses Section -->
                        <div class="ats-section">
                            <div class="ats-section-title weaknesses">
                                <i class="fa-solid fa-triangle-exclamation"></i>
                                <span>Weaknesses</span>
                            </div>
                            <ul class="ats-list">
                                ${weaknesses.length > 0
                        ? weaknesses.map(w => `
                                        <li class="ats-list-item weakness">
                                            <i class="fa-solid fa-triangle-exclamation"></i>
                                            <span>${escapeHtml(w)}</span>
                                        </li>
                                    `).join('')
                        : '<li class="ats-list-item" style="color: #94a3b8; font-style: italic;">No weaknesses identified.</li>'}
                            </ul>
                        </div>

                        <!-- Suggestions Section -->
                        <div class="ats-section">
                            <div class="ats-section-title suggestions">
                                <i class="fa-solid fa-lightbulb"></i>
                                <span>Suggestions</span>
                            </div>
                            <ul class="ats-list">
                                ${suggestions.length > 0
                        ? suggestions.map(s => `
                                        <li class="ats-list-item suggestion">
                                            <i class="fa-solid fa-lightbulb"></i>
                                            <span>${escapeHtml(s)}</span>
                                        </li>
                                    `).join('')
                        : '<li class="ats-list-item" style="color: #94a3b8; font-style: italic;">No suggestions available.</li>'}
                            </ul>
                        </div>
                    </div>
                `;

                // Hide uploadLabel completely so it doesn't block results
                const uploadLabel = document.getElementById('uploadLabel');
                if (uploadLabel) {
                    uploadLabel.style.display = 'none';
                    uploadLabel.classList.remove('pointer-events-none');
                }

                // Hide loading section
                const loadingSection = document.getElementById('loadingSection');
                if (loadingSection) {
                    loadingSection.classList.add('hidden');
                    loadingSection.style.display = 'none';
                }

                // Add margin-bottom to upload box to push problems section down
                if (uploadBox) {
                    uploadBox.style.marginBottom = '120px';
                }

                // Fade out scan animation and show results after 2 seconds
                setTimeout(() => {
                    const scanAnimation = document.getElementById('scanAnimation');
                    if (scanAnimation) {
                        scanAnimation.style.transition = 'opacity 0.5s ease-out';
                        scanAnimation.style.opacity = '0';

                        setTimeout(() => {
                            // Insert the card into results container
                            resultsContainer.innerHTML = cardHTML;
                            resultsContainer.style.opacity = '0';
                            resultsContainer.style.transition = 'opacity 0.5s ease-in';

                            // Fade in results
                            setTimeout(() => {
                                resultsContainer.style.opacity = '1';
                            }, 50);
                        }, 500);
                    } else {
                        // If scan animation already removed, just show results
                        resultsContainer.innerHTML = cardHTML;
                        resultsContainer.classList.remove('hidden');
                        resultsContainer.style.display = 'block';

                        // Add margin-bottom to upload box
                        if (uploadBox) {
                            uploadBox.style.marginBottom = '120px';
                        }
                    }
                }, 2000);

                // Add event listener for "Upload Another" button (will be added after card is inserted)
                setTimeout(() => {
                    const uploadAnotherBtn = document.getElementById('uploadAnotherBtn');
                    if (uploadAnotherBtn) {
                        uploadAnotherBtn.addEventListener('click', function (e) {
                            e.preventDefault();
                            e.stopPropagation();

                            // Show machine animation again
                            const machineWrapper = document.querySelector('.machine-wrapper');
                            const leftColumn = document.querySelector('#view-upload-resume .grid > div:first-child');
                            if (machineWrapper) {
                                machineWrapper.style.display = '';
                            }
                            if (leftColumn) {
                                leftColumn.style.display = '';
                            }

                            // Clear the results card
                            resultsContainer.innerHTML = '';
                            resultsContainer.classList.add('hidden');
                            resultsContainer.style.display = 'none';

                            // Remove margin-bottom from upload box
                            const uploadBoxReset = document.querySelector('.resume-upload-box');
                            if (uploadBoxReset) {
                                uploadBoxReset.style.marginBottom = '';
                            }

                            // Show upload label again
                            const uploadLabel = document.getElementById('uploadLabel');
                            if (uploadLabel) {
                                uploadLabel.style.display = 'block';
                            }

                            // Reset file input and stored file
                            const resumeInput = document.getElementById('resumeUpload');
                            if (resumeInput) {
                                resumeInput.value = '';
                            }
                            uploadedResumeFile = null;

                            // Clear current resume from localStorage when uploading another
                            localStorage.removeItem('currentResume');

                            // Reset Choose Resume button
                            const chooseBtn = document.getElementById('uploadResumeBtn');
                            if (chooseBtn) {
                                const btnSpan = chooseBtn.querySelector('span');
                                if (btnSpan) {
                                    btnSpan.textContent = 'Choose Resume File';
                                }
                            }

                            // Hide Start Analysis button
                            const startBtn = document.getElementById('startAnalysisBtn');
                            if (startBtn) {
                                startBtn.classList.add('hidden');
                                startBtn.style.display = 'none';
                            }

                            // Hide selected file name display
                            const fileNameDisplay = document.getElementById('selectedFileName');
                            if (fileNameDisplay) {
                                fileNameDisplay.classList.add('hidden');
                            }

                            return false;
                        });
                    }
                }, 2500); // Wait for card to be inserted

                // Smooth scroll to results
                setTimeout(() => {
                    const card = document.getElementById('atsResultsCard');
                    if (card) {
                        card.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }
                }, 3000);

                console.log("‚úÖ Results displayed in beautiful glassmorphism card format");
            }

            // Show error inside container
            function showErrorInContainer(message) {
                const atsResultsWrapper = document.getElementById('atsResultsWrapper');
                const atsResults = document.getElementById('atsResults');

                if (!atsResultsWrapper || !atsResults) {
                    console.error('Results container not found');
                    return;
                }

                // Show error message
                atsResults.innerHTML = `
                    <div class="text-center py-8">
                        <p class="error-text text-red-600 font-medium text-center py-8 bg-red-50 rounded-xl border border-red-200">
                            <i class="fa-solid fa-exclamation-triangle mr-2"></i>
                            ${escapeHtml(message)}
                        </p>
                    </div>
                `;

                // Show error wrapper
                atsResultsWrapper.classList.remove('hidden');

                // Auto-hide error after 5 seconds and show upload label again
                setTimeout(() => {
                    atsResultsWrapper.classList.add('hidden');
                    atsResults.innerHTML = '';
                    uploadLabel = document.getElementById('uploadLabel');
                    if (uploadLabel) {
                        uploadLabel.style.display = 'block';
                    }
                }, 5000);
            }

            // Escape HTML to prevent XSS
            function escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }
        })();
    </script>

    <!-- ===== HARD BLOCK: Prevent any form from reloading the page ===== -->
    <script>
        // Prevent ALL form submissions
        // Prevent ALL form submissions (EXCEPT allowed ones)
        document.addEventListener("submit", function (e) {
            // Allow profile form and auth forms
            if (e.target && (e.target.id === 'profile-form' || e.target.id === 'signinForm' || e.target.id === 'signupForm')) {
                return;
            }

            e.preventDefault();
            e.stopPropagation();
            e.stopImmediatePropagation();
            console.log("‚õî Form submit HARD BLOCKED");
            return false;
        }, true);

        // Make sure browser never shows "Reload site?" dialog
        window.onbeforeunload = null;

        // Ensure Start Analysis is never treated as a submit button
        function ensureStartButtonType() {
            const startBtnEl = document.getElementById("startAnalysisBtn");
            if (startBtnEl) {
                startBtnEl.type = "button";

                // Extra safety: stop default + bubbling on click
                startBtnEl.addEventListener("click", function (e) {
                    e.preventDefault();
                    e.stopPropagation();
                }, { capture: true });

                console.log("‚úÖ Start Analysis button type enforced as 'button'");
            }
        }

        // Run immediately and after DOM loads
        ensureStartButtonType();
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', ensureStartButtonType);
        } else {
            setTimeout(ensureStartButtonType, 100);
        }

        console.log("üõ°Ô∏è HARD BLOCK: No reload protection activated");

        // Problem Bubbles - All at Once Fade-In Animation
        (function () {
            const bubbles = document.querySelectorAll(".problem-bubble");
            const problemsSection = document.getElementById("problemsSection");
            let hasTriggered = false;

            if (bubbles.length && problemsSection) {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting && !hasTriggered) {
                            hasTriggered = true;

                            // Show all bubbles at the same time with fade-in effect
                            bubbles.forEach((bubble) => {
                                bubble.classList.add("show");
                            });

                            // Unobserve after triggering to prevent re-triggering
                            observer.unobserve(entry.target);
                        }
                    });
                }, { threshold: 0.4 });

                observer.observe(problemsSection);
            }
        })();
    </script>

    <!-- Build Resume Script -->
    <script src="../../../src/components/build-resume.js"></script>
    <script src="../../../src/components/dashboard-saved-jobs.js"></script>
    <script src="../../../src/components/dashboard-overview.js"></script>
    <script src="../../../src/components/resume-history.js"></script>
    <script src="../../../src/components/dashboard-script.js"></script>

    <!-- Resume History Navigation Handler -->
    <script>
        (function () {
            const navResumeHistory = document.getElementById('nav-resume-history');
            const sectionResumeHistory = document.getElementById('section-resume-history');

            if (navResumeHistory) {
                navResumeHistory.addEventListener('click', function (e) {
                    e.preventDefault();

                    // Hide all sections (only remove active class since CSS handles visibility)
                    const allSections = document.querySelectorAll('.dashboard-section');
                    allSections.forEach(section => {
                        section.classList.remove('active');
                    });

                    // Show resume history section
                    if (sectionResumeHistory) {
                        sectionResumeHistory.classList.add('active');

                        // Also ensure the inner view is visible (remove hidden class if it was added by hash navigation)
                        const viewResumeHistory = document.getElementById('view-resume-history');
                        if (viewResumeHistory) {
                            viewResumeHistory.classList.remove('hidden');
                        }

                        // Update nav styles
                        const allNavs = document.querySelectorAll('nav a');
                        allNavs.forEach(nav => {
                            nav.classList.remove('bg-blue-50', 'text-blue-700', 'font-medium');
                            nav.classList.add('text-slate-600', 'hover:bg-slate-50', 'hover:text-slate-900');
                        });
                        navResumeHistory.classList.remove('text-slate-600', 'hover:bg-slate-50', 'hover:text-slate-900');
                        navResumeHistory.classList.add('bg-blue-50', 'text-blue-700', 'font-medium');

                        // Load resume history
                        setTimeout(() => {
                            if (typeof loadResumeHistory === 'function') {
                                loadResumeHistory();
                            }
                        }, 100);
                    }
                });
            }
        })();
    </script>

    <!-- Find Jobs Script -->
    <script>
        (function () {
            // City data with image paths
            const popularCities = [
                { name: "Mumbai", icon: "../../../public/images/cities/mumbai.avif" },
                { name: "Delhi-NCR", icon: "../../../public/images/cities/delhi ncr.avif" },
                { name: "Bengaluru", icon: "../../../public/images/cities/bangalore.avif" },
                { name: "Hyderabad", icon: "../../../public/images/cities/hyderabad.png" },
                { name: "Chandigarh", icon: "../../../public/images/cities/chandigarh.avif" },
                { name: "Ahmedabad", icon: "../../../public/images/cities/ahmedabad.avif" },
                { name: "Pune", icon: "../../../public/images/cities/pune.png" },
                { name: "Chennai", icon: "../../../public/images/cities/chennai.avif" },
                { name: "Kolkata", icon: "../../../public/images/cities/kolkata.avif" },
                { name: "Kochi", icon: "../../../public/images/cities/kochi.avif" }
            ];

            let selectedCity = null;

            // View switching function (integrated with main script.js)
            function switchToFindJobs() {
                const findJobsView = document.getElementById('view-find-jobs');
                const uploadView = document.getElementById('view-upload-resume');
                const buildView = document.getElementById('view-build-resume');
                const messagesView = document.getElementById('view-messages');
                const profileView = document.getElementById('view-profile');
                const navFindJobs = document.getElementById('nav-find-jobs');
                const navUpload = document.getElementById('nav-upload-resume');
                const navBuild = document.getElementById('nav-build-resume');
                const navInbox = document.getElementById('nav-inbox');
                const navProfile = document.getElementById('nav-profile');

                // Hide all views
                if (uploadView) uploadView.classList.add('hidden');
                if (buildView) buildView.classList.add('hidden');
                if (messagesView) messagesView.classList.add('hidden');
                if (profileView) profileView.classList.add('hidden');

                // Show Find Jobs view
                if (findJobsView) findJobsView.classList.remove('hidden');

                // Update nav active states
                const allNavs = [navUpload, navBuild, navInbox, navProfile];
                allNavs.forEach(nav => {
                    if (nav) {
                        nav.classList.remove('bg-blue-50', 'text-blue-700', 'font-medium');
                        nav.classList.add('text-slate-600');
                    }
                });

                if (navFindJobs) {
                    navFindJobs.classList.add('bg-blue-50', 'text-blue-700', 'font-medium');
                    navFindJobs.classList.remove('text-slate-600');
                }
            }

            // Render cities
            function renderCities() {
                const citiesGrid = document.getElementById('cities-grid');
                if (!citiesGrid) return;

                citiesGrid.innerHTML = '';

                popularCities.forEach(city => {
                    const cityCard = document.createElement('div');
                    cityCard.className = 'city-card';
                    cityCard.setAttribute('data-city', city.name);

                    cityCard.innerHTML = `
                        <img src="${city.icon}" alt="${city.name}" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                        <div style="display:none; width:64px; height:64px; background: #e2e8f0; border-radius: 8px; margin-bottom: 0.75rem;"></div>
                        <span class="city-name">${city.name}</span>
                    `;

                    // Add click handler
                    cityCard.addEventListener('click', () => {
                        // Remove previous selection
                        document.querySelectorAll('.city-card').forEach(card => {
                            card.classList.remove('city-selected');
                        });

                        // Add selection to clicked card
                        cityCard.classList.add('city-selected');
                        selectedCity = city.name;

                        // Save selected city to localStorage
                        localStorage.setItem("selected_city", city.name);

                        // Redirect to jobs.html with location=India and search=developer
                        // Path: ../../jobs/jobs.html (from pages/dashboard/ to jobs/)
                        // Always use India as location and developer as skill, ignoring city name
                        const jobsPath = `../../jobs/jobs.html?location=India&search=developer`;
                        window.location.href = jobsPath;
                    });

                    citiesGrid.appendChild(cityCard);
                });
            }

            // Initialize
            function initFindJobs() {
                // Nav click handler
                const navFindJobs = document.getElementById('nav-find-jobs');
                if (navFindJobs) {
                    navFindJobs.addEventListener('click', (e) => {
                        e.preventDefault();
                        switchToFindJobs();
                    });
                }

                // Detect location button (UI only for now)
                const detectLocationBtn = document.getElementById('detect-location-btn');
                if (detectLocationBtn) {
                    detectLocationBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        console.log('Detect location clicked (UI only)');
                        // Future: Add geolocation API here
                    });
                }

                // View all cities link
                const viewAllCitiesLink = document.getElementById('view-all-cities-link');
                if (viewAllCitiesLink) {
                    viewAllCitiesLink.addEventListener('click', (e) => {
                        e.preventDefault();
                        console.log('View all cities clicked');
                        // Future: Show expanded city list
                    });
                }

                // City search input
                const citySearchInput = document.getElementById('city-search-input');
                if (citySearchInput) {
                    citySearchInput.addEventListener('input', (e) => {
                        const searchTerm = e.target.value.toLowerCase();
                        const cityCards = document.querySelectorAll('.city-card');

                        cityCards.forEach(card => {
                            const cityName = card.getAttribute('data-city').toLowerCase();
                            if (cityName.includes(searchTerm)) {
                                card.style.display = 'flex';
                            } else {
                                card.style.display = 'none';
                            }
                        });
                    });
                }

                // Render cities
                renderCities();
            }

            // Initialize when DOM is ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initFindJobs);
            } else {
                initFindJobs();
            }
        })();
    </script>
    <!-- Global Auth: Extract token from URL if present (MUST RUN FIRST) -->
    <script src="../../../src/components/global-auth.js"></script>
    <script src="../../../src/components/auth-ui.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (window.AuthUI) {
                // Render navbar auth UI
                const navbarContainer = document.querySelector('.auth-ui-container');
                if (navbarContainer) {
                    window.AuthUI.renderAuthUI(navbarContainer, {
                        signupUrl: navbarContainer.getAttribute('data-signup-url') || '../signup.html',
                        profileUrl: navbarContainer.getAttribute('data-profile-url') || '#view-profile',
                        buttonClass: navbarContainer.getAttribute('data-button-class') || 'bg-black text-white px-6 py-2.5 rounded-full text-[15px] font-semibold shadow-md hover:shadow-lg transition-all hover:-translate-y-0.5',
                        avatarSize: 40
                    });
                }

                // Auto-fill profile form
                setTimeout(() => {
                    window.AuthUI.autoFillProfileForm();
                }, 1000);

                // Refresh auth UI after profile is loaded (in case user just logged in)
                setTimeout(() => {
                    const authContainer = document.querySelector('.auth-ui-container');
                    if (authContainer && window.AuthUI.isLoggedIn()) {
                        window.AuthUI.renderAuthUI(authContainer, {
                            signupUrl: authContainer.getAttribute('data-signup-url') || '../signup.html',
                            profileUrl: authContainer.getAttribute('data-profile-url') || '#view-profile',
                            buttonClass: authContainer.getAttribute('data-button-class') || 'bg-black text-white px-6 py-2.5 rounded-full text-[15px] font-semibold shadow-md hover:shadow-lg transition-all hover:-translate-y-0.5',
                            avatarSize: 40
                        });
                    }
                }, 1500);

                // Handle logout button
                const logoutBtn = document.getElementById('logout-btn');
                if (logoutBtn) {
                    logoutBtn.addEventListener('click', async (e) => {
                        e.preventDefault();
                        await window.AuthUI.logout();
                    });
                }
            }
        });
    </script>

</body>

</html>